<template><div><h2 id="react-tsá„‹á…ª-á„…á…¦á„€á…©-á„‡á…³á†¯á„…á…©á†¨á„‹á…µ-á„†á…¡á†«á„‚á…¡á„†á…§á†«" tabindex="-1"><a class="header-anchor" href="#react-tsá„‹á…ª-á„…á…¦á„€á…©-á„‡á…³á†¯á„…á…©á†¨á„‹á…µ-á„†á…¡á†«á„‚á…¡á„†á…§á†«" aria-hidden="true">#</a> React TSì™€ ë ˆê³  ë¸”ë¡ì´ ë§Œë‚˜ë©´â€¦</h2>
<p><img src="@source/docs/Nextjs/2024-04-05-ReactLikeLEGO/img/ReactLikeLEGO_0.png" alt="ì´ë¯¸ì§€"></p>
<h1 id="á„á…©á„…á…©á†¨" tabindex="-1"><a class="header-anchor" href="#á„á…©á„…á…©á†¨" aria-hidden="true">#</a> ì´ˆë¡</h1>
<p>ë ˆê³  ì„¸ê³„ëŠ” ë†€ëìŠµë‹ˆë‹¤. ê·¸ íŠ¹ë³„í•œ ê°„ë‹¨í•¨ìœ¼ë¡œ ì–´ë¦°ì´ì™€ ì„±ì¸ë“¤ì˜ ì°½ì˜ë ¥ì„ ìê·¹í•©ë‹ˆë‹¤. ì €ëŠ” ì—¬ê¸°ì— ì ì¬ë ¥ì„ ë³´ê³  React TS ê°œë°œìë¡œì„œ ë ˆê³  ë¸”ë¡ì˜ ë§ˆë²•ì„ ì¼í„° ê²½í—˜ìœ¼ë¡œ ê°€ì ¸ì˜¤ê³  ì‹¶ìŠµë‹ˆë‹¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>React TSë¥¼ ì„ íƒí•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬í˜„í•˜ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì´ê¸° ë•Œë¬¸ì´ì£ .
React 16.8ì—ì„œ ì†Œê°œëœ í›…ìŠ¤ê°€ ê·¸ í•µì‹¬ì…ë‹ˆë‹¤. í›…ìŠ¤ê°€ ë¬´ì—‡ì¸ì§€, ì½”ë“œë¥¼ ëœ verboseí•˜ê²Œ ë§Œë“¤ì–´ì£¼ë©° ë” ì½ê¸° ì‰½ê³  ë‹¤ì–‘í•˜ê²Œ ë§Œë“œëŠ” ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ë¬¼ë¡ , LEGOë¡œ í‘œí˜„í•©ë‹ˆë‹¤. ğŸ™‚</p>
<h1 id="á„†á…©á†¨á„á…¡" tabindex="-1"><a class="header-anchor" href="#á„†á…©á†¨á„á…¡" aria-hidden="true">#</a> ëª©ì°¨</h1>
<ul>
<li>ì†Œê°œ</li>
<li>íƒ€ì… â€“ ìš”ì²­(request), ì‘ë‹µ ë°ì´í„°(ResponseData), ì—ëŸ¬ ë°ì´í„°(ErrorData)</li>
<li>íƒ€ì… â€“ GateRequest, GateResponse, GateError</li>
<li>íƒ€ì… â€“ GateCallbacks</li>
<li>í›…ìŠ¤ â€“ useAxios</li>
<li>í›…ìŠ¤ â€“ useGateLoader</li>
<li>í›…ìŠ¤ â€“ useGateError</li>
<li>í›…ìŠ¤ â€“ useGateMock</li>
</ul>
<h1 id="_1-á„‰á…©á„€á…¢" tabindex="-1"><a class="header-anchor" href="#_1-á„‰á…©á„€á…¢" aria-hidden="true">#</a> 1. ì†Œê°œ</h1>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì´ ê¸°ì‚¬ì—ëŠ” í˜•ì‹ ê´€ë¦¬ì— ê´€í•œ ì„¸ ê°€ì§€ ì„¹ì…˜ì´ í¬í•¨ë˜ì–´ ìˆê³  í›„í¬ êµ¬í˜„ì— ê´€í•œ ë„¤ ê°œì˜ ì„¹ì…˜ì´ ë” ìˆìŠµë‹ˆë‹¤.</p>
<p>ì—¬ê¸°ì„œ React TS ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë„¤íŠ¸ì›Œí‚¹ ë ˆì´ì–´ì— ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤. ì´ ë ˆì´ì–´ëŠ” useAxiosë¼ëŠ” ì‚¬ìš©ì ì •ì˜ React í›„í¬ì— ì˜í•´ ì²˜ë¦¬ë  ê²ƒì…ë‹ˆë‹¤. ì´ë¯¸ axiosë¥¼ ì•Œê³  ê³„ì‹ ê°€ìš”? REST(Representational State Transfer)ê°€ ê°€ì¥ ì¼ë°˜ì ì¸ ì‹œë‚˜ë¦¬ì˜¤ì¸ HTTP í´ë¼ì´ì–¸íŠ¸ë¥¼ í†µí•©í•˜ëŠ” ë° ê°€ì¥ ì¸ê¸° ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.</p>
<p>ì œê°€ ëª¨ë¥´ëŠ” ê²ƒì¼ì§€ë„ ëª¨ë¥´ê² ì§€ë§Œ, ë„¤íŠ¸ì›Œí‚¹ ë ˆì´ì–´ëŠ” ê³µí•­ì„ ë– ì˜¬ë¦¬ê²Œ í•©ë‹ˆë‹¤. íŠ¹íˆ:</p>
<ul>
<li>Gate = REST API (ì˜ˆ: POST /payment, GET /payment-status ê²Œì´íŠ¸)</li>
<li>Terminal = scopeì— ë”°ë¼ ê·¸ë£¹í™”ëœ ê²Œì´íŠ¸ ì„¸íŠ¸ (ì˜ˆ: &quot;payment&quot; í„°ë¯¸ë„)</li>
</ul>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ìš°ë¦¬ì˜ ë ˆê³  ê²½í—˜ ì¤‘ì— ì´ê²ƒì„ ê¸°ì–µí•´ì£¼ì„¸ìš”. ì„¤ë ˆì‹œë‚˜ìš”? ê·¸ëŸ¼, ì¶œë°œí•´ë´…ì‹œë‹¤!</p>
<h2 id="_2-á„Œá…©á†¼á„…á…²-â€“-á„‹á…­á„á…¥á†¼-request-á„‹á…³á†¼á„ƒá…¡á†¸-á„ƒá…¦á„‹á…µá„á…¥-responsedata-á„‹á…©á„…á…²-á„ƒá…¦á„‹á…µá„á…¥-errordata" tabindex="-1"><a class="header-anchor" href="#_2-á„Œá…©á†¼á„…á…²-â€“-á„‹á…­á„á…¥á†¼-request-á„‹á…³á†¼á„ƒá…¡á†¸-á„ƒá…¦á„‹á…µá„á…¥-responsedata-á„‹á…©á„…á…²-á„ƒá…¦á„‹á…µá„á…¥-errordata" aria-hidden="true">#</a> 2. ì¢…ë¥˜ â€“ ìš”ì²­(Request), ì‘ë‹µ ë°ì´í„°(ResponseData), ì˜¤ë¥˜ ë°ì´í„°(ErrorData)</h2>
<p>React TS ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì˜ì›…ë“¤ì˜ ëª©ë¡ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ êµ¬í˜„ ì¤‘ì´ë¼ê³  ìƒìƒí•´ë´…ì‹œë‹¤. ì˜¤ëŠ˜ì€ ì§€ì •ëœ ëª©ë¡ì— ì˜ì›…ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ POST APIë¥¼ í†µí•©í•´ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ë°±ì—”ë“œ ì¹œêµ¬ê°€ ë‹¤ìŒ ê°€ì§œ ì •ë³´ë¥¼ ì œê³µí–ˆìŠµë‹ˆë‹¤:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> method <span class="token operator">=</span> <span class="token string">'POST'</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://my-backend/v1/hero/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>heroesListId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?top=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>top<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>

type Hero <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> string
  <span class="token literal-property property">terrestrial</span><span class="token operator">:</span> boolean
  <span class="token literal-property property">strength</span><span class="token operator">:</span> number <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span>

type Request <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">token</span><span class="token operator">:</span> string <span class="token punctuation">}</span>     <span class="token comment">// ìš”ì²­ í—¤ë”</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">heroesListId</span><span class="token operator">:</span> number <span class="token punctuation">}</span> <span class="token comment">// ê²½ë¡œ ë§¤ê°œë³€ìˆ˜</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> boolean <span class="token punctuation">}</span>       <span class="token comment">// ì¿¼ë¦¬ ë¬¸ìì—´ ë§¤ê°œë³€ìˆ˜</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> Hero                     <span class="token comment">// ë³¸ë¬¸</span>
<span class="token punctuation">}</span>

type ResponseData <span class="token operator">=</span> Hero <span class="token comment">// âœ… ì„±ê³µí•œ ê²½ìš° (ì¶”ê°€ëœ ì˜ì›…)</span>

type ErrorData <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// âŒ ì‹¤íŒ¨í•œ ê²½ìš° (ì˜¤ë¥˜ ë°œìƒ)</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> string
  <span class="token literal-property property">description</span><span class="token operator">:</span> string
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì§€ê¸ˆê¹Œì§€ ê½¤ ì‰¬ì› ì£ . ë§ˆì§€ë§‰ ì„¸ ê°€ì§€ ìœ í˜•(Request, ResponseData, ErrorData)ì€ API ì™•ë³µ ì—¬ì •ì˜ í˜•íƒœë¥¼ ì •ì˜í•©ë‹ˆë‹¤. LEGO ì„¸ê³„ì—ì„œ ì´ëŸ¬í•œ ìœ í˜•ë“¤ì€ ë‹¤ìŒê³¼ ê°™ì€ ë©‹ì§„ ì°¨ëŸ‰ìœ¼ë¡œ ë³€í•©ë‹ˆë‹¤.</p>
<p><img src="@source/docs/Nextjs/2024-04-05-ReactLikeLEGO/img/ReactLikeLEGO_1.png" alt="ReactLikeLEGO_1"></p>
<p>ë°”í€´ë“¤ì€ ì–´ë””ì— ì‚¬ìš©í• ê¹Œìš”? ê³§ ì•Œê²Œ ë  ê±°ì—ìš”. ğŸ˜œ</p>
<h3 id="_3-á„‹á…²á„’á…§á†¼-â€“-gaterequest-gateresponse-gateerror" tabindex="-1"><a class="header-anchor" href="#_3-á„‹á…²á„’á…§á†¼-â€“-gaterequest-gateresponse-gateerror" aria-hidden="true">#</a> 3. ìœ í˜• â€“ GateRequest, GateResponse, GateError</h3>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì, ì´ì œ POST APIë¥¼ ê³µí•­ ê²Œì´íŠ¸ë¡œ ìƒìƒí•´ë´…ì‹œë‹¤. ì œê°€ ì†Œê°œí•œ ëŒ€ë¡œìš”. ê·¸ëŸ¬ë©´ axiosì— ì˜í•´ ë…¸ì¶œëœ ë‹¤ìŒ ì„¸ ê°€ì§€ ì¼ë°˜ì ì¸ í˜•ì‹ë“¤ì˜ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ìˆì–´ìš”:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> AxiosError<span class="token punctuation">,</span> AxiosRequestConfig<span class="token punctuation">,</span> AxiosResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>

type GateRequest<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">></span> <span class="token operator">=</span> AxiosRequestConfig <span class="token operator">&amp;</span> <span class="token constant">D</span>
type GateResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> AxiosResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span>
type GateError<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span> <span class="token operator">=</span> AxiosError<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì•Œê² ì£ , ì´ê²ƒì€ ë³µì¡í•´ ë³´ì¼ ìˆ˜ ìˆì–´ìš”... ì´ ìƒˆë¡œìš´ í˜•ì‹ë“¤ì€ ë­ì£ ?? ìŒ, axiosëŠ” ìš”ì²­ì˜ ëª¨ì–‘, responseData ë° errorDataë¥¼ ì§€ì •í•  ìˆ˜ ìˆë„ë¡ ì¼ë°˜ í˜•ì‹ì„ ì‚¬ìš©í•´ìš”. ì´ ê°œë…ì„ ëª…í™•íˆ í•˜ê¸° ìœ„í•´ ë‘ ê°€ì§€ ì˜ˆì œë¥¼ ì‚´í´ë³´ì£ :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// ì˜ˆì œ 1</span>
<span class="token keyword">const</span> <span class="token literal-property property">request</span><span class="token operator">:</span> Request <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token string">'1234'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">heroListId</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Ironman'</span><span class="token punctuation">,</span> <span class="token literal-property property">terrestrial</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token literal-property property">gateRequest</span><span class="token operator">:</span> GateRequest<span class="token operator">&lt;</span>Request<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://my-backend/v1/hero/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>request<span class="token punctuation">.</span>path<span class="token punctuation">.</span>heroListId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token operator">...</span>request<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// ì˜ˆì œ 2</span>
<span class="token keyword">const</span> <span class="token literal-property property">responseData</span><span class="token operator">:</span> ResponseData <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Ironman'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">terrestrial</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token literal-property property">gateResponse</span><span class="token operator">:</span> GateResponse<span class="token operator">&lt;</span>ResponseData<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  <span class="token literal-property property">statusText</span><span class="token operator">:</span> <span class="token string">'OK'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> responseData<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>â—ì¤‘ìš” â€“ ìœ„ì—ì„œ ì–¸ê¸‰ëœ Gate* ìœ í˜•ë“¤ì€ ë‚´ë¶€ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤:</p>
<ul>
<li>meta-info = ìœ í˜•ì´ ê³ ì •ë  ìˆ˜ ìˆëŠ” í•„ë“œë“¤ (ì˜ˆ: method, url, status, â€¦)</li>
<li>data-info = ìœ í˜•ì´ í™•ì¥ë  ìˆ˜ ìˆëŠ” í•„ë“œë“¤ (ì˜ˆ: data, params, â€¦)</li>
</ul>
<p>í›„ìëŠ” ì´ì „ì— ë³¸ Request, ResponseData, ErrorData ìœ í˜•ê³¼ ì¼ì¹˜í•©ë‹ˆë‹¤. ì•„ë§ˆë„ ì´ê²ƒë“¤ì´ Gate* ìœ í˜•ë“¤ê³¼ ì¼ëŒ€ì¼ ëŒ€ì‘ë¨ì„ ì§ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ì•½í•˜ë©´, ìš°ë¦¬ëŠ” Gate* ìœ í˜•ë“¤ì„ ë©í¼ë¡œ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ LEGO ì°¨ëŸ‰ë“¤ë¡œ í‘œì‹œëœ ê²ƒì²˜ëŸ¼ìš”.</p>
<p>ì´ í…ìŠ¤íŠ¸ë¥¼ Markdown í˜•ì‹ìœ¼ë¡œ ë°”ê¾¸ì—ˆìŠµë‹ˆë‹¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì¡°ê¸ˆ í—·ê°ˆë¦¬ì‹  ê°€ìš”? ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”. ê³§ ì´ëŸ¬í•œ ìœ í˜•ë“¤ì„ ì‚¬ìš©í•˜ë©´ ëª¨ë“  ê²ƒì´ ë”ìš± ëª…í™•í•´ì§ˆ ê±°ì˜ˆìš”. ğŸ’ª</p>
<h1 id="_4-á„‹á…²á„’á…§á†¼-gatecallbacks" tabindex="-1"><a class="header-anchor" href="#_4-á„‹á…²á„’á…§á†¼-gatecallbacks" aria-hidden="true">#</a> 4. ìœ í˜• - GateCallbacks</h1>
<p>ìœ„ì—ì„œ ì„¤ëª…í•œ ì„¸ ê°€ì§€ Gate* ìœ í˜•ì— ì¶”ê°€ë¡œ ì¼ë°˜ì ì¸ ìœ í˜•ì„ ì†Œê°œí•´ì•¼ í•©ë‹ˆë‹¤:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">export</span> type GateCallbacks<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  onIdle<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span>
  onPending<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span>
  onSuccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token literal-property property">response</span><span class="token operator">:</span> GateResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span>
  onFailure<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">error</span><span class="token operator">:</span> GateError<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>4 ê°œì˜ ì½œë°±ì„ í˜•ì„±í•˜ê¸° ìœ„í•´ useAxios í›…ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì½œë°± ìœ í˜•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<p>í•„ìš”í•˜ë‹¤ë©´, ì´ ì„¹ì…˜ìœ¼ë¡œ ë‹¤ì‹œ ëŒì•„ì˜¤ì„¸ìš”.</p>
<h1 id="_5-hook-â€“-useaxios" tabindex="-1"><a class="header-anchor" href="#_5-hook-â€“-useaxios" aria-hidden="true">#</a> 5. Hook â€“ useAxios</h1>
<p>ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ëŠ” íƒ€ì…ì„ ë‹¤ë£¨ì—ˆëŠ”ë°, ì´ì œ useAxios í›…ì„ êµ¬í˜„í•˜ëŠ” ì¬ë¯¸ìˆëŠ” ì‹œê°„ì…ë‹ˆë‹¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token comment">// axios.hook.ts</span>

<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GateCallbacks<span class="token punctuation">,</span> GateError<span class="token punctuation">,</span> GateRequest<span class="token punctuation">,</span> GateResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/types'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useAxios <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> <span class="token function-variable function">crossGate</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>
    request<span class="token operator">:</span> GateRequest<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">></span><span class="token punctuation">,</span>
    callbacks<span class="token operator">:</span> GateCallbacks<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">></span>
  <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> onSuccess<span class="token punctuation">,</span> onFailure<span class="token punctuation">,</span> onIdle<span class="token punctuation">,</span> onPending <span class="token punctuation">}</span> <span class="token operator">=</span> callbacks
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      onPending<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> GateResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span>
      onSuccess<span class="token operator">?.</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">,</span> response<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      onFailure<span class="token operator">?.</span><span class="token punctuation">(</span>error <span class="token keyword">as</span> GateError<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      onIdle<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> crossGate <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì´ ê¸°ì‚¬ë¥¼ ì½ê³  ê³„ì‹ ë‹¤ë©´ í”„ë¡œê·¸ë˜ë° ê²½í—˜ì´ ìˆìœ¼ì‹œë‹¤ëŠ” ê±¸ ì•Œê² ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì„¤ëª…ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤. ì œê°€ ë‘ ê°€ì§€ ê´€ì°° ë‚´ìš©ì„ ê³µìœ í•˜ê² ìŠµë‹ˆë‹¤:</p>
<ul>
<li>ëª¨ë“  ì½œë°±ì€ crossGate í•¨ìˆ˜ì˜ ì„ íƒì  ë§¤ê°œë³€ìˆ˜ì´ë¯€ë¡œ .? ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ì•ˆì „í•˜ê²Œ í˜¸ì¶œë©ë‹ˆë‹¤.</li>
<li>í•´ë‹¹ í›„í¬ëŠ” ì´ì „ ì„¹ì…˜ì—ì„œ ë³´ì•˜ë˜ D, T, E ì œë„¤ë¦­ íƒ€ì…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</li>
</ul>
<p>ì—¬ê¸°ì— ì‚¬ìš© ì˜ˆì‹œê°€ ìˆìŠµë‹ˆë‹¤:</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// ì‚¬ìš© ì˜ˆì‹œ</span>

<span class="token keyword">const</span> <span class="token literal-property property">request</span><span class="token operator">:</span> Request <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// â¬…ï¸ ìœ„ì—ì„œ ì •ì˜ëœëŒ€ë¡œ</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token string">'1234'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">heroListId</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Ironman'</span><span class="token punctuation">,</span> <span class="token literal-property property">terrestrial</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token literal-property property">gateRequest</span><span class="token operator">:</span> GateRequest<span class="token operator">&lt;</span>Request<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// â¬…ï¸ ìœ„ì—ì„œ ì •ì˜ëœëŒ€ë¡œ</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://my-backend/v1/hero/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>request<span class="token punctuation">.</span>path<span class="token punctuation">.</span>heroListId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token operator">...</span>request<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> crossGate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAxios</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">crossGate</span><span class="token punctuation">(</span>
  gateRequest<span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token function-variable function">onSuccess</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">responseData<span class="token punctuation">,</span> gateResponse</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>responseData<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gateResponse<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token comment">// responseDataì™€ ë™ì¼</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gateResponse<span class="token punctuation">.</span>status<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">onFailure</span><span class="token operator">:</span> console<span class="token punctuation">.</span>error<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ê·¸ëŸ¼ ì´ìƒìœ¼ë¡œ, ì´ë¥¼ LEGO ë¸”ë¡ìœ¼ë¡œ ì–´ë–»ê²Œ ë²ˆì—­í• ê¹Œìš”?</p>
<p><img src="@source/docs/Nextjs/2024-04-05-ReactLikeLEGO/img/ReactLikeLEGO_3.png" alt="LEGO ë¸”ë¡ ì´ë¯¸ì§€"></p>
<p>ìœ„ ê·¸ë¦¼ì—ì„œ ë³´ì‹œë‹¤ì‹œí”¼, íë¦„ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:```</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<ul>
<li>crossGate í•¨ìˆ˜ê°€ ê²Œì´íŠ¸ ìš”ì²­(ë…¸ë€ ì°¨ëŸ‰)ê³¼ í•¨ê»˜ í˜¸ì¶œë©ë‹ˆë‹¤.</li>
<li>ëŒ€ê¸° ì¤‘ì¸ ì½œë°±ì¸ onPendingì´ í˜¸ì¶œë©ë‹ˆë‹¤.</li>
<li>ê²Œì´íŠ¸ ì°¨ëŸ‰ì„ ìš´ì†¡í•˜ëŠ” ë¹„í–‰ê¸°ë¡œ í‘œì‹œëœ HTTP ì™•ë³µì´ ì‹œì‘ë©ë‹ˆë‹¤.</li>
<li>ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì´í–‰ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ResponseDataì™€ GateResponse(ë…¹ìƒ‰ ì°¨ëŸ‰)ì™€ í•¨ê»˜ onSuccess ì½œë°±ì´ í˜¸ì¶œë©ë‹ˆë‹¤.</li>
<li>ìš”ì²­ì´ ì‹¤íŒ¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë°œìƒí•œ GateError(ë¹¨ê°„ ì°¨ëŸ‰)ì™€ í•¨ê»˜ onFailure ì½œë°±ì´ í˜¸ì¶œë©ë‹ˆë‹¤.</li>
<li>4ì™€ 5ì˜ ê²½ìš°ì—ëŠ” onIdle ì½œë°±ì´ ëª¨ë‘ í˜¸ì¶œë©ë‹ˆë‹¤.</li>
</ul>
<h1 id="_6-á„’á…®á„á…³-â€“-usegateloader" tabindex="-1"><a class="header-anchor" href="#_6-á„’á…®á„á…³-â€“-usegateloader" aria-hidden="true">#</a> 6. í›„í¬ â€“ useGateLoader</h1>
<p>ì´ì „ ì„¹ì…˜ì—ì„œ, ìš”ì²­ ìƒíƒœì— ëŒ€í•´ crossGate í˜¸ì¶œìì—ê²Œ ì•Œë¦¬ê¸° ìœ„í•´ onIdleê³¼ onPending ì„ íƒì  ì½œë°±ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ ì¤‘ì•™ ì§‘ì¤‘í™”í•˜ê¸° ìœ„í•´ useGateLoaderë¼ëŠ” ìƒˆë¡œìš´ í›„í¬ë¥¼ í†µí•©í•˜ì—¬ ê¸°ë³¸ ë™ì‘ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// gate-loader.hook.ts</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useGateLoader</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">gateId</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ í›„í¬</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleIdle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'TODO - ëŒ€ê¸° ì¤‘ ìƒíƒœì˜ ì¤‘ì•™ ê´€ë¦¬ (ì˜ˆ: Recoil ì‚¬ìš©)'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gateId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gateId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handlePending</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'TODO - ëŒ€ê¸° ì¤‘ ìƒíƒœì˜ ì¤‘ì•™ ê´€ë¦¬ (ì˜ˆ: Recoil ì‚¬ìš©)'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gateId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gateId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> handleIdle<span class="token punctuation">,</span> handlePending <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// axios.hook.ts</span>

<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GateCallbacks<span class="token punctuation">,</span> GateError<span class="token punctuation">,</span> GateRequest<span class="token punctuation">,</span> GateResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/types'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> useGateLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./gate-loader.hook'</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ import</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useAxios <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">gateId</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ gateId ë§¤ê°œë³€ìˆ˜ (ì¤‘ì•™í™”ì— ìœ ìš©í•¨)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> handleIdle<span class="token punctuation">,</span> handlePending <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useGateLoader</span><span class="token punctuation">(</span>gateId<span class="token punctuation">)</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ hook í˜¸ì¶œ </span>

  <span class="token keyword">const</span> <span class="token function-variable function">crossGate</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>
    <span class="token parameter"><span class="token literal-property property">request</span><span class="token operator">:</span> GateRequest<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">></span><span class="token punctuation">,</span>
    <span class="token literal-property property">callbacks</span><span class="token operator">:</span> GateCallbacks<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">></span></span>
  <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> 
      onSuccess<span class="token punctuation">,</span>
      onFailure<span class="token punctuation">,</span>
      onIdle <span class="token operator">=</span> handleIdle<span class="token punctuation">,</span>      <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ ê¸°ë³¸ ì½œë°±</span>
      onPending <span class="token operator">=</span> handlePending <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ ê¸°ë³¸ ì½œë°±</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> callbacks
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">onPending</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ ê¸°ë³¸ ì½œë°± ë•ë¶„ì— ë” ì´ìƒ ?. ì—°ì‚°ìê°€ í•„ìš”í•˜ì§€ ì•ŠìŒ</span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> GateResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span>
      onSuccess<span class="token operator">?.</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">,</span> response<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      onFailure<span class="token operator">?.</span><span class="token punctuation">(</span>error <span class="token keyword">as</span> GateError<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token function">onIdle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ ê¸°ë³¸ ì½œë°± ë•ë¶„ì— ë” ì´ìƒ ?. ì—°ì‚°ìê°€ í•„ìš”í•˜ì§€ ì•ŠìŒ</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> crossGate <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì—¬ê¸°ê°€ í›…ì˜ í˜ì…ë‹ˆë‹¤: ë‘ ê°€ì§€ ë‹¤ë¥¸ êµ¬í˜„ì„ ë‘ ê°€ì§€ ë‹¤ë¥¸ í›…ìœ¼ë¡œ ë¶„ë¦¬í•œ ë‹¤ìŒ, ë§ˆì¹˜... ë ˆê³ ì²˜ëŸ¼ í†µí•©í–ˆìŠµë‹ˆë‹¤!</p>
<img src="@source/docs/Nextjs/2024-04-05-ReactLikeLEGO/img/ReactLikeLEGO_4.png" />
<p>ì´ì œ onIdle ë° onPendingì— ê´€ê³„ëœ ë‘ ê°œì˜ ì „ë°© í¬í„¸ì´ êº¼ì ¸ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì´ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ í˜¸ì¶œìê°€ ê·¸ ê°’ì„ ì „ë‹¬í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ì£ . ê·¸ëŸ¬ë‚˜ ì½”ë“œì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´ ê¸°ë³¸ ì½œë°±ì„ ë‚˜íƒ€ë‚´ëŠ” ë‘ ê°œì˜ ì¼œì§„ í¬í„¸ì´ ë’¤ì— ìˆìŠµë‹ˆë‹¤.```</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<h1 id="_7-á„’á…®á„á…³-usegateerror" tabindex="-1"><a class="header-anchor" href="#_7-á„’á…®á„á…³-usegateerror" aria-hidden="true">#</a> 7. í›„í¬ - useGateError</h1>
<p>ìš”í–‰ì´ ë¨¹ì–´ë“¤ì´ëŠ” ê²ƒê³¼ í•¨ê»˜ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì´ì „ ë°©ë²•ì„ ì ì‘ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” useGateError í›„í¬ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// gate-error.hook.ts</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> GateError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/types'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useGateError <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">gateId</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ í›„í¬</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleFailure</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">error</span><span class="token operator">:</span> GateError<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'í•  ì¼ - ì˜¤ë¥˜ë“¤ì˜ ì¤‘ì•™ ì§‘ì¤‘ ê´€ë¦¬ (ì˜ˆë¥¼ ë“¤ì–´ Recoil ì‚¬ìš©)'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gateId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gateId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> handleFailure <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// axios.hook.ts</span>

<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GateCallbacks<span class="token punctuation">,</span> GateError<span class="token punctuation">,</span> GateRequest<span class="token punctuation">,</span> GateResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/types'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> useGateError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./gate-error.hook'</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ ì„í¬íŠ¸</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGateLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./gate-loader.hook'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useAxios <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">gateId</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> handleIdle<span class="token punctuation">,</span> handlePending <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useGateLoader</span><span class="token punctuation">(</span>gateId<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> handleFailure <span class="token punctuation">}</span> <span class="token operator">=</span> useGateError<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">(</span>gateId<span class="token punctuation">)</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ í›„í¬ í˜¸ì¶œ</span>

  <span class="token keyword">const</span> <span class="token function-variable function">crossGate</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">request</span><span class="token operator">:</span> GateRequest<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token literal-property property">callbacks</span><span class="token operator">:</span> GateCallbacks<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      onSuccess<span class="token punctuation">,</span>
      onFailure <span class="token operator">=</span> handleFailure<span class="token punctuation">,</span> <span class="token comment">// â¬…ï¸ ê¸°ë³¸ ì½œë°±</span>
      onIdle <span class="token operator">=</span> handleIdle<span class="token punctuation">,</span>
      onPending <span class="token operator">=</span> handlePending<span class="token punctuation">,</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> callbacks
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">onPending</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> GateResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span>
      onSuccess<span class="token operator">?.</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">,</span> response<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">onFailure</span><span class="token punctuation">(</span>error <span class="token keyword">as</span> GateError<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´: ê¸°ë³¸ ì½œë°± ë•ë¶„ì— ?. ì—°ì‚°ìê°€ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token function">onIdle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> crossGate <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ìƒìƒí•˜ì‹¤ ìˆ˜ ìˆê² ì§€ë§Œ, LEGO ë²„ì „ì˜ ì´ í†µí•©ì€ ì´ì „ ê²ƒê³¼ë„ ë¹„ìŠ·í•©ë‹ˆë‹¤.</p>
<p><img src="@source/docs/Nextjs/2024-04-05-ReactLikeLEGO/img/ReactLikeLEGO_5.png" alt="LEGO version"></p>
<p>ì´ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ í˜¸ì¶œìëŠ” onFailure ì½œë°±ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë°œìƒí•œ GateErrorëŠ” ê¸°ë³¸ ì½œë°±(ì¼œì§„ ë’·ë¬¸ í¬í„¸ë¡œ ë‚˜íƒ€ëƒ„)ì— ì˜í•´ ì²˜ë¦¬ë©ë‹ˆë‹¤.</p>
<h1 id="_8-á„’á…®á†¨-â€“-usegatemock" tabindex="-1"><a class="header-anchor" href="#_8-á„’á…®á†¨-â€“-usegatemock" aria-hidden="true">#</a> 8. í›… â€“ useGateMock</h1>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>useAxiosì— í†µí•©í•˜ëŠ” ë§ˆì§€ë§‰ í›„í¬ëŠ” ëª¨ì˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” useGateMockê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.</p>
<p>ëª¨ì˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê³  í™œì„±í™”/ë¹„í™œì„±í™”í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, console.logì—ì„œ ì¶”ì²œí•˜ëŠ” ëŒ€ë¡œ ì „ìš© ì™¸ë¶€ í›„í¬(e.g. useMockend)ì— ì˜ì¡´í•˜ëŠ” ê²ƒì´ ë” ë‚˜ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// gate-mock.hook.ts</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useGateMock</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">gateId</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">'TODO - ì¤‘ì•™ ì§‘ì¤‘ì‹ ëª¨ì˜ ë°ì´í„° í™œì„±í™”/ë¹„í™œì„±í™” (ì˜ˆ: ì‚¬ìš©ì ì§€ì • í›„í¬ "useMockend"ë¥¼ ì‚¬ìš©í•˜ì—¬)'</span>
  <span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gateId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gateId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> mocked <span class="token operator">=</span> <span class="token boolean">false</span>

  <span class="token keyword">const</span> <span class="token function-variable function">getMock</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'TODO - ì—¬ê¸°ì„œ ëª¨ì˜ ë°ì´í„°ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì˜ˆ: ì‚¬ìš©ì ì§€ì • í›„í¬ "useMockend"ë¥¼ ì‚¬ìš©í•˜ì—¬)'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gateId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gateId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> mocked<span class="token punctuation">,</span> getMock <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// axios.hook.ts</span>

<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GateCallbacks<span class="token punctuation">,</span> GateError<span class="token punctuation">,</span> GateRequest<span class="token punctuation">,</span> GateResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/types'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> useGateError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./gate-error.hook'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGateLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./gate-loader.hook'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGateMock <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./gate-mock.hook'</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ import ë¶€ë¶„</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useAxios <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">gateId</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> handleIdle<span class="token punctuation">,</span> handlePending <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useGateLoader</span><span class="token punctuation">(</span>gateId<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> handleFailure <span class="token punctuation">}</span> <span class="token operator">=</span> useGateError<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">(</span>gateId<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> mocked<span class="token punctuation">,</span> getMock <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useGateMock</span><span class="token punctuation">(</span>gateId<span class="token punctuation">)</span> <span class="token comment">// â¬…ï¸ ìƒˆë¡œìš´ í›„í¬ í˜¸ì¶œ ë¶€ë¶„</span>

  <span class="token keyword">const</span> <span class="token function-variable function">crossGate</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">request</span><span class="token operator">:</span> GateRequest<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token literal-property property">callbacks</span><span class="token operator">:</span> GateCallbacks<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      onSuccess<span class="token punctuation">,</span>
      onFailure <span class="token operator">=</span> handleFailure<span class="token punctuation">,</span>
      onIdle <span class="token operator">=</span> handleIdle<span class="token punctuation">,</span>
      onPending <span class="token operator">=</span> handlePending<span class="token punctuation">,</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> callbacks
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">onPending</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token punctuation">(</span>
        mocked              <span class="token comment">// â¬…ï¸ ëª¨ì˜ ë°ì´í„°ì¸ì§€ í™•ì¸</span>
          <span class="token operator">?</span> <span class="token keyword">await</span> <span class="token function">getMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// â¬…ï¸ ëª¨ì˜ ë°ì´í„° ì‚¬ìš© ë¶€ë¶„</span>
          <span class="token operator">:</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token keyword">as</span> GateResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span>
      onSuccess<span class="token operator">?.</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">,</span> response<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">onFailure</span><span class="token punctuation">(</span>error <span class="token keyword">as</span> GateError<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token function">onIdle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> crossGate <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì´ì œ ì‘ë‹µì€ ëª© ëª¨ë“œê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ì— ë”°ë¼ ì‹¤ì œì¼ ìˆ˜ë„ ê°€ì§œì¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ê¸¸ì— ê°ˆë¦¼ê¸¸ì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤, ë”°ë¼ì„œ useGateMockì˜ LEGO í‘œí˜„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<p><img src="@source/docs/Nextjs/2024-04-05-ReactLikeLEGO/img/ReactLikeLEGO_6.png" alt="LEGO representation"></p>
<p>ì—¬ê¸°ì—ëŠ” ë¹„í–‰ê¸°ë‚˜ ë¹„í–‰ì´ ì—†ìŠµë‹ˆë‹¤: í˜¸ì¶œ ê²°ê³¼ëŠ” ì´ì œ í„°ë„ì— í‘œì‹œëœ ê²ƒì²˜ëŸ¼ ê°€ì§œì…ë‹ˆë‹¤.</p>
<p>LEGO ë¹„ìœ ë¥¼ ì¦ê¸°ì…¨ê¸°ë¥¼ ë°”ëë‹ˆë‹¤. ê°œì„ í•  ì ì´ ìˆë‹¤ë©´ í”¼ë“œë°±ì„ ì£¼ì‹œê³  ë¹„ìŠ·í•œ ê¸°ì‚¬ë¥¼ ë” ì‘ì„±í•˜ë„ë¡ ê²©ë ¤í•´ ì£¼ì…”ì„œ ë¯¸ë””ì—„ì—ì„œ íŒ”ë¡œìš°í•´ ì£¼ì‹­ì‹œì˜¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>
</div></template>
