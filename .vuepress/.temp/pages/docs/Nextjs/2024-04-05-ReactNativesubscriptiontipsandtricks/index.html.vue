<template><div><h1 id="á„‰á…µá„Œá…¡á†¨á„’á…¢á„‡á…©á„Œá…­" tabindex="-1"><a class="header-anchor" href="#á„‰á…µá„Œá…¡á†¨á„’á…¢á„‡á…©á„Œá…­" aria-hidden="true">#</a> ì‹œì‘í•´ë³´ì£ !</h1>
<p>ìš°ì„ , ìš”êµ¬ ì‚¬í•­ì„ ê°œìš”ë¡œ ì‘ì„±í•´ë³¼ê¹Œìš”? ì œí’ˆ íŒ€ì´ ì¸ì•± êµ¬ë… ì¶”ê°€ë¥¼ ìš”ì²­í–ˆë‹¤ê³  ìƒìƒí•´ë³´ì„¸ìš”. ì´ë¯¸ ë¬¸ì œì—†ì´ í•´ê²°ë˜ì—ˆì–´ìš” (ì•„ì£¼ ê°„ë‹¨í•´ìš”). ì´ì œ í•  ì¼ì€ ì•±ì— í˜ì´ì›”ì„ í†µí•©í•˜ëŠ” ê²ƒì´ì£ . í•˜ì§€ë§Œ ê·¸ê²ƒë§Œì´ ì•„ë‹™ë‹ˆë‹¤; ë•Œë¡œëŠ” íŠ¹ì • ê¸°ëŠ¥ì´ í˜ì´ì›”ì— ì˜í•´ ì œí•œë˜ì§€ ì•Šê³  êµ¬ë…ì´ í•„ìš”í•œ ê²½ìš°ê°€ ìˆëŠ”ë°ìš”.</p>
<p>ì´ ë„ì „ ê³¼ì œë¥¼ ì–´ë–»ê²Œ í•´ê²°í• ê¹Œìš”? ê¸°ì´ˆë¶€í„° ì‹œì‘í•´ë³´ì£ . ìš°ë¦¬ëŠ” í•­ìƒ ì‚¬ìš©ìì˜ êµ¬ë… ìƒíƒœì— ëŒ€í•œ ê°€ì¥ ì •í™•í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë„ë¡í•˜ê¸° ìœ„í•´ ì•±ì´ í™œì„± ìƒíƒœì¸ì§€ ë˜ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ ëª©ì ì„ ìœ„í•œ í›„í¬ë¥¼ ë§Œë“¤ì–´ ë´…ì‹œë‹¤:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppState<span class="token punctuation">,</span> AppStateStatus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>

type Props <span class="token operator">=</span> <span class="token punctuation">{</span>
  onActive<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  onBackground<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useAppState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> Props <span class="token operator">|</span> <span class="token keyword">undefined</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> onActive<span class="token punctuation">,</span> onBackground <span class="token punctuation">}</span> <span class="token operator">=</span> props <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> appState <span class="token operator">=</span> React<span class="token punctuation">.</span>useRef<span class="token operator">&lt;</span>AppStateStatus<span class="token operator">></span><span class="token punctuation">(</span>AppState<span class="token punctuation">.</span>currentState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> subscription <span class="token operator">=</span> AppState<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token parameter">nextAppState</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        appState<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">inactive|background</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
        nextAppState <span class="token operator">===</span> <span class="token string">'active'</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ì•±ì´ í™”ë©´ìœ¼ë¡œ ëŒì•„ì™”ì–´ìš”!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        onActive<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        appState<span class="token punctuation">.</span>current <span class="token operator">===</span> <span class="token string">'active'</span> <span class="token operator">&amp;&amp;</span>
        nextAppState<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">inactive|background</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ì•±ì´ ë°±ê·¸ë¼ìš´ë“œë¡œ ì´ë™í–ˆì–´ìš”!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        onBackground<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      appState<span class="token punctuation">.</span>current <span class="token operator">=</span> nextAppState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      subscription<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>onActive<span class="token punctuation">,</span> onBackground<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">state</span><span class="token operator">:</span> appState<span class="token punctuation">.</span>current <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì´ì œ ë°±ì—”ë“œ íŒ€ê³¼ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œê³µë°›ê¸° ìœ„í•´ ëŒ€í™”í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì—”ë“œí¬ì¸íŠ¸ì˜ ì£¼ìš” ëª©ì ì€ ì‚¬ìš©ìê°€ í™œì„± êµ¬ë…ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œê³µí•´ì£¼ë©´ ìš°ë¦¬ëŠ” ëª¨ë“  ì¤€ë¹„ê°€ ëœ ê²ƒì´ë‹ˆ ê³„ì† ì§„í–‰í•  ìˆ˜ ìˆê²Œ ë  ê±°ì—ìš”. (ë˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ê°€ ë°°í¬ë  ë•Œê¹Œì§€ ì‘ë‹µì„ ê°€ì§œë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì–´ìš”).</p>
<p>useAppState í›…ì„ ì¶”ê°€í–ˆê¸° ë•Œë¬¸ì— ì‚¬ìš©ì êµ¬ë… ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì•„ë˜ì™€ ê°™ì€ ê²ƒì„ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”. í•œë²ˆ ì‚´í´ë³´ì„¸ìš”:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFocusEffect<span class="token punctuation">,</span> useNavigation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@react-navigation/native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> storage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@lib/storage'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useAppState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@hooks/useAppState'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useSubscription</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>subscribed<span class="token punctuation">,</span> setSubscribed<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useAppState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">onActive</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// ì‚¬ìš©ìê°€ êµ¬ë… ì¤‘ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.</span>
      <span class="token comment">// ëª‡ ë°€ë¦¬ì´ˆê°€ ì†Œìš”ë˜ëŠ” API í˜¸ì¶œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
      <span class="token comment">// ëª¨ë“  ì•±ì´ ì—´ë¦´ ë•Œë§ˆë‹¤ í™•ì¸ì„ í”¼í•˜ê¸° ìœ„í•´ ì‹œê°„ì„ ì¶”ê°€í•  ìˆ˜ ìˆì–´ìš”.</span>
      <span class="token comment">// ì˜ˆë¥¼ ë“¤ì–´, ì•±ì´ 30ë¶„ ì´ë‚´ì— ì—´ë¦° ê²½ìš° ì´ì „ ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ë„ë¡ ì‹œê°„ì„ ì„¤ì •í•˜ê³  APIë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì„ ìˆ˜ ìˆì–´ìš”.</span>
      <span class="token keyword">const</span> isSubscribed <span class="token operator">=</span> storage<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">'subscribed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setSubscribed</span><span class="token punctuation">(</span>isSubscribed <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      storage<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'subscribed'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> subscribed <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì‚¬ìš©ìê°€ í™œì„± êµ¬ë…ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸í•  ë•Œ, ê·¸ ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ ì €ì¥í•˜ê³  API ê³¼ë¶€í•˜ë¥¼ í”¼í•˜ëŠ” ê²ƒì´ ìœ ìš©í•  ìˆ˜ ìˆì–´ìš”. ì €ëŠ” ì˜ˆì œì—ì„œ MMKVë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°ìš”, AsyncStorageë³´ë‹¤ í›¨ì”¬ ë¹ ë¦…ë‹ˆë‹¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì¢‹ì•„ìš”, ì´ì œ ì•± ìƒíƒœ, API í˜¸ì¶œ ë˜ëŠ” ìºì‹œëœ ë°ì´í„°ë¥¼ í†µí•´ êµ¬ë… ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ë°©ë²•ì„ ê²°ì •í–ˆìœ¼ë‹ˆ, ê³ ì°¨ ì»´í¬ë„ŒíŠ¸(HOC)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ë¶ˆ ë²½ì„ ë§Œë“œëŠ” ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì•„ë˜ ì˜ˆì‹œë¥¼ í™•ì¸í•´ë³´ì„¸ìš”:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">withPaywall</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">Component</span><span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>any<span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> subscribed <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSubscription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useFocusEffect</span><span class="token punctuation">(</span>
    React<span class="token punctuation">.</span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>subscribed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Paywallì„ ë‹«ì€ í›„ ì‚¬ìš©ìê°€ í™ˆìœ¼ë¡œ ëŒì•„ê°€ë„ë¡ í™•ì¸</span>
        navigation<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">'Paywall'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>subscribed<span class="token punctuation">,</span> navigation<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>subscribed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>useEffect ëŒ€ì‹  useFocusEffectë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ê°€ ë­”ì§€ ê¶ê¸ˆí•˜ì‹ ê°€ìš”? ê°„ë‹¨í•©ë‹ˆë‹¤. useEffectëŠ” ì—´ ë•Œë§ˆë‹¤ íŠ¸ë¦¬ê±°ë¥¼ ë³´ì¥í•˜ì§€ ì•Šì§€ë§Œ, useFocusEffectëŠ” í•¨ìˆ˜ê°€ í•­ìƒ í˜¸ì¶œë˜ì–´ ì¼ê´€ëœ ë™ì‘ì„ ë³´ì¥í•©ë‹ˆë‹¤.</p>
<p>HOCê°€ ë¬´ì—‡ì´ë©° ì–´ë–»ê²Œ ì‚¬ìš©ë˜ëŠ”ì§€ ì˜ ëª¨ë¥´ê² ë‹¤ë©´, ì•„ë˜ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì„¸ìš”. ê·¸ëŸ¬ë©´ ì´í•´í•˜ì‹¤ ê±°ì˜ˆìš”.```</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Text<span class="token punctuation">,</span> View <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> withPaywall <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@hooks/useSubscription'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> MyScreen <span class="token operator">=</span> <span class="token function">withPaywall</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>View<span class="token operator">></span>
      <span class="token operator">&lt;</span>Text<span class="token operator">></span>MyScreen<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì—„ì²­ ê°„ë‹¨í•˜ì£ ? ì´ì œ ì‚¬ìš©ìê°€ êµ¬ë…ì´ í•„ìš”í•œ í™”ë©´ìœ¼ë¡œ ì´ë™í•  ë•Œë§ˆë‹¤ ìš°ë¦¬ëŠ” ì‚¬ìš©ìë¥¼ í˜ì´ì›” í™”ë©´ìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤. ë˜í•œ ì‚¬ìš©ìê°€ í˜ì´ì›” í™”ë©´ì„ ë‹«ì§€ ëª»í•˜ë„ë¡ í•˜ê³ , ë‹«ìœ¼ë©´ í™ˆ í™”ë©´ìœ¼ë¡œ ë¦¬ë””ë ‰íŠ¸ë˜ì–´ í˜ì´ì›” ë’¤ì˜ í™”ë©´ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ìš°ë¦¬ì˜ ì´ˆê¸° ìš”êµ¬ ì‚¬í•­ì„ ê¸°ì–µí•˜ì„¸ìš”? ì‚¬ìš©ìê°€ í™œì„± êµ¬ë…ì´ ì—†ëŠ” ê²½ìš° ì¼ë¶€ êµ¬ì„± ìš”ì†Œì— ì•¡ì„¸ìŠ¤ ì œí•œì„ ë‘ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ ëª©ì ì„ ìœ„í•´ ë¹„ìŠ·í•œ ì ‘ê·¼ ë°©ì‹ì„ ì±„ìš©í•˜ê² ìŠµë‹ˆë‹¤.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFocusEffect<span class="token punctuation">,</span> useNavigation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@react-navigation/native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> storage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@lib/storage'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useAppState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@hooks/useAppState'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">withSubscription</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">Component</span><span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>any<span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> subscribed <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSubscription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>subscribed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View<span class="token operator">></span>
        <span class="token operator">&lt;</span>Text<span class="token operator">></span>Subscription based<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ìš°ë¦¬ëŠ” ë§ˆì°¬ê°€ì§€ë¡œ ê±°ì˜ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> withSubscription <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@hooks/useSubscription'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">withSubscription</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Text<span class="token operator">></span>MyScreen<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">MyScreen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>View<span class="token operator">></span>
      <span class="token operator">&lt;</span>MyComponent <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ë‹¹ì‹ ì´ ìƒê°í•˜ëŠ” ê²ƒì„ ì•Œì•„ìš”. ì™œ ë‹¨ìˆœí•œ ì»´í¬ë„ŒíŠ¸ ë˜í¼ ëŒ€ì‹  HOCë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê±°ì£ ? ì•Œê² ì–´ìš”, ë‹¹ì‹ ì˜ ë°©ë²•ëŒ€ë¡œ ê°€ë³¼ê²Œìš”.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFocusEffect<span class="token punctuation">,</span> useNavigation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@react-navigation/native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> storage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@lib/storage'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useAppState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@hooks/useAppState'</span><span class="token punctuation">;</span>

type WithSubscriptionProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">children</span><span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">WithSubscription</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> WithSubscriptionProps</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> children <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> subscribed <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSubscription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>subscribed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">'relative'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>View
          style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token literal-property property">justifyContent</span><span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">alignItems</span><span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">'absolute'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">'rgba(0, 0, 0, 0.2)'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>Text<span class="token operator">></span>Subscription based<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">></span>
        <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0.1</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>í–‰ë³µí•˜ì‹ ê°€ìš”? ê·¸ë ‡ë‹¤ë©´ ê³µìœ í•˜ê³  ëŒ“ê¸€ì„ ë‚¨ê²¨ ì£¼ì„¸ìš”!</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> WithSubscription <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@hooks/useSubscription'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">MyScreen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>View<span class="token operator">></span>
      <span class="token operator">&lt;</span>WithSubscription<span class="token operator">></span>
        <span class="token operator">&lt;</span>Text<span class="token operator">></span>MyScreen<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>WithSubscription<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ë” ë§ì€ React, Next.js, React Native ì½˜í…ì¸ ë¥¼ ê¸°ëŒ€í•´ ì£¼ì„¸ìš”. ê³§ Golangë„ ì†Œê°œí•  ì˜ˆì •ì´ì—ìš”. (ì†”ì§íˆ ë§í•˜ë©´, Node.jsì— ì¡°ê¸ˆ ì§€ì³ ìˆì–´ìš”.)</p>
<img src="@source/docs/Nextjs/2024-04-05-ReactNativesubscriptiontipsandtricks/img/ReactNativesubscriptiontipsandtricks_0.png" />
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ğŸ‘‹</p>
</div></template>
