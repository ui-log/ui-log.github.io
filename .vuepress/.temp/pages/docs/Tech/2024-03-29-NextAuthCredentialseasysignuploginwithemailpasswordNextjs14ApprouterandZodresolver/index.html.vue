<template><div><p>NEXTAUTH ë° ZOD ì†Œê°œ</p>
<p>NextAuth.jsëŠ” Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë§ê²Œ ì œì‘ëœ ê²¬ê³ í•œ ì˜¤í”ˆ ì†ŒìŠ¤ ì¸ì¦ ì†”ë£¨ì…˜ìœ¼ë¡œ, Next.js ë° ì„œë²„ë¦¬ìŠ¤ í™˜ê²½ê³¼ ì™„ë²½í•˜ê²Œ í†µí•©ë©ë‹ˆë‹¤. ì´ëŠ” ì´ë©”ì¼ ë° ë¬´ì•”í˜¸ ë¡œê·¸ì¸ì„ í¬í•¨í•œ ë‹¤ì–‘í•œ ì¸ì¦ ì˜µì…˜ì„ ì§€ì›í•˜ì—¬ ê°œë°œìì—ê²Œ ë‹¤ì¬ë‹¤ëŠ¥í•œ ì„ íƒì§€ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Clerkì™€ ê°™ì€ ì†”ë£¨ì…˜ì— ë¹„í•´ êµ¬ì„±ì— ì¡°ê¸ˆ ë” ë…¸ë ¥ì´ í•„ìš”í•˜ì§€ë§Œ, ë°ì´í„° ê´€ë¦¬ì— ëŒ€í•œ íƒì›”í•œ ì œì–´ì™€ ë¹„êµí•  ìˆ˜ ì—†ëŠ” ìœ ì—°ì„±ì„ ì œê³µí•˜ë©° ì¶”ê°€ ë¹„ìš©ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë°±ì—”ë“œ ì‹œìŠ¤í…œ(ì˜ˆ: Active Directory, LDAP)ê³¼ í˜¸í™˜ë˜ëŠ” NextAuth.jsì˜ ì¢…í•©ì  ì¸ì¦ ê¸°ëŠ¥ ì™¸ì—ë„, JSON Web Tokens ë° ë°ì´í„°ë² ì´ìŠ¤ ì„¸ì…˜ê³¼ í˜¸í™˜ë©ë‹ˆë‹¤.</p>
<p>ê·¸ê²ƒì˜ í¼ ì²˜ë¦¬ ëŠ¥ë ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ì£¼ëª©í• ë§Œí•œ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ëŠ” TypeScript-first ìŠ¤í‚¤ë§ˆ ì„ ì–¸ ë° ìœ íš¨ì„± ê²€ì‚¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ Zodê³¼ì˜ í†µí•©ì…ë‹ˆë‹¤. Zodë¥¼ react-hook-formê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬, ê°œë°œìëŠ” í¼ ë°ì´í„°ì— ê°•ë ¥í•œ ìœ í˜• ì§€ì • ë° ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì†ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì¡°í•©ì€ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•˜ê³  Zodì˜ ìŠ¤í‚¤ë§ˆ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í™œìš©í•˜ì—¬ ì˜¤ë¥˜ë¥¼ ì¡°ê¸°ì— ê°ì§€í•˜ê³  ìœ íš¨í•œ ë°ì´í„°ë§Œ ì²˜ë¦¬ë˜ë„ë¡ ë³´ì¥í•¨ìœ¼ë¡œì¨ ë°ì´í„° ë¬´ê²°ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚¤ê³  ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>NextAuth.jsë¥¼ í˜„ëŒ€ì ì¸ Full Stack Next.js ì•± êµ¬ì„±ê³¼ í•¨ê»˜ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•´ ë“œë¦´ê²Œìš”. (ì•± ë¼ìš°í„° ì‚¬ìš©, TailwindCSS ë° shadcnìœ¼ë¡œ êµ¬ë™)</p>
<p>ì—¬ê¸°ì— ì €ì¥ì†Œë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>
<p><img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_0.png" alt="ì´ë¯¸ì§€"></p>
<p>ì†Œê°œ</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì´ë¯¸ Next.js í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ê³  GitHubì— í‘¸ì‹œí–ˆë‹¤ê³  ê°€ì •í•˜ê³ , ë‹¤ìŒ ë‹¨ê³„ëŠ” Vercelì—ì„œ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì§ì ‘ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.</p>
<p>1 â€” Storageë¥¼ í´ë¦­í•œ ë‹¤ìŒ ë°ì´í„°ë²¤ìŠ¤ ìƒì„± ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</p>
<p><img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_1.png" alt="ì´ë¯¸ì§€"></p>
<p>2- ê·¸ëŸ° ë‹¤ìŒ Postgres Serverless SQLì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p><img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_2.png" alt="ì´ë¯¸ì§€"></p>
<p>3 â€” ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„ì„ ì¶”ê°€í•˜ê³  ë§Œë“¤ê¸°ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.</p>
<p><img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_3.png" alt="ì´ë¯¸ì§€"></p>
<p>4 â€” ê·¸ë¦¬ê³  ìƒˆë¡œ ë§Œë“  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í”„ë¡œì íŠ¸ì— ì—°ê²°í•©ë‹ˆë‹¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_4.png" />
<p>ë² ë¥´ì²¼ CLIë¥¼ ì„¤ì¹˜í–ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>npm i <span class="token operator">-</span>g vercel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>5 - ê·¸ëŸ° ë‹¤ìŒ í”„ë¡œì íŠ¸ë¥¼ í™˜ê²½ì˜ í¬ìŠ¤íŠ¸ê·¸ë ˆìŠ¤ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ê²°í•˜ì„¸ìš”(3ê°€ì§€ ì§ˆë¬¸ì´ ë‚˜ì˜¬ ê²ƒì…ë‹ˆë‹¤):</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>vercel link
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>6 â€” ì´ì œ Vercelì—ì„œ Postgresë¥¼ ì„¤ì •í•˜ëŠ” ë™ì•ˆ ë§Œë“  ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ë¥¼ ë³µì œí•˜ë ¤ê³  í•©ë‹ˆë‹¤.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>vercel env pull <span class="token punctuation">.</span>env<span class="token punctuation">.</span>development<span class="token punctuation">.</span>local
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>.env.development.local íŒŒì¼ì´ í•„ìš”í•œ ëª¨ë“  ìê²© ì¦ëª…ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆì„ ê±°ì—ìš”.ğŸš€</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>í™”ë©´ ìƒ·ì„ ì°¸ê³ í•´ì„œ &quot;VERCEL=&quot;1&quot;&quot; ë¥¼ ì£¼ì„ ì²˜ë¦¬í•˜ëŠ” ê±¸ ì œì•ˆë“œë¦½ë‹ˆë‹¤. ìš°ë¦¬ê°€ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ì‘ì—…í•  ë•Œ httpsë¥¼ ê°•ì œë¡œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì–´ì„œìš”.</p>
<p><img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_5.png" alt="í™”ë©´ ìƒ·"></p>
<p>í•„ìš”í•œ ëª¨ë“ˆ ì„¤ì •</p>
<p>ì»´í¬ë„ŒíŠ¸ ë¹Œë“œ ì†ë„ë¥¼ ë¹ ë¥´ê²Œ í•˜ê¸° ìœ„í•´ Shadcnì„ ì‚¬ìš©í•˜ê³  ìˆì–´ìš”.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>npm i bcrypt next<span class="token operator">-</span>auth
npm i <span class="token operator">--</span>save<span class="token operator">-</span>dev @types<span class="token operator">/</span>bcrypt
npm i @vercel<span class="token operator">/</span>postgres
npx shadcn<span class="token operator">-</span>ui@latest init
npx shadcn<span class="token operator">-</span>ui@latest add form
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì•± ë””ë ‰í† ë¦¬ ì„¤ì •ê³¼ ë¡œì§ ì„¤ì •í•˜ê¸°</p>
<p>íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ì¤€ë¹„í•´ë´…ì‹œë‹¤.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token operator">></span>app
 <span class="token operator">></span>login
   form<span class="token punctuation">.</span>tsx
   page<span class="token punctuation">.</span>tsx
 <span class="token operator">></span>register
   form<span class="token punctuation">.</span>tsx
   page<span class="token punctuation">.</span>tsx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ê·¸ë¦¬ê³  NextAuthë¥¼ ìœ„í•œ API í´ë” êµ¬ì¡°</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token operator">></span>app
  <span class="token operator">></span>api
    <span class="token operator">></span>auth
      <span class="token operator">></span><span class="token punctuation">[</span><span class="token operator">...</span>nextauth<span class="token punctuation">]</span>
        route<span class="token punctuation">.</span>ts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>NEXT AUTH ë¬¸ì„œ ìì„¸íˆ ì‚´í´ë³´ê¸°</p>
<p>Credentials ì œê³µìë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ì ì´ë¦„ ë° ì•”í˜¸, ë„ë©”ì¸ ë˜ëŠ” ì´ì¤‘ ì¸ì¦ ë˜ëŠ” í•˜ë“œì›¨ì–´ ì¥ì¹˜(ì˜ˆ: Yubikey U2F/FIDO)ì™€ ê°™ì€ ì„ì˜ ìê²© ì¦ëª…ìœ¼ë¡œ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>1 â€” ë¬¸ì„œì— ë”°ë¼ api/auth/[...nextauth] ë‚´ì˜ route.tsë¥¼ ì¤€ë¹„í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì§€ê¸ˆì€ ê¶Œí•œ ë¶€ì—¬ ë¡œì§ì„ ì œê±°í–ˆì–´ìš”.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// app>api>auth>[...nextauth]>route.ts</span>

<span class="token keyword">import</span> NextAuth <span class="token keyword">from</span> <span class="token string">"next-auth/next"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> CredentialsProvider <span class="token keyword">from</span> <span class="token string">"next-auth/providers/credentials"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@vercel/postgres"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> compare <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"bcrypt"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token function">NextAuth</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">session</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">strategy</span><span class="token operator">:</span> <span class="token string">"jwt"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">pages</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">signIn</span><span class="token operator">:</span> <span class="token string">"/login"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">providers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">CredentialsProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// The name to display on the sign in form (e.g. 'Sign in with...')</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Credentials"</span><span class="token punctuation">,</span>
      <span class="token comment">// The credentials is used to generate a suitable form on the sign in page.</span>
      <span class="token comment">// You can specify whatever fields you are expecting to be submitted.</span>
      <span class="token comment">// e.g. domain, username, password, 2FA token, etc.</span>
      <span class="token comment">// You can pass any HTML attribute to the &lt;input> tag through the object.</span>
      <span class="token literal-property property">credentials</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">authorize</span><span class="token punctuation">(</span><span class="token parameter">credentials<span class="token punctuation">,</span> req</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> handler <span class="token keyword">as</span> <span class="token constant">GET</span><span class="token punctuation">,</span> handler <span class="token keyword">as</span> <span class="token constant">POST</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2 â€” ë˜í•œ, Zodë¡œ ìœ íš¨ì„± ê²€ì‚¬ëœ ì–‘ì‹ì—ì„œ ê°’ì´ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬ë˜ëŠ”ì§€ í™•ì¸í•˜ë„ë¡ api/auth/register/route.tsë¥¼ ì¤€ë¹„í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// app>api>auth>register>route.ts</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> NextResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/server"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">POST</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">request</span><span class="token operator">:</span> Request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ì—¬ê¸°ì— ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì¶”ê°€í•˜ë©´ ì¢‹ì„ ìˆ˜ ìˆì–´ìš”</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> e <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"success"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>3 â€” ë¨¼ì € ë“±ë¡ìš© í”„ë¡ íŠ¸ì—”ë“œë¥¼ ì¤€ë¹„í•´ ë´…ì‹œë‹¤:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getServerSession <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next-auth"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/navigation"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> FormPage <span class="token keyword">from</span> <span class="token string">"./form"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">RegisterPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getServerSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>section className<span class="token operator">=</span><span class="token string">"bg-black h-screen flex items-center justify-center"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"w-[600px]"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>FormPage <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4 â€” ê·¸ë¦¬ê³  FormPage ìì²´ (react-hook-form ë° zod ê²€ì¦ì„ ì‚¬ìš©í•˜ì—¬)</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token string">"use client"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> zodResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@hookform/resolvers/zod"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-hook-form"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> z <span class="token keyword">from</span> <span class="token string">"zod"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/components/ui/button"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  Form<span class="token punctuation">,</span>
  FormControl<span class="token punctuation">,</span>
  FormDescription<span class="token punctuation">,</span>
  FormField<span class="token punctuation">,</span>
  FormItem<span class="token punctuation">,</span>
  FormLabel<span class="token punctuation">,</span>
  FormMessage<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/components/ui/form"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/components/ui/input"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> toast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/components/ui/use-toast"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> FormSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">username</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"ì‚¬ìš©ì ì´ë¦„ì€ ì ì–´ë„ 2ìì—¬ì•¼ í•©ë‹ˆë‹¤."</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"ë¹„ë°€ë²ˆí˜¸ëŠ” ì ì–´ë„ 6ìì—¬ì•¼ í•©ë‹ˆë‹¤."</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

type FormData <span class="token operator">=</span> z<span class="token punctuation">.</span>infer<span class="token operator">&lt;</span><span class="token keyword">typeof</span> FormSchema<span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">FormPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">resolver</span><span class="token operator">:</span> <span class="token function">zodResolver</span><span class="token punctuation">(</span>FormSchema<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultValues</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> FormData</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"ì–‘ì‹ ì œì¶œ ì¤‘"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">username</span><span class="token operator">:</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"/api/auth/register"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">"Content-Type"</span><span class="token operator">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"ë„¤íŠ¸ì›Œí¬ ì‘ë‹µì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// ì—¬ê¸°ì„œ ì‘ë‹µ ì²˜ë¦¬</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"ë“±ë¡ ì„±ê³µ"</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"ë“±ë¡ ì„±ê³µ"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"ë“±ë¡ ì‹¤íŒ¨:"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"ë“±ë¡ ì‹¤íŒ¨"</span><span class="token punctuation">,</span> <span class="token literal-property property">description</span><span class="token operator">:</span> error<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Form <span class="token punctuation">{</span><span class="token operator">...</span>form<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">"w-2/3 space-y-6"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>FormField
          control<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>control<span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"username"</span>
          render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> field <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>FormItem<span class="token operator">></span>
              <span class="token operator">&lt;</span>FormLabel<span class="token operator">></span>ì‚¬ìš©ì ì´ë¦„<span class="token operator">&lt;</span><span class="token operator">/</span>FormLabel<span class="token operator">></span>
              <span class="token operator">&lt;</span>FormControl<span class="token operator">></span>
                <span class="token operator">&lt;</span>Input placeholder<span class="token operator">=</span><span class="token string">"ì‚¬ìš©ì ì´ë¦„"</span> <span class="token punctuation">{</span><span class="token operator">...</span>field<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>FormControl<span class="token operator">></span>
              <span class="token operator">&lt;</span>FormDescription<span class="token operator">></span>
                ì´ê²ƒì€ ê³µê°œì ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤<span class="token punctuation">.</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>FormDescription<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>FormItem<span class="token operator">></span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>FormField
          control<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>control<span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"password"</span>
          render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> field <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>FormItem<span class="token operator">></span>
              <span class="token operator">&lt;</span>FormLabel<span class="token operator">></span>ë¹„ë°€ë²ˆí˜¸<span class="token operator">&lt;</span><span class="token operator">/</span>FormLabel<span class="token operator">></span>
              <span class="token operator">&lt;</span>FormControl<span class="token operator">></span>
                <span class="token operator">&lt;</span>Input placeholder<span class="token operator">=</span><span class="token string">"ë¹„ë°€ë²ˆí˜¸"</span> <span class="token punctuation">{</span><span class="token operator">...</span>field<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">"password"</span> <span class="token operator">/</span><span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>FormControl<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>FormItem<span class="token operator">></span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span>ì œì¶œ<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>FormPageì˜ ìƒí˜¸ ì‘ìš©ì„± ë•Œë¬¸ì—, &quot;use client&quot; ì§€ì‹œë¬¸ì´ ìœ„ì— ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>onSubmit async í•¨ìˆ˜ì— ì£¼ëª©í•´ì£¼ì„¸ìš”. ì—¬ê¸°ì„œëŠ” í¼ ë°ì´í„° (ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸)ë¥¼ /api/auth/registerë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> FormData</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"í¼ ì œì¶œ ì¤‘"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">username</span><span class="token operator">:</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"/api/auth/register"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">"Content-Type"</span><span class="token operator">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"ë„¤íŠ¸ì›Œí¬ ì‘ë‹µì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// ì—¬ê¸°ì„œ ì‘ë‹µ ì²˜ë¦¬</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"ë“±ë¡ ì„±ê³µ"</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"ë“±ë¡ ì„±ê³µ"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"ë“±ë¡ ì‹¤íŒ¨:"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"ë“±ë¡ ì‹¤íŒ¨"</span><span class="token punctuation">,</span> <span class="token literal-property property">description</span><span class="token operator">:</span> error<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ë”°ë¼ì„œ ì´ ë‹¨ê³„ì—ì„œ /register í˜ì´ì§€ë¥¼ ë°©ë¬¸í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤:</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p><img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_6.png" alt="ì´ë¯¸ì§€"></p>
<p>ê·¸ë¦¬ê³ , ì½˜ì†”ì—ì„œ ì‚½ì…ëœ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:</p>
<p><img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_7.png" alt="ì´ë¯¸ì§€"></p>
<p>ë°ì´í„°ë² ì´ìŠ¤ ì¤€ë¹„</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì €í¬ëŠ” ì´ ë‹¨ê³„ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì‚¬ìš©ì í…Œì´ë¸”ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<p><img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_8.png" alt="ì´ë¯¸ì§€"></p>
<p>ì´ì œ <code v-pre>api/auth/register/route.ts</code> ë‚´ì—ì„œ ë¹„ë°€ë²ˆí˜¸ í•´ì‹±ì„ í¬í•¨í•œ ë“±ë¡ ë¡œì§ì„ í†µí•©í•´ ë³´ê² ìŠµë‹ˆë‹¤:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NextResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/server"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> hash <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"bcrypt"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@vercel/postgres"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">POST</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">request</span><span class="token operator">:</span> Request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ì—¬ê¸°ì— ì¼ë¶€ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> hashedPassword <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">hash</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> response <span class="token operator">=</span>
      <span class="token keyword">await</span> sql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">INSERT INTO users (email, password) VALUES (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>email<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hashedPassword<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> e <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"success"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ì´ì œ, ë“±ë¡ì„ ì²˜ë¦¬í•œ í›„ì—ëŠ” Postgres dbì— ë“±ë¡ëœ ê³ ê°ì„ ë³¼ ìˆ˜ ìˆì–´ì•¼í•©ë‹ˆë‹¤:</p>
<p><img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_9.png" alt="image"></p>
<p>í° ì„±ê³¼ â€” NEXT.JS í”„ë¡ íŠ¸ì—”ë“œì—ì„œ POSTGRES DBë¡œì˜ ë“±ë¡ì´ ì˜ˆìƒëŒ€ë¡œ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤ ğŸ˜ƒ</p>
<p>ë¡œê·¸ì¸ ê¸°ëŠ¥ì´ ì´ì œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ë¡œê·¸ì¸ í˜ì´ì§€ì— ëŒ€í•œ ë‚˜ì˜ ì½”ë“œì…ë‹ˆë‹¤:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// >app>login>page.tsx</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> getServerSession <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next-auth"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/navigation"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> LoginForm <span class="token keyword">from</span> <span class="token string">"./form"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">LoginPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getServerSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> session <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>section className<span class="token operator">=</span><span class="token string">"bg-black h-screen flex items-center justify-center"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"w-[600px]"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>LoginForm <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ê·¸ë¦¬ê³ , LoginForm ì»´í¬ë„ŒíŠ¸:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token string">"use client"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> signIn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next-auth/react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/navigation"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> zodResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@hookform/resolvers/zod"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-hook-form"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> z <span class="token keyword">from</span> <span class="token string">"zod"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/components/ui/button"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  Form<span class="token punctuation">,</span>
  FormControl<span class="token punctuation">,</span>
  FormDescription<span class="token punctuation">,</span>
  FormField<span class="token punctuation">,</span>
  FormItem<span class="token punctuation">,</span>
  FormLabel<span class="token punctuation">,</span>
  FormMessage<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/components/ui/form"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/components/ui/input"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> toast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/components/ui/use-toast"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> FormSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">email</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë©”ì¼ ì£¼ì†Œì…ë‹ˆë‹¤."</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

type FormData <span class="token operator">=</span> z<span class="token punctuation">.</span>infer<span class="token operator">&lt;</span><span class="token keyword">typeof</span> FormSchema<span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">LoginForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">resolver</span><span class="token operator">:</span> <span class="token function">zodResolver</span><span class="token punctuation">(</span>FormSchema<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defaultValues</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> FormData</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"ì–‘ì‹ ì œì¶œ ì¤‘"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token literal-property property">response</span><span class="token operator">:</span> any <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">signIn</span><span class="token punctuation">(</span><span class="token string">"credentials"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        email<span class="token punctuation">,</span>
        password<span class="token punctuation">,</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> response <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token operator">?.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        router<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"ë„¤íŠ¸ì›Œí¬ ì‘ë‹µì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// ì—¬ê¸°ì„œ ì‘ë‹µ ì²˜ë¦¬</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"ë¡œê·¸ì¸ ì„±ê³µ"</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"ë¡œê·¸ì¸ ì„±ê³µ"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"ë¡œê·¸ì¸ ì‹¤íŒ¨:"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"ë¡œê·¸ì¸ ì‹¤íŒ¨"</span><span class="token punctuation">,</span> <span class="token literal-property property">description</span><span class="token operator">:</span> error<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Form <span class="token punctuation">{</span><span class="token operator">...</span>form<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">"w-2/3 space-y-6"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>form
        onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span>
        className<span class="token operator">=</span><span class="token string">"text-white p-4 md:p-16 border-[1.5px] rounded-lg border-gray-300 flex flex-col items-center justify-center gap-y-6"</span>
      <span class="token operator">></span>
        <span class="token operator">&lt;</span>FormField
          control<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>control<span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"email"</span>
          render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> field <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>FormItem<span class="token operator">></span>
              <span class="token operator">&lt;</span>FormLabel<span class="token operator">></span>ì´ë©”ì¼ ì…ë ¥<span class="token operator">&lt;</span><span class="token operator">/</span>FormLabel<span class="token operator">></span>
              <span class="token operator">&lt;</span>FormControl<span class="token operator">></span>
                <span class="token operator">&lt;</span>Input
                  className<span class="token operator">=</span><span class="token string">"text-black"</span>
                  placeholder<span class="token operator">=</span><span class="token string">"ì´ë©”ì¼ ì…ë ¥"</span>
                  <span class="token punctuation">{</span><span class="token operator">...</span>field<span class="token punctuation">}</span>
                  type<span class="token operator">=</span><span class="token string">"text"</span>
                <span class="token operator">/</span><span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>FormControl<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>FormItem<span class="token operator">></span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>FormField
          control<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>control<span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"password"</span>
          render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> field <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>FormItem<span class="token operator">></span>
              <span class="token operator">&lt;</span>FormLabel<span class="token operator">></span>ë¹„ë°€ë²ˆí˜¸ ì…ë ¥<span class="token operator">&lt;</span><span class="token operator">/</span>FormLabel<span class="token operator">></span>
              <span class="token operator">&lt;</span>FormControl<span class="token operator">></span>
                <span class="token operator">&lt;</span>Input
                  className<span class="token operator">=</span><span class="token string">"text-black"</span>
                  placeholder<span class="token operator">=</span><span class="token string">"ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"</span>
                  <span class="token punctuation">{</span><span class="token operator">...</span>field<span class="token punctuation">}</span>
                  type<span class="token operator">=</span><span class="token string">"password"</span>
                <span class="token operator">/</span><span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>FormControl<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>FormItem<span class="token operator">></span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>Button
          type<span class="token operator">=</span><span class="token string">"submit"</span>
          className<span class="token operator">=</span><span class="token string">"hover:scale-110 hover:bg-cyan-700"</span>
          disabled<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>formState<span class="token punctuation">.</span>isSubmitting<span class="token punctuation">}</span>
        <span class="token operator">></span>
          <span class="token punctuation">{</span>form<span class="token punctuation">.</span>formState<span class="token punctuation">.</span>isSubmitting <span class="token operator">?</span> <span class="token string">"ì—´ê³  ìˆìŠµë‹ˆë‹¤...."</span> <span class="token operator">:</span> <span class="token string">"ì•ˆë…•í•˜ì„¸ìš”!"</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ìœ„ì— ì œê³µëœ ì½”ë“œë¥¼ ì½˜ì†”ì— ì •í™•íˆ í‘œì‹œí•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œí•´ì•¼ í•©ë‹ˆë‹¤:</p>
<p><img src="@source/docs/Tech/2024-03-29-NextAuthCredentialseasysignuploginwithemailpasswordNextjs14ApprouterandZodresolver/img/NextAuthCredentialseasysignup-loginwithemail-passwordNextjs14ApprouterandZodresolver_10.png" alt="email and password"></p>
<p>ì´ì œ ê¶Œí•œ ë¶€ì—¬ ë…¼ë¦¬ë¥¼ êµ¬í˜„í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ì´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©ìë¥¼ ê°€ì ¸ì™€ì„œ ë¹„ë°€ë²ˆí˜¸ì˜ í•´ì‹œê°’ì„ ë¹„êµí•´ ì œê³µëœ ìê²© ì¦ëª…ê³¼ ë¹„êµí•˜ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” ì¼ë°˜ SQL ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•  ê²ƒì´ì§€ë§Œ, ì´ ì ‘ê·¼ ë°©ì‹ê³¼ ê´€ë ¨ëœ ë‹¤ì–‘í•œ ì´ì ê³¼ ë‹¨ì ì„ ì¸ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> NextAuth <span class="token keyword">from</span> <span class="token string">"next-auth/next"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> CredentialsProvider <span class="token keyword">from</span> <span class="token string">"next-auth/providers/credentials"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@vercel/postgres"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> compare <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"bcrypt"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token function">NextAuth</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">session</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">strategy</span><span class="token operator">:</span> <span class="token string">"jwt"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">pages</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">signIn</span><span class="token operator">:</span> <span class="token string">"/login"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">providers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">CredentialsProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// The name to display on the sign in form (e.g. 'Sign in with...')</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Credentials"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">credentials</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">authorize</span><span class="token punctuation">(</span><span class="token parameter">credentials<span class="token punctuation">,</span> req</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> sql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
          SELECT * FROM users WHERE email=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>credentials<span class="token operator">?.</span>email<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> user <span class="token operator">=</span> response<span class="token punctuation">.</span>rows<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> passwordCorrect <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">compare</span><span class="token punctuation">(</span>
          credentials<span class="token operator">?.</span>password <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">,</span>
          user<span class="token punctuation">.</span>password
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>passwordCorrect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> user<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
            <span class="token literal-property property">email</span><span class="token operator">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"credentials"</span><span class="token punctuation">,</span> credentials<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> handler <span class="token keyword">as</span> <span class="token constant">GET</span><span class="token punctuation">,</span> handler <span class="token keyword">as</span> <span class="token constant">POST</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<p>ë˜í•œ .env íŒŒì¼ì— NEXTAUTH_URLê³¼ NEXTAUTH_SECRETì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. í„°ë¯¸ë„ì—ì„œ openssl rand -base64 32ë¥¼ ì‹¤í–‰í•˜ì—¬ ì•ˆì „í•œ NEXTAUTH_SECRET ê°’ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token constant">NEXTAUTH_URL</span><span class="token operator">=</span><span class="token string">"http://localhost:3000"</span>
<span class="token constant">NEXTAUTH_SECRET</span><span class="token operator">=</span>password
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ì œí•œëœ í˜ì´ì§€ êµ¬ì„±</p>
<p>í˜ì´ì§€ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ì œì–´ë¥¼ ê°•í™”í•˜ë ¤ë©´ Next.js í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— middleware.ts íŒŒì¼ì„ ìƒì„±í•˜ì‹­ì‹œì˜¤.</p>
<!-- ui-log ìˆ˜í‰í˜• -->
<p><ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-4877378276818686"
  data-ad-slot="9743150776"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins></p>
<component is="script">
(adsbygoogle = window.adsbygoogle || []).push({});
</component>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next-auth/middleware"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ì›í•˜ëŠ” ê²½ë¡œë¥¼ ì§€ì •í•©ë‹ˆë‹¤.</span>
  <span class="token literal-property property">matcher</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"/"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì´ ì„¤ì •ìœ¼ë¡œ ê·€í•˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ íŠ¹ì • í˜ì´ì§€ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œí•œí•˜ë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ëŠ” [...nextauth].ts êµ¬ì„±ì—ì„œ ì •ì˜ëœ JWT ì „ëµê³¼ ë¦¬ë””ë ‰ì…˜ ì •ì±…ê³¼ ë§¤ë„ëŸ½ê²Œ ì‘ë™í•©ë‹ˆë‹¤.</p>
<p>ì½”ë”© ì¦ê¸°ì„¸ìš” ğŸ˜ƒ</p>
<p>Piotr</p>
</div></template>
