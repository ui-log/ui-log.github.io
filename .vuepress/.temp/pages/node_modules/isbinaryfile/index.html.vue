<template><div><h1 id="isbinaryfile" tabindex="-1"><a class="header-anchor" href="#isbinaryfile" aria-hidden="true">#</a> isBinaryFile</h1>
<p>Detects if a file is binary in Node.js using ✨promises✨. Similar to <a href="http://stackoverflow.com/questions/899206/how-does-perl-know-a-file-is-binary" target="_blank" rel="noopener noreferrer">Perl's <code v-pre>-B</code> switch<ExternalLinkIcon/></a>, in that:</p>
<ul>
<li>it reads the first few thousand bytes of a file</li>
<li>checks for a <code v-pre>null</code> byte; if it's found, it's binary</li>
<li>flags non-ASCII characters. After a certain number of &quot;weird&quot; characters, the file is flagged as binary</li>
</ul>
<p>Much of the logic is pretty much ported from <a href="https://github.com/ggreer/the_silver_searcher" target="_blank" rel="noopener noreferrer">ag<ExternalLinkIcon/></a>.</p>
<p>Note: if the file doesn't exist or is a directory, an error is thrown.</p>
<h2 id="installation" tabindex="-1"><a class="header-anchor" href="#installation" aria-hidden="true">#</a> Installation</h2>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>npm install isbinaryfile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h2>
<p>Returns <code v-pre>Promise&lt;boolean&gt;</code> (or just <code v-pre>boolean</code> for <code v-pre>*Sync</code>). <code v-pre>true</code> if the file is binary, <code v-pre>false</code> otherwise.</p>
<h3 id="isbinaryfile-filepath" tabindex="-1"><a class="header-anchor" href="#isbinaryfile-filepath" aria-hidden="true">#</a> isBinaryFile(filepath)</h3>
<ul>
<li><code v-pre>filepath</code> -  a <code v-pre>string</code> indicating the path to the file.</li>
</ul>
<h3 id="isbinaryfile-bytes-size" tabindex="-1"><a class="header-anchor" href="#isbinaryfile-bytes-size" aria-hidden="true">#</a> isBinaryFile(bytes[, size])</h3>
<ul>
<li><code v-pre>bytes</code> - a <code v-pre>Buffer</code> of the file's contents.</li>
<li><code v-pre>size</code> - an optional <code v-pre>number</code> indicating the file size.</li>
</ul>
<h3 id="isbinaryfilesync-filepath" tabindex="-1"><a class="header-anchor" href="#isbinaryfilesync-filepath" aria-hidden="true">#</a> isBinaryFileSync(filepath)</h3>
<ul>
<li><code v-pre>filepath</code> - a <code v-pre>string</code> indicating the path to the file.</li>
</ul>
<h3 id="isbinaryfilesync-bytes-size" tabindex="-1"><a class="header-anchor" href="#isbinaryfilesync-bytes-size" aria-hidden="true">#</a> isBinaryFileSync(bytes[, size])</h3>
<ul>
<li><code v-pre>bytes</code> - a <code v-pre>Buffer</code> of the file's contents.</li>
<li><code v-pre>size</code> - an optional <code v-pre>number</code> indicating the file size.</li>
</ul>
<h3 id="examples" tabindex="-1"><a class="header-anchor" href="#examples" aria-hidden="true">#</a> Examples</h3>
<p>Here's an arbitrary usage:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> isBinaryFile <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"isbinaryfile"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isBinaryFile<span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> filename <span class="token operator">=</span> <span class="token string">"fixtures/pdf.pdf"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> stat <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">lstatSync</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">isBinaryFile</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> stat<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"It is binary!"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"No it is not."</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> isBinaryFileSync <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"isbinaryfile"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isBinaryFileSync<span class="token punctuation">;</span>
<span class="token keyword">const</span> bytes <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> size <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">lstatSync</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isBinaryFileSync</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true or false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="testing" tabindex="-1"><a class="header-anchor" href="#testing" aria-hidden="true">#</a> Testing</h2>
<p>Run <code v-pre>npm install</code>, then run <code v-pre>npm test</code>.</p>
</div></template>
