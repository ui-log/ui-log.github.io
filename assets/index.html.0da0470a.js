import{_ as n}from"./app.63e06a35.js";import{l as s,m as a,K as t}from"./@vue.46e0ff50.js";import"./ts-debounce.471e9b22.js";import"./vue-router.66b7519d.js";import"./medium-zoom.0cdb07e4.js";import"./@vueuse.f471c5d7.js";var p="/assets/Writesnapshottests_0.b69139f5.png";const e={},o=t('<p>\uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8\uB294 \uBAA8\uB4E0 \uC2A4\uD1A0\uB9AC\uC758 \uB80C\uB354\uB9C1 \uB41C \uB9C8\uD06C\uC5C5\uC744 \uC0AC\uC804\uC5D0 \uC54C\uB824\uC9C4 \uBCA0\uC774\uC2A4 \uB77C\uC778\uACFC \uBE44\uAD50\uD569\uB2C8\uB2E4. \uB80C\uB354\uB9C1 \uC624\uB958\uC640 \uACBD\uACE0\uB97C \uC77C\uC73C\uD0A4\uB294 \uB9C8\uD06C\uC5C5 \uBCC0\uACBD\uC744 \uC2DD\uBCC4\uD558\uB294 \uBC29\uBC95\uC785\uB2C8\uB2E4.</p><p>Storybook\uC740 \uAC01 \uC2A4\uD1A0\uB9AC\uAC00 \uBCF8\uC9C8\uC801\uC73C\uB85C \uD14C\uC2A4\uD2B8 \uC0AC\uC591\uC774\uAE30 \uB54C\uBB38\uC5D0 \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8\uC5D0 \uC720\uC6A9\uD55C \uB3C4\uAD6C\uC785\uB2C8\uB2E4. \uC2A4\uD1A0\uB9AC\uB97C \uC791\uC131\uD558\uAC70\uB098 \uC5C5\uB370\uC774\uD2B8\uD560 \uB54C\uB9C8\uB2E4 \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8\uB97C \uBB34\uB8CC\uB85C \uC5BB\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><p><img src="'+p+`" alt="image"></p><h2 id="\u1110\u1166\u1109\u1173\u1110\u1173-\u1105\u1165\u1102\u1165\u1105\u1173\u11AF-\u1109\u1161\u110B\u116D\u11BC\u1112\u1161\u110B\u1167-\u1109\u1173\u1102\u1162\u11B8\u1109\u1163\u11BA-\u1110\u1166\u1109\u1173\u1110\u1173-\u110C\u1161\u1103\u1169\u11BC\u1112\u116A\u1112\u1161\u1100\u1175" tabindex="-1"><a class="header-anchor" href="#\u1110\u1166\u1109\u1173\u1110\u1173-\u1105\u1165\u1102\u1165\u1105\u1173\u11AF-\u1109\u1161\u110B\u116D\u11BC\u1112\u1161\u110B\u1167-\u1109\u1173\u1102\u1162\u11B8\u1109\u1163\u11BA-\u1110\u1166\u1109\u1173\u1110\u1173-\u110C\u1161\u1103\u1169\u11BC\u1112\u116A\u1112\u1161\u1100\u1175" aria-hidden="true">#</a> \uD14C\uC2A4\uD2B8 \uB7EC\uB108\uB97C \uC0AC\uC6A9\uD558\uC5EC \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8 \uC790\uB3D9\uD654\uD558\uAE30</h2><p>Storybook \uD14C\uC2A4\uD2B8 \uB7EC\uB108\uB294 \uBAA8\uB4E0 \uC774\uC57C\uAE30\uB97C \uC2E4\uD589 \uAC00\uB2A5\uD55C \uD14C\uC2A4\uD2B8\uB85C \uBCC0\uD658\uD569\uB2C8\uB2E4. Jest\uC640 Playwright\uB85C \uAD6C\uB3D9\uB429\uB2C8\uB2E4. \uB3C5\uB9BD\uC801\uC774\uACE0 \uD504\uB808\uC784\uC6CC\uD06C\uC5D0 \uC911\uB9BD\uC801\uC778 \uC720\uD2F8\uB9AC\uD2F0\uB85C Storybook\uACFC \uBCD1\uB82C\uB85C \uC2E4\uD589\uB429\uB2C8\uB2E4. \uC774\uB97C \uD1B5\uD574 play \uD568\uC218\uB97C \uC0AC\uC6A9\uD558\uC5EC \uC0C1\uD638 \uC791\uC6A9 \uD14C\uC2A4\uD2B8, DOM \uC2A4\uB0C5\uC0F7 \uBC0F \uC811\uADFC\uC131 \uD14C\uC2A4\uD2B8\uB97C \uD3EC\uD568\uD55C \uB2E4\uC911 \uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD\uC5D0\uC11C \uC5EC\uB7EC \uD14C\uC2A4\uD305 \uD328\uD134\uC744 \uC2E4\uD589\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><h3 id="\u1109\u1165\u11AF\u110C\u1165\u11BC" tabindex="-1"><a class="header-anchor" href="#\u1109\u1165\u11AF\u110C\u1165\u11BC" aria-hidden="true">#</a> \uC124\uC815</h3><p>\uD14C\uC2A4\uD2B8 \uB7EC\uB108\uB97C \uC0AC\uC6A9\uD558\uC5EC \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8\uB97C \uD65C\uC131\uD654\uD558\uB824\uBA74 \uC62C\uBC14\uB974\uAC8C \uC124\uC815\uD558\uB294 \uCD94\uAC00 \uB2E8\uACC4\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4. \uB098\uBA38\uC9C0 \uD544\uC694\uD55C \uAD6C\uC131 \uC791\uC5C5\uC744 \uC9C4\uD589\uD558\uAE30 \uC804\uC5D0 \uD14C\uC2A4\uD2B8 \uB7EC\uB108 \uBB38\uC11C\uB97C \uC815\uB3C5\uD558\uACE0 \uC0AC\uC6A9 \uAC00\uB2A5\uD55C \uC635\uC158 \uBC0F API\uC5D0 \uB300\uD574 \uB354 \uC54C\uC544 \uBCF4\uC2DC\uAE30\uB97C \uAD8C\uC7A5\uD569\uB2C8\uB2E4.</p><p>\uB2E4\uC74C \uB0B4\uC6A9\uC744 \uD3EC\uD568\uD558\uC5EC Storybook \uB514\uB809\uD1A0\uB9AC \uB0B4\uC5D0 \uC0C8 \uAD6C\uC131 \uD30C\uC77C\uC744 \uCD94\uAC00\uD558\uC2ED\uC2DC\uC624:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> TestRunnerConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@storybook/test-runner&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config<span class="token operator">:</span> TestRunnerConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">postVisit</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// #storybook-root \uC694\uC18C\uB294 \uC774\uC57C\uAE30\uB97C \uAC10\uC300 \uB54C \uC0AC\uC6A9\uB429\uB2C8\uB2E4. Storybook 6.x\uC5D0\uC11C \uC120\uD0DD\uAE30\uB294 #root\uC785\uB2C8\uB2E4.</span>
    <span class="token keyword">const</span> elementHandler <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;#storybook-root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> innerHTML <span class="token operator">=</span> <span class="token keyword">await</span> elementHandler<span class="token punctuation">.</span><span class="token function">innerHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> config<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uD14C\uC2A4\uD2B8 \uB7EC\uB108\uB97C \uC2E4\uD589\uD558\uBA74(yarn test-storybook\uC640 \uAC19\uC774), \uBAA8\uB4E0 \uC774\uC57C\uAE30\uB97C \uC2E4\uD589\uD558\uACE0 \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8\uB97C \uC218\uD589\uD558\uC5EC \uD504\uB85C\uC81D\uD2B8\uC758 \uAC01 \uC774\uC57C\uAE30\uC5D0 \uB300\uD55C \uC2A4\uB0C5\uC0F7 \uD30C\uC77C\uC744 \uC0DD\uC131\uD558\uC5EC <strong>snapshots</strong> \uB514\uB809\uD1A0\uB9AC\uC5D0 \uC800\uC7A5\uD569\uB2C8\uB2E4.</p><h3 id="\u1100\u116E\u1109\u1165\u11BC" tabindex="-1"><a class="header-anchor" href="#\u1100\u116E\u1109\u1165\u11BC" aria-hidden="true">#</a> \uAD6C\uC131</h3><p>\uAE30\uBCF8 \uC124\uC815\uC73C\uB85C, \uD14C\uC2A4\uD2B8 \uB7EC\uB108\uB294 \uB300\uBD80\uBD84\uC758 \uC0AC\uC6A9 \uC0AC\uB840\uB97C \uB2E4\uB8E8\uB294 \uB0B4\uC7A5\uB41C \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8 \uAD6C\uC131\uC744 \uC81C\uACF5\uD569\uB2C8\uB2E4. test-storybook --eject\uB97C \uD1B5\uD574 \uAD6C\uC131\uC744 \uC138\uBC00\uD558\uAC8C \uC870\uC815\uD558\uAC70\uB098 \uD504\uB85C\uC81D\uD2B8 \uB8E8\uD2B8\uC5D0 test-runner-jest.config.js \uD30C\uC77C\uC744 \uB9CC\uB4E4\uC5B4 \uD544\uC694\uC5D0 \uB9DE\uAC8C \uAD6C\uC131\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.\`\`\`</p><h4 id="\u1100\u1175\u1107\u1169\u11AB-\u1109\u1173\u1102\u1162\u11B8\u1109\u1163\u11BA-\u1103\u1175\u1105\u1166\u11A8\u1110\u1169\u1105\u1175-\u110C\u1162\u110C\u1165\u11BC\u110B\u1174\u1112\u1161\u1100\u1175" tabindex="-1"><a class="header-anchor" href="#\u1100\u1175\u1107\u1169\u11AB-\u1109\u1173\u1102\u1162\u11B8\u1109\u1163\u11BA-\u1103\u1175\u1105\u1166\u11A8\u1110\u1169\u1105\u1175-\u110C\u1162\u110C\u1165\u11BC\u110B\u1174\u1112\u1161\u1100\u1175" aria-hidden="true">#</a> \uAE30\uBCF8 \uC2A4\uB0C5\uC0F7 \uB514\uB809\uD1A0\uB9AC \uC7AC\uC815\uC758\uD558\uAE30</h4><p>\uD14C\uC2A4\uD2B8 \uB7EC\uB108\uB294 \uAE30\uBCF8\uC801\uC73C\uB85C \uC0DD\uC131\uB41C \uC2A4\uB0C5\uC0F7 \uD30C\uC77C\uC5D0 \uB300\uD574 \uD2B9\uC815\uD55C \uBA85\uBA85 \uADDC\uCE59\uACFC \uACBD\uB85C\uB97C \uC0AC\uC6A9\uD569\uB2C8\uB2E4. \uC2A4\uB0C5\uC0F7 \uB514\uB809\uD1A0\uB9AC\uB97C \uC0AC\uC6A9\uC790 \uC815\uC758\uD574\uC57C \uD558\uB294 \uACBD\uC6B0, \uC0AC\uC6A9\uC790 \uC815\uC758 \uC2A4\uB0C5\uC0F7 \uB9AC\uC878\uBC84\uB97C \uC815\uC758\uD558\uC5EC \uC800\uC7A5\uB41C \uC2A4\uB0C5\uC0F7\uC774 \uC704\uCE58\uD55C \uB514\uB809\uD1A0\uB9AC\uB97C \uC9C0\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><p>\uC0AC\uC6A9\uC790 \uC815\uC758 \uC2A4\uB0C5\uC0F7 \uB9AC\uC878\uBC84\uB97C \uAD6C\uD604\uD558\uB824\uBA74 snapshot-resolver.js \uD30C\uC77C\uC744 \uB9CC\uB4DC\uC138\uC694:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">resolveSnapshotPath</span><span class="token operator">:</span> <span class="token punctuation">(</span>testPath<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fileName <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>testPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> fileNameWithoutExtension <span class="token operator">=</span> fileName<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.[^/.]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \uC2A4\uB0C5\uC0F7 \uD30C\uC77C\uC758 \uD655\uC7A5\uC790\uB97C \uC815\uC758\uD569\uB2C8\uB2E4</span>
    <span class="token keyword">const</span> modifiedFileName <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>fileNameWithoutExtension<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.snap</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>

    <span class="token comment">// Jest\uB97C \uAD6C\uC131\uD558\uC5EC \uB2E4\uC74C \uADDC\uCE59\uC5D0 \uB530\uB77C \uC2A4\uB0C5\uC0F7 \uD30C\uC77C\uC744 \uC0DD\uC131\uD558\uB3C4\uB85D \uC9C0\uC815\uD569\uB2C8\uB2E4 (./src/test/__snapshots__/Button.stories.snap)</span>
    <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;./src/test/__snapshots__&#39;</span><span class="token punctuation">,</span> modifiedFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">resolveTestPath</span><span class="token operator">:</span> <span class="token punctuation">(</span>snapshotFilePath<span class="token punctuation">,</span> snapshotExtension<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>snapshotFilePath<span class="token punctuation">,</span> snapshotExtension<span class="token punctuation">)</span><span class="token punctuation">,</span>
  testPathForConsistencyCheck<span class="token operator">:</span> <span class="token string">&#39;example&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uD14C\uC2A4\uD2B8 \uC2E4\uD589\uAE30\uC778 test-runner-jest.config.js \uD30C\uC77C\uC744 \uC5C5\uB370\uC774\uD2B8\uD558\uACE0 \uC0AC\uC6A9\uC790 \uC9C0\uC815 \uC2A4\uB0C5\uC0F7 \uB9AC\uC878\uBC84\uB97C \uC0AC\uC6A9\uD558\uB3C4\uB85D \uC124\uC815\uD558\uC138\uC694:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getJestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@storybook/test-runner&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultConfig <span class="token operator">=</span> <span class="token function">getJestConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \uAE30\uBCF8 Jest \uAD6C\uC131\uC740 @storybook/test-runner\uC5D0\uC11C \uAC00\uC838\uC635\uB2C8\uB2E4</span>
  <span class="token operator">...</span>defaultConfig<span class="token punctuation">,</span>
  snapshotResolver<span class="token operator">:</span> <span class="token string">&#39;./snapshot-resolver.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> config<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uD14C\uC2A4\uD2B8 \uC2E4\uD589\uAE30\uAC00 \uC2E4\uD589\uB418\uBA74 \uBAA8\uB4E0 \uC2A4\uD1A0\uB9AC\uB97C \uC21C\uD658\uD558\uACE0 \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8\uB97C \uC2E4\uD589\uD558\uC5EC \uD504\uB85C\uC81D\uD2B8\uC758 \uAC01 \uC2A4\uD1A0\uB9AC\uC5D0 \uB300\uD55C \uC2A4\uB0C5\uC0F7 \uD30C\uC77C\uC744 \uC0DD\uC131\uD558\uACE0 \uC9C0\uC815\uD55C \uC0AC\uC6A9\uC790 \uC815\uC758 \uB514\uB809\uD1A0\uB9AC\uC5D0 \uC800\uC7A5\uD569\uB2C8\uB2E4.</p><h4 id="\u1109\u1173\u1102\u1162\u11B8\u1109\u1163\u11BA-\u110C\u1175\u11A8\u1105\u1167\u11AF\u1112\u116A-\u1109\u1161\u110B\u116D\u11BC\u110C\u1161-\u110C\u1165\u11BC\u110B\u1174" tabindex="-1"><a class="header-anchor" href="#\u1109\u1173\u1102\u1162\u11B8\u1109\u1163\u11BA-\u110C\u1175\u11A8\u1105\u1167\u11AF\u1112\u116A-\u1109\u1161\u110B\u116D\u11BC\u110C\u1161-\u110C\u1165\u11BC\u110B\u1174" aria-hidden="true">#</a> \uC2A4\uB0C5\uC0F7 \uC9C1\uB82C\uD654 \uC0AC\uC6A9\uC790 \uC815\uC758</h4><p>\uAE30\uBCF8 \uC124\uC815\uC73C\uB85C \uD14C\uC2A4\uD2B8 \uB7EC\uB108\uB294 jest-serializer-html\uC744 \uC0AC\uC6A9\uD558\uC5EC HTML \uC2A4\uB0C5\uC0F7\uC744 \uC9C1\uB82C\uD654\uD569\uB2C8\uB2E4. \uC774\uB294 Emotion\uACFC \uAC19\uC740 \uD2B9\uC815 CSS-in-JS \uB77C\uC774\uBE0C\uB7EC\uB9AC, Angular\uC758 ng \uC18D\uC131 \uB610\uB294 CSS \uD074\uB798\uC2A4\uC5D0 \uB300\uD55C \uD574\uC2DC \uAE30\uBC18 \uC2DD\uBCC4\uC790\uB97C \uC0DD\uC131\uD558\uB294 \uC720\uC0AC\uD55C \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uC0AC\uC6A9\uD560 \uACBD\uC6B0 \uBB38\uC81C\uB97C \uC77C\uC73C\uD0AC \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC2A4\uB0C5\uC0F7\uC744 \uC0AC\uC6A9\uC790 \uC815\uC758 \uC9C1\uB82C\uD654\uD574\uC57C \uD558\uB294 \uACBD\uC6B0\uC5D0\uB294 \uC2A4\uB0C5\uC0F7\uC774 \uC5B4\uB5BB\uAC8C \uC9C1\uB82C\uD654\uB418\uB294\uC9C0 \uC9C0\uC815\uD558\uB294 \uC0AC\uC6A9\uC790 \uC815\uC758 \uC2A4\uB0C5\uC0F7 \uC9C1\uB82C\uD654\uAE30\uB97C \uC815\uC758\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><p>\uC0AC\uC6A9\uC790 \uC815\uC758 \uC2A4\uB0C5\uC0F7 \uC9C1\uB82C\uD654\uAE30\uB97C \uAD6C\uD604\uD558\uB824\uBA74 snapshot-serializer.js \uD30C\uC77C\uC744 \uB9CC\uB4DC\uC138\uC694:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \uD14C\uC2A4\uD2B8 \uB7EC\uB108\uC758 \uC885\uC18D\uC131\uC73C\uB85C jest-serializer-html \uD328\uD0A4\uC9C0\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4</span>
<span class="token keyword">const</span> jestSerializerHtml <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;jest-serializer-html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">DYNAMIC_ID_PATTERN</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&quot;react-aria-\\d+(\\.\\d+)?&quot;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/*
   * \uD14C\uC2A4\uD2B8 \uB7EC\uB108\uB294 \uD14C\uC2A4\uD2B8\uAC00 expect(SomeHTMLElement).toMatchSnapshot()\uC5D0 \uB3C4\uB2EC\uD588\uC744 \uB54C serialize \uD568\uC218\uB97C \uD638\uCD9C\uD569\uB2C8\uB2E4.
   * \uBAA8\uB4E0 \uB3D9\uC801 ID\uB97C \uC815\uC801 ID\uB85C \uB300\uCCB4\uD558\uC5EC \uC2A4\uB0C5\uC0F7\uC774 \uC77C\uAD00\uB418\uAC8C \uC720\uC9C0\uB429\uB2C8\uB2E4.
   * \uC608\uB97C \uB4E4\uC5B4 &lt;label id=&quot;react-aria970235672-:rl:&quot; for=&quot;react-aria970235672-:rk:&quot;&gt;Favorite color&lt;/label&gt;\uB97C &lt;label id=&quot;react-mocked_id&quot; for=&quot;react-mocked_id&quot;&gt;Favorite color&lt;/label&gt;\uB85C \uBCC0\uD658\uD569\uB2C8\uB2E4.
   */</span>
  <span class="token function">serialize</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> withFixedIds <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">DYNAMIC_ID_PATTERN</span><span class="token punctuation">,</span> <span class="token string">&#39;mocked_id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> jestSerializerHtml<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>withFixedIds<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">test</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> jestSerializerHtml<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>test-runner-jest.config.js \uD30C\uC77C\uC744 \uC5C5\uB370\uC774\uD2B8\uD558\uACE0 snapshotSerializers \uC635\uC158\uC744 \uD65C\uC131\uD654\uD558\uC5EC \uC0AC\uC6A9\uC790 \uC815\uC758 \uC2A4\uB0C5\uC0F7 \uB9AC\uC878\uBC84\uB97C \uC0AC\uC6A9\uD558\uC138\uC694:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getJestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@storybook/test-runner&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultConfig <span class="token operator">=</span> <span class="token function">getJestConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>defaultConfig<span class="token punctuation">,</span>
  snapshotSerializers<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// \uD14C\uC2A4\uD2B8 \uB7EC\uB108\uAC00 \uC2E4\uD589\uB420 \uB54C, \uACB0\uACFC HTML\uC744 \uC12C\uC138\uD558\uAC8C \uC0B4\uD3B4\uBCF4\uACE0, \uCEF4\uD3EC\uB10C\uD2B8\uB97C \uC2A4\uB0C5\uC0F7\uD558\uBA70 \uC2A4\uD0DC\uD2F1 \uC18D\uC131\uC73C\uB85C \uBCC0\uACBD\uD569\uB2C8\uB2E4.</span>
    <span class="token string">&#39;./snapshot-serializer.js&#39;</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>defaultConfig<span class="token punctuation">.</span>snapshotSerializers<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> config<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uD14C\uC2A4\uD2B8 \uB7EC\uB108\uAC00 \uD14C\uC2A4\uD2B8\uB97C \uC2E4\uD589\uD560 \uB54C \uACB0\uACFC HTML\uC744 \uC870\uC0AC\uD558\uC5EC, \uCEE4\uC2A4\uD140 \uC9C1\uB82C\uD654 \uD30C\uC77C\uC5D0\uC11C \uC81C\uACF5\uB41C \uC815\uADDC \uD45C\uD604\uC2DD\uC5D0 \uB530\uB77C \uB3D9\uC801\uC73C\uB85C \uC0DD\uC131\uB41C \uC18D\uC131\uC744 \uC815\uC801\uC778 \uC18D\uC131\uC73C\uB85C \uB300\uCCB4\uD569\uB2C8\uB2E4. \uC774\uB97C \uD1B5\uD574 \uC2A4\uB0C5\uC0F7\uC774 \uB2E4\uB978 \uD14C\uC2A4\uD2B8 \uC2E4\uD589\uAC04\uC5D0 \uC77C\uAD00\uB418\uAC8C \uC720\uC9C0\uB429\uB2C8\uB2E4.</p><h2 id="portable-stories\u1105\u1169-\u1109\u1173\u1102\u1162\u11B8\u1109\u1163\u11BA-\u1110\u1166\u1109\u1173\u1110\u1173\u1112\u1161\u1100\u1175" tabindex="-1"><a class="header-anchor" href="#portable-stories\u1105\u1169-\u1109\u1173\u1102\u1162\u11B8\u1109\u1163\u11BA-\u1110\u1166\u1109\u1173\u1110\u1173\u1112\u1161\u1100\u1175" aria-hidden="true">#</a> Portable Stories\uB85C \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8\uD558\uAE30</h2><p>Storybook\uC740 composeStories \uC720\uD2F8\uB9AC\uD2F0\uB97C \uC81C\uACF5\uD558\uC5EC \uD14C\uC2A4\uD2B8 \uD30C\uC77C\uC5D0\uC11C \uC2A4\uD1A0\uB9AC\uB97C \uB80C\uB354\uB9C1 \uAC00\uB2A5\uD55C \uC694\uC18C\uB85C \uBCC0\uD658\uD558\uB294 \uB370 \uB3C4\uC6C0\uC744 \uC90D\uB2C8\uB2E4. \uC774\uAC83\uC740 Node \uD14C\uC2A4\uD2B8\uC5D0\uC11C JSDOM\uC744 \uC0AC\uC6A9\uD558\uC5EC Storybook\uC758 \uB2E4\uB978 \uAE30\uB2A5(\uC608: \uB370\uCF54\uB808\uC774\uD130, args)\uC744 \uD14C\uC2A4\uD2B8\uC5D0 \uC801\uC6A9\uD560 \uC218 \uC788\uB3C4\uB85D \uD574\uC90D\uB2C8\uB2E4. \uC774\uB97C \uD1B5\uD574 \uC2A4\uD1A0\uB9AC\uB97C \uB2E4\uC2DC \uC791\uC131\uD560 \uD544\uC694 \uC5C6\uC774 \uD14C\uC2A4\uD305 \uD658\uACBD(\uC608: Jest, Vitest)\uC5D0\uC11C \uC2A4\uD1A0\uB9AC\uB97C \uC7AC\uC0AC\uC6A9\uD558\uC5EC \uD56D\uC0C1 \uC2A4\uD1A0\uB9AC\uC640 \uD14C\uC2A4\uD2B8\uAC00 \uB3D9\uAE30\uD654\uB418\uB3C4\uB85D \uBCF4\uC7A5\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC774\uAC83\uC774 \uBC14\uB85C Storybook\uC758 Portable Stories\uC785\uB2C8\uB2E4.</p><h3 id="\u1109\u1165\u11AF\u110C\u1165\u11BC-1" tabindex="-1"><a class="header-anchor" href="#\u1109\u1165\u11AF\u110C\u1165\u11BC-1" aria-hidden="true">#</a> \uC124\uC815</h3><p>\uAE30\uBCF8\uC801\uC73C\uB85C, Storybook\uC740 React, Vue \uBC0F \uB2E4\uB978 \uD504\uB808\uC784\uC6CC\uD06C\uC5D0 \uB300\uD574 \uC81C\uB85C\uAD6C\uC131 \uC124\uC815\uC744 \uC81C\uACF5\uD558\uBA70, \uC560\uB4DC\uC628\uC744 \uD1B5\uD574 \uC2A4\uD1A0\uB9AC\uB97C \uD14C\uC2A4\uD2B8\uB85C \uC2E4\uD589\uD560 \uC218 \uC788\uAC8C \uD574\uC90D\uB2C8\uB2E4. \uC774\uB97C \uD1B5\uD574 \uD14C\uC2A4\uD305 \uD658\uACBD\uC744 \uC120\uD0DD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uADF8\uB7EC\uB098, \uD14C\uC2A4\uD2B8\uB97C \uC2E4\uD589\uD558\uACE0 Storybook \uC778\uC2A4\uD134\uC2A4\uC5D0\uC11C \uD2B9\uC815 \uAD6C\uC131 (\uC608: \uC804\uC5ED \uB370\uCF54\uB808\uC774\uD130, \uB9E4\uAC1C\uBCC0\uC218)\uC744 \uC124\uC815\uD588\uB2E4\uBA74 \uD14C\uC2A4\uD2B8\uC5D0\uC11C \uC0AC\uC6A9\uD558\uB824\uBA74 \uC774\uB7EC\uD55C \uAD6C\uC131\uC744 \uD3EC\uD568\uC2DC\uD0A8 \uD14C\uC2A4\uD2B8 \uD658\uACBD\uC744 \uD655\uC7A5\uD574\uC57C \uD569\uB2C8\uB2E4. \uC774\uB97C \uC704\uD574 \uB2E4\uC74C\uACFC \uAC19\uC774 setup.js|ts \uD30C\uC77C\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Storybook\uC758 \uBBF8\uB9AC\uBCF4\uAE30 \uD30C\uC77C \uC704\uCE58</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> globalStorybookConfig <span class="token keyword">from</span> <span class="token string">&#39;./.storybook/preview&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> setProjectAnnotations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@storybook/react&#39;</span><span class="token punctuation">;</span>

<span class="token function">setProjectAnnotations</span><span class="token punctuation">(</span>globalStorybookConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Vitest\uB97C \uC0AC\uC6A9 \uC911\uC774\uB77C\uBA74 \uD14C\uC2A4\uD2B8 \uAD6C\uC131 \uD30C\uC77C (\uC608: vite.config.js|ts)\uC744 \uC5C5\uB370\uC774\uD2B8\uD558\uAC70\uB098 Jest\uB97C \uC0AC\uC6A9 \uC911\uC774\uB77C\uBA74 \uD14C\uC2A4\uD2B8 \uC2A4\uD06C\uB9BD\uD2B8\uB97C \uC5C5\uB370\uC774\uD2B8\uD574\uC8FC\uC138\uC694:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/// &lt;reference types=&quot;vitest&quot; /&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vitest/config&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mergeConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> viteConfig <span class="token keyword">from</span> <span class="token string">&#39;./vite.config&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">mergeConfig</span><span class="token punctuation">(</span>
  viteConfig<span class="token punctuation">,</span>
  <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token punctuation">{</span>
      globals<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      environment<span class="token operator">:</span> <span class="token string">&#39;jsdom&#39;</span><span class="token punctuation">,</span>
      clearMocks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      setupFiles<span class="token operator">:</span> <span class="token string">&#39;./src/setupTests.ts&#39;</span><span class="token punctuation">,</span> <span class="token comment">//\u{1F448} \uC5EC\uAE30\uC5D0 \uD65C\uC131\uD654\uB41C \uC124\uC815 \uD30C\uC77C</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u1112\u1161\u1102\u1161\u110B\u1174-\u1109\u1173\u1110\u1169\u1105\u1175\u110B\u1166\u1109\u1165-\u1110\u1166\u1109\u1173\u1110\u1173-\u1109\u1175\u11AF\u1112\u1162\u11BC\u1112\u1161\u1100\u1175" tabindex="-1"><a class="header-anchor" href="#\u1112\u1161\u1102\u1161\u110B\u1174-\u1109\u1173\u1110\u1169\u1105\u1175\u110B\u1166\u1109\u1165-\u1110\u1166\u1109\u1173\u1110\u1173-\u1109\u1175\u11AF\u1112\u1162\u11BC\u1112\u1161\u1100\u1175" aria-hidden="true">#</a> \uD558\uB098\uC758 \uC2A4\uD1A0\uB9AC\uC5D0\uC11C \uD14C\uC2A4\uD2B8 \uC2E4\uD589\uD558\uAE30</h3><p>\uD558\uB098\uC758 \uC2A4\uD1A0\uB9AC\uC5D0\uC11C \uD14C\uC2A4\uD2B8\uB97C \uC2E4\uD589\uD574\uC57C \uD558\uB294 \uACBD\uC6B0, \uAD00\uB828 \uD504\uB808\uC784\uC6CC\uD06C\uC758 composeStories \uD568\uC218\uB97C \uC0AC\uC6A9\uD558\uC5EC \uCC98\uB9AC\uD558\uACE0 \uC2A4\uD1A0\uB9AC\uC5D0\uC11C \uC815\uC758\uD55C \uAD6C\uC131 (\uC608: \uB370\uCF54\uB808\uC774\uD130, args)\uC744 \uC801\uC6A9\uD558\uACE0 \uD14C\uC2A4\uD2B8 \uD658\uACBD\uACFC \uACB0\uD569\uD558\uC5EC \uC2A4\uB0C5\uC0F7 \uD30C\uC77C\uC744 \uC0DD\uC131\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC608\uB97C \uB4E4\uC5B4, \uCEF4\uD3EC\uB10C\uD2B8\uC5D0\uC11C \uC791\uC5C5\uD558\uACE0 \uAE30\uBCF8 \uC0C1\uD0DC\uB97C \uD14C\uC2A4\uD2B8\uD558\uACE0 \uC608\uC0C1\uB41C DOM \uAD6C\uC870\uAC00 \uBCC0\uACBD\uB418\uC9C0 \uC54A\uC558\uB294\uC9C0 \uD655\uC778\uD558\uB824\uBA74 \uB2E4\uC74C\uACFC \uAC19\uC774 \uD14C\uC2A4\uD2B8\uB97C \uC791\uC131\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// @vitest-environment jsdom</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vitest&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@testing-library/react&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> composeStories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@storybook/react&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> stories <span class="token keyword">from</span> <span class="token string">&#39;../stories/Button.stories&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> Primary <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">composeStories</span><span class="token punctuation">(</span>stories<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;Button snapshot&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mounted <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token function">Primary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mounted<span class="token punctuation">.</span>container<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u110B\u1167\u1105\u1165-\u110B\u1175\u110B\u1163\u1100\u1175\u110B\u1166-\u1103\u1162\u1112\u1161\u11AB-\u1110\u1166\u1109\u1173\u1110\u1173-\u1109\u1175\u11AF\u1112\u1162\u11BC" tabindex="-1"><a class="header-anchor" href="#\u110B\u1167\u1105\u1165-\u110B\u1175\u110B\u1163\u1100\u1175\u110B\u1166-\u1103\u1162\u1112\u1161\u11AB-\u1110\u1166\u1109\u1173\u1110\u1173-\u1109\u1175\u11AF\u1112\u1162\u11BC" aria-hidden="true">#</a> \uC5EC\uB7EC \uC774\uC57C\uAE30\uC5D0 \uB300\uD55C \uD14C\uC2A4\uD2B8 \uC2E4\uD589</h3><p>composeStories \uD568\uC218\uB97C \uC0AC\uC6A9\uD558\uC5EC \uC5EC\uB7EC \uC774\uC57C\uAE30\uC5D0 \uB300\uD574 \uD14C\uC2A4\uD2B8\uB97C \uC2E4\uD589\uD560 \uC218\uB3C4 \uC788\uC5B4\uC694. \uC774\uAC83\uC740 \uD504\uB85C\uC81D\uD2B8\uC758 \uCEF4\uD3EC\uB10C\uD2B8\uC758 \uB2E4\uB978 \uC0C1\uD0DC\uC5D0 \uB300\uD55C \uC2A4\uB0C5\uC0F7\uC744 \uC0DD\uC131\uD558\uC5EC \uD14C\uC2A4\uD2B8 \uBC94\uC704\uB97C \uD655\uC7A5\uD558\uACE0 \uC2F6\uC744 \uB54C \uC720\uC6A9\uD574\uC694. \uB2E4\uC74C\uACFC \uAC19\uC774 \uD14C\uC2A4\uD2B8\uB97C \uC791\uC131\uD560 \uC218 \uC788\uC5B4\uC694:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// @vitest-environment jsdom</span>

<span class="token comment">// \uC9C0\uC6D0\uD558\uB294 Storybook \uD504\uB808\uC784\uC6CC\uD06C \uC911 \uD558\uB098\uB85C &#39;your-framework&#39;\uC744(\uB97C) \uBC14\uAFD4\uC8FC\uC138\uC694 (\uC608: react, vue3)</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Meta<span class="token punctuation">,</span> StoryFn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@storybook/your-framework&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> describe<span class="token punctuation">,</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vitest&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \uC9C0\uC6D0\uD558\uB294 \uD14C\uC2A4\uD305 \uB77C\uC774\uBE0C\uB7EC\uB9AC \uC911 \uD558\uB098\uB85C &#39;your-testing-library&#39;\uB97C(\uB97C) \uBC14\uAFD4\uC8FC\uC138\uC694 (\uC608: react, vue)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@testing-library/your-testing-library&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \uC9C0\uC6D0\uD558\uB294 \uD504\uB808\uC784\uC6CC\uD06C\uB098 Storybook\uC758 \uD14C\uC2A4\uD305 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0 \uB530\uB77C import\uB97C \uC870\uC815\uD574\uC8FC\uC138\uC694 (\uC608: react, vue3)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> composeStories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@storybook/your-framework&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">StoryFile</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">default</span><span class="token operator">:</span> Meta<span class="token punctuation">;</span>
  <span class="token punctuation">[</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> StoryFn <span class="token operator">|</span> Meta<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> compose <span class="token operator">=</span> <span class="token punctuation">(</span>entry<span class="token operator">:</span> StoryFile<span class="token punctuation">)</span><span class="token operator">:</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> composeStories<span class="token operator">&lt;</span>StoryFile<span class="token operator">&gt;&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">composeStories</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\uBAA8\uB4C8\uC5D0 \uB300\uD55C \uC774\uC57C\uAE30\uB97C \uD569\uC131\uD558\uB294 \uC911\uC5D0 \uBB38\uC81C\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>e<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getAllStoryFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \uC774\uC57C\uAE30 \uD30C\uC77C\uACFC \uC77C\uCE58\uC2DC\uD0A4\uB824\uB294 glob\uC744 \uB123\uC5B4\uC8FC\uC138\uC694</span>
  <span class="token keyword">const</span> storyFiles <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>
    <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">glob</span><span class="token generic class-name"><span class="token operator">&lt;</span>StoryFile<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;./stories/**/*.(stories|story).@(js|jsx|mjs|ts|tsx)&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      eager<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> storyFiles<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>filePath<span class="token punctuation">,</span> storyFile<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> storyDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> componentName <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(stories|story)\\.[^/.]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> filePath<span class="token punctuation">,</span> storyFile<span class="token punctuation">,</span> componentName<span class="token punctuation">,</span> storyDir <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;\uC774\uC57C\uAE30 \uC2A4\uB0C5\uC0F7&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">getAllStoryFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> storyFile<span class="token punctuation">,</span> componentName <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> meta <span class="token operator">=</span> storyFile<span class="token punctuation">.</span>default<span class="token punctuation">;</span>
    <span class="token keyword">const</span> title <span class="token operator">=</span> meta<span class="token punctuation">.</span>title <span class="token operator">||</span> componentName<span class="token punctuation">;</span>

    <span class="token function">describe</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> stories <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token function">compose</span><span class="token punctuation">(</span>storyFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token punctuation">,</span> story<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> story <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>stories<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
          <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\uC774 \uBAA8\uB4C8\uC5D0 \uB300\uD55C \uC774\uC57C\uAE30\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC5B4\uC694: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">. \uC774 \uBAA8\uB4C8\uC5D0 \uC720\uD6A8\uD55C \uC774\uC57C\uAE30\uAC00 \uC801\uC5B4\uB3C4 \uD558\uB098 \uC788\uB3C4\uB85D \uD655\uC778\uD574\uC8FC\uC138\uC694.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      stories<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> story <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> mounted <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token function">story</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// \uC2A4\uB0C5\uC0F7\uC744 \uCC0D\uAE30 \uC804\uC5D0 \uCEF4\uD3EC\uB10C\uD2B8\uAC00 \uB80C\uB354\uB9C1\uB420 \uC218 \uC788\uB3C4\uB85D 1\uBC00\uB9AC\uCD08 \uC9C0\uC5F0\uC744 \uCD94\uAC00\uD558\uC5EC \uC77C\uAD00\uB41C \uC2A4\uB0C5\uC0F7\uC744 \uBCF4\uC7A5\uD569\uB2C8\uB2E4.</span>
          <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">expect</span><span class="token punctuation">(</span>mounted<span class="token punctuation">.</span>container<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uD14C\uC2A4\uD2B8 \uD658\uACBD\uC5D0\uC11C \uD14C\uC2A4\uD2B8\uB97C \uC2E4\uD589\uD558\uBA74 \uD504\uB85C\uC81D\uD2B8\uC758 \uBAA8\uB4E0 \uC774\uC57C\uAE30\uC5D0 \uB300\uD55C \uB2E8\uC77C \uC2A4\uB0C5\uC0F7 \uD30C\uC77C\uC744 \uC0DD\uC131\uD560 \uAC70\uC5D0\uC694 (\uC608:storybook.test.ts|js.snap). \uADF8\uB7EC\uB098 \uD544\uC694\uD558\uB2E4\uBA74, Vitest\uC758 toMatchFileSnapshot API\uB098 Jest\uC758 jest-specific-snapshot \uD328\uD0A4\uC9C0\uB97C \uC0AC\uC6A9\uD558\uC5EC \uD504\uB85C\uC81D\uD2B8\uC758 \uAC01 \uC774\uC57C\uAE30\uC5D0 \uB300\uD55C \uAC1C\uBCC4 \uC2A4\uB0C5\uC0F7 \uD30C\uC77C\uC744 \uC0DD\uC131\uD558\uB3C4\uB85D \uD14C\uC2A4\uD2B8 \uD30C\uC77C\uC744 \uD655\uC7A5\uD560 \uC218 \uC788\uC5B4\uC694. \uC608\uB97C \uB4E4\uC5B4:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// @vitest-environment jsdom</span>

<span class="token comment">// \uC9C0\uC6D0\uB418\uB294 Storybook \uD504\uB808\uC784\uC6CC\uD06C \uC911 \uD558\uB098(react, vue3)\uB85C your-framework\uB97C \uB300\uCCB4\uD558\uC138\uC694</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Meta<span class="token punctuation">,</span> StoryFn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@storybook/your-framework&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> describe<span class="token punctuation">,</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vitest&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \uC9C0\uC6D0\uB418\uB294 \uD14C\uC2A4\uD305 \uB77C\uC774\uBE0C\uB7EC\uB9AC \uC911 \uD558\uB098(\uC608: react, vue)\uB85C your-testing-library\uB97C \uB300\uCCB4\uD558\uC138\uC694</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@testing-library/your-testing-library&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \uC9C0\uC6D0\uB418\uB294 framework \uB610\uB294 Storybook\uC758 \uD14C\uC2A4\uD305 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0 \uB530\uB77C import\uB97C \uC870\uC815\uD558\uC138\uC694(\uC608: react, vue3)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> composeStories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@storybook/your-framework&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">StoryFile</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">default</span><span class="token operator">:</span> Meta<span class="token punctuation">;</span>
  <span class="token punctuation">[</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> StoryFn <span class="token operator">|</span> Meta<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> compose <span class="token operator">=</span> <span class="token punctuation">(</span>entry<span class="token operator">:</span> StoryFile<span class="token punctuation">)</span><span class="token operator">:</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> composeStories<span class="token operator">&lt;</span>StoryFile<span class="token operator">&gt;&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">composeStories</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\uBAA8\uB4C8\uC758 \uC2A4\uD1A0\uB9AC\uB97C \uC791\uC131\uD558\uB294 \uC911 \uBB38\uC81C\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>e<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getAllStoryFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \uB9E4\uCE6D\uD558\uB824\uB294 \uC2A4\uD1A0\uB9AC \uD30C\uC77C\uC5D0 \uB300\uD55C glob\uC744 \uC785\uB825\uD558\uC138\uC694</span>
  <span class="token keyword">const</span> storyFiles <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>
    <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">glob</span><span class="token generic class-name"><span class="token operator">&lt;</span>StoryFile<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;./stories/**/*.(stories|story).@(js|jsx|mjs|ts|tsx)&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      eager<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> storyFiles<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>filePath<span class="token punctuation">,</span> storyFile<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> storyDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> componentName <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(stories|story)\\.[^/.]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> filePath<span class="token punctuation">,</span> storyFile<span class="token punctuation">,</span> componentName<span class="token punctuation">,</span> storyDir <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;Stories Snapshots&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">getAllStoryFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> storyFile<span class="token punctuation">,</span> componentName <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> meta <span class="token operator">=</span> storyFile<span class="token punctuation">.</span>default<span class="token punctuation">;</span>
    <span class="token keyword">const</span> title <span class="token operator">=</span> meta<span class="token punctuation">.</span>title <span class="token operator">||</span> componentName<span class="token punctuation">;</span>

    <span class="token function">describe</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> stories <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token function">compose</span><span class="token punctuation">(</span>storyFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token punctuation">,</span> story<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> story <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>stories<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
          <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\uC774 \uBAA8\uB4C8\uC5D0\uB294 \uC2A4\uD1A0\uB9AC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">. \uC774 \uBAA8\uB4C8\uC5D0 \uC720\uD6A8\uD55C \uC2A4\uD1A0\uB9AC\uAC00 \uCD5C\uC18C \uD558\uB098 \uC774\uC0C1 \uC788\uB294\uC9C0 \uD655\uC778\uD558\uC138\uC694.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      stories<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> story <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> mounted <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token function">story</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// \uAD6C\uC131 \uC694\uC18C\uAC00 \uB80C\uB354\uB9C1\uB418\uAE30 \uC804\uC5D0 1ms\uC758 \uC9C0\uC5F0\uC2DC\uAC04\uC744 \uCD94\uAC00\uD558\uC5EC \uC77C\uAD00\uB41C \uC2A4\uB0C5\uC0F7\uC744 \uBCF4\uC7A5\uD569\uB2C8\uB2E4.</span>
          <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// \uC0AC\uC6A9\uC790 \uC9C0\uC815 \uC2A4\uB0C5\uC0F7 \uACBD\uB85C \uBC0F \uD30C\uC77C \uC774\uB984\uC744 \uC815\uC758\uD569\uB2C8\uB2E4</span>
          <span class="token keyword">const</span> customSnaphotPath <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./__snapshots__/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>componentName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.spec.ts.snap</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
          <span class="token function">expect</span><span class="token punctuation">(</span>mounted<span class="token punctuation">.</span>container<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchFileSnapshot</span><span class="token punctuation">(</span>customSnaphotPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u1109\u1173\u1102\u1162\u11B8\u1109\u1163\u11BA-\u1110\u1166\u1109\u1173\u1110\u1173\u110B\u116A-\u1109\u1175\u1100\u1161\u11A8-\u1110\u1166\u1109\u1173\u1110\u1173\u110B\u1174-\u110E\u1161\u110B\u1175\u110C\u1165\u11B7\u110B\u1173\u11AB-\u1106\u116E\u110B\u1165\u11BA\u110B\u1175\u11AB\u1100\u1161\u110B\u116D" tabindex="-1"><a class="header-anchor" href="#\u1109\u1173\u1102\u1162\u11B8\u1109\u1163\u11BA-\u1110\u1166\u1109\u1173\u1110\u1173\u110B\u116A-\u1109\u1175\u1100\u1161\u11A8-\u1110\u1166\u1109\u1173\u1110\u1173\u110B\u1174-\u110E\u1161\u110B\u1175\u110C\u1165\u11B7\u110B\u1173\u11AB-\u1106\u116E\u110B\u1165\u11BA\u110B\u1175\u11AB\u1100\u1161\u110B\u116D" aria-hidden="true">#</a> \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8\uC640 \uC2DC\uAC01 \uD14C\uC2A4\uD2B8\uC758 \uCC28\uC774\uC810\uC740 \uBB34\uC5C7\uC778\uAC00\uC694?</h4><p>\uC2DC\uAC01 \uD14C\uC2A4\uD2B8\uB294 \uC2A4\uD1A0\uB9AC\uC758 \uC774\uBBF8\uC9C0\uB97C \uCEA1\uCCD0\uD558\uACE0 \uC774\uBBF8\uC9C0 \uAE30\uC900\uC120\uACFC \uBE44\uAD50\uD569\uB2C8\uB2E4. \uBC18\uBA74 \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8\uB294 DOM \uC2A4\uB0C5\uC0F7\uC744 \uCEA1\uCC98\uD558\uACE0 DOM \uAE30\uC900\uC120\uACFC \uBE44\uAD50\uD569\uB2C8\uB2E4. \uC2DC\uAC01 \uD14C\uC2A4\uD2B8\uB294 \uC678\uAD00\uC744 \uD655\uC778\uD558\uB294 \uB370 \uB354 \uC801\uD569\uD569\uB2C8\uB2E4. \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8\uB294 \uC2A4\uBAA8\uD06C \uD14C\uC2A4\uD305 \uBC0F DOM\uC774 \uBCC0\uACBD\uB418\uC9C0 \uC54A\uC74C\uC744 \uBCF4\uC7A5\uD558\uB294 \uB370 \uC720\uC6A9\uD569\uB2C8\uB2E4.</p><h4 id="\u1103\u1161\u1105\u1173\u11AB-ui-\u1110\u1166\u1109\u1173\u1110\u1173\u110B\u1166-\u1103\u1162\u1112\u1162-\u110B\u1161\u11AF\u110B\u1161\u1107\u1169\u1100\u1175" tabindex="-1"><a class="header-anchor" href="#\u1103\u1161\u1105\u1173\u11AB-ui-\u1110\u1166\u1109\u1173\u1110\u1173\u110B\u1166-\u1103\u1162\u1112\u1162-\u110B\u1161\u11AF\u110B\u1161\u1107\u1169\u1100\u1175" aria-hidden="true">#</a> \uB2E4\uB978 UI \uD14C\uC2A4\uD2B8\uC5D0 \uB300\uD574 \uC54C\uC544\uBCF4\uAE30</h4><ul><li>\uD14C\uC2A4\uD2B8 \uB7EC\uB108\uB85C \uD14C\uC2A4\uD2B8 \uC2E4\uD589 \uC790\uB3D9\uD654</li><li>\uC678\uAD00\uC744 \uC704\uD55C \uC2DC\uAC01\uC801 \uD14C\uC2A4\uD2B8</li><li>\uC811\uADFC\uC131\uC744 \uC704\uD55C \uC811\uADFC\uC131 \uD14C\uC2A4\uD2B8</li><li>\uC0AC\uC6A9\uC790 \uB3D9\uC791 \uC2DC\uBBAC\uB808\uC774\uC158\uC744 \uC704\uD55C \uC0C1\uD638 \uC791\uC6A9 \uD14C\uC2A4\uD2B8</li><li>\uCF54\uB4DC \uCEE4\uBC84\uB9AC\uC9C0 \uCE21\uC815\uC744 \uC704\uD55C \uCEE4\uBC84\uB9AC\uC9C0 \uD14C\uC2A4\uD2B8</li><li>\uB80C\uB354\uB9C1 \uC624\uB958\uC640 \uACBD\uACE0\uB97C \uC704\uD55C \uC2A4\uB0C5\uC0F7 \uD14C\uC2A4\uD2B8</li><li>\uC2E4\uC81C \uC0AC\uC6A9\uC790 \uC2DC\uB098\uB9AC\uC624\uB97C \uC2DC\uBBAC\uB808\uC774\uC158\uD558\uAE30 \uC704\uD55C end-to-end \uD14C\uC2A4\uD2B8</li><li>\uAE30\uB2A5\uC744 \uC704\uD55C \uC720\uB2DB \uD14C\uC2A4\uD2B8</li></ul>`,45),c=[o];function i(l,u){return s(),a("div",null,c)}var y=n(e,[["render",i],["__file","index.html.vue"]]);export{y as default};
