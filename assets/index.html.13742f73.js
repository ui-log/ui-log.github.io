import{_ as o,o as n,c,a,w as t,d as p,b as e,g as s}from"./app.af5b2b49.js";var l="/assets/1.b363e064.png",u="/assets/2.38858c4b.png";const i={},k=s(`<h1 id="tanstack-query-react-query-\u1105\u1169-\u1109\u1165\u1107\u1165-\u1103\u1166\u110B\u1175\u1110\u1165-\u1100\u1161\u110C\u1167\u110B\u1169\u1102\u1173\u11AB-\u1107\u1161\u11BC\u1107\u1165\u11B8" tabindex="-1"><a class="header-anchor" href="#tanstack-query-react-query-\u1105\u1169-\u1109\u1165\u1107\u1165-\u1103\u1166\u110B\u1175\u1110\u1165-\u1100\u1161\u110C\u1167\u110B\u1169\u1102\u1173\u11AB-\u1107\u1161\u11BC\u1107\u1165\u11B8" aria-hidden="true">#</a> Tanstack Query(react-query)\uB85C \uC11C\uBC84 \uB370\uC774\uD130 \uAC00\uC838\uC624\uB294 \uBC29\uBC95</h1><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1}\uC774 \uD3EC\uC2A4\uD305\uC744 \uC77D\uC73C\uBA74</p></div><p>React-Query\uC758 \uBC84\uC804 5\uB294 Tanstack Query\uB85C \uC774\uB984\uC774 \uBC14\uB00C\uC5C8\uB294\uB370, \uC0AC\uC6A9\uBC29\uBC95\uC774 \uAC04\uB2E8\uD558\uB2C8 \uC624\uB298\uC740 \uADF8 \uB0B4\uC6A9\uC5D0 \uB300\uD574\uC11C \uC54C\uC544\uBCF4\uACA0\uC2B5\uB2C8\uB2E4.</p><h2 id="_0-tanstack-query-\u1109\u1165\u11AF\u110E\u1175" tabindex="-1"><a class="header-anchor" href="#_0-tanstack-query-\u1109\u1165\u11AF\u110E\u1175" aria-hidden="true">#</a> 0. tanstack query \uC124\uCE58</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> i @tanstack/react-query
$ <span class="token function">pnpm</span> <span class="token function">add</span> @tanstack/react-query
$ <span class="token function">yarn</span> <span class="token function">add</span> @tanstack/react-query
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uC124\uCE58\uB97C \uC644\uB8CC\uD588\uB2E4\uBA74 reactquery Provider\uB97C \uB9CC\uB4E4\uC5B4\uC918\uC57C\uD558\uB294\uB370\uC694.</p><p><code>RQProvider.tsx</code></p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token string">&quot;use client&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> QueryClient<span class="token punctuation">,</span> QueryClientProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ReactQueryDevtools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query-devtools&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ReactNode<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">RQProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span> children <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> children<span class="token operator">:</span> ReactNode <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>client<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      defaultOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        queries<span class="token operator">:</span> <span class="token punctuation">{</span>
          refetchOnWindowFocus<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// \uB2E4\uB978 \uC708\uB3C4\uC6B0 \uD0ED \uAC14\uB2E4 \uC624\uBA74 \uB2E4\uC2DC \uB370\uC774\uD130\uB97C \uAC00\uC838\uC624\uACA0\uB2E4</span>
          retryOnMount<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \uB9AC\uC561\uD2B8\uC5D0 \uCEF4\uD3EC\uB10C\uD2B8\uAC00 \uC5B8\uB9C8\uC6B4\uD2B8 \uB418\uC5C8\uB2E4\uAC00 \uB2E4\uC2DC \uB9C8\uC6B4\uD2B8 \uB418\uBA74 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC628\uB2E4</span>
          refetchOnReconnect<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \uC778\uD130\uB137 \uC5F0\uACB0\uC774 \uB04A\uACBC\uB2E4\uAC00 \uB2E4\uC2DC \uC5F0\uACB0\uB418\uB294 \uC21C\uAC04 \uAC00\uC838\uC628\uB2E4</span>
          retry<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// \uC2E4\uD328\uC2DC \uBA87\uBC88 \uB354 \uAC00\uC838\uC62C \uAC83\uC778\uAC00, false \uB97C \uD558\uBA74 \uC5D0\uB7EC\uD398\uC774\uC9C0 \uBCF4\uC5EC\uC90C</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">QueryClientProvider</span></span> <span class="token attr-name">client</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>client<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ReactQueryDevtools</span></span> <span class="token attr-name">initialIsOpen</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">QueryClientProvider</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ReactQueryDevtools</code>\uB294 \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C react-query\uB85C \uAC00\uC838\uC628 \uB370\uC774\uD130\uB4E4\uC744 \uC27D\uAC8C \uBCF4\uACE0 \uAD00\uB9AC\uD560 \uC218 \uC788\uB294 \uB370\uBE0C\uD234\uC778\uB370\uC694. \uAC1C\uBC1C\uD560 \uB54C\uB294 \uC774\uAC78 \uCD94\uAC00\uD574\uB193\uACE0 \uBCF4\uC2DC\uB294 \uAC83\uC774 \uC88B\uC2B5\uB2C8\uB2E4. devtool\uAD00\uB828\uD574\uC11C\uB294 \uB530\uB85C \uAC8C\uC2DC\uAE00\uC744 \uC791\uC131\uD558\uB3C4\uB85D \uD558\uACE0 \uC774\uBC88 \uAE00\uC5D0\uC11C\uB294 \uB370\uC774\uD130\uB97C fetch\uD558\uB294 \uBD80\uBD84\uAE4C\uC9C0\uB9CC \uC791\uC131\uD558\uACA0\uC2B5\uB2C8\uB2E4.</p><img src="`+l+'" width="500"><img src="'+u+`" width="500"><h2 id="_1-queryclient-\u1109\u1162\u11BC\u1109\u1165\u11BC" tabindex="-1"><a class="header-anchor" href="#_1-queryclient-\u1109\u1162\u11BC\u1109\u1165\u11BC" aria-hidden="true">#</a> 1. QueryClient \uC0DD\uC131</h2><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token punctuation">{</span><span class="token operator">...</span>\uC911\uB7B5<span class="token punctuation">}</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HydrationBoundary<span class="token punctuation">,</span> QueryClient<span class="token punctuation">,</span> dehydrate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 1. \uD544\uC694\uD55C \uBAA8\uB4C8 import</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> queryClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2. queryClient \uC0DD\uC131</span>

  <span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span> queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;posts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;recommends&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> queryFn<span class="token operator">:</span> getPostRecommends <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3. \uB370\uC774\uD130 prefetch</span>
  <span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span> queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;posts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;following&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> queryFn<span class="token operator">:</span> getFollowingPosts <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> dehydratedState <span class="token operator">=</span> <span class="token function">dehydrate</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4. queryClient dehydrated</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HydrationBoundary</span></span> <span class="token attr-name">state</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>dehydratedState<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span><span class="token comment">/* 5. \uD558\uC774\uB4DC\uB808\uC774\uC158 \uBC14\uC6B4\uB354\uB9AC \uC124\uC815 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">cx</span><span class="token punctuation">(</span><span class="token string">&quot;tab_wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">cx</span><span class="token punctuation">(</span><span class="token string">&quot;tab_inner&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">cx</span><span class="token punctuation">(</span><span class="token string">&quot;page_title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\uD648</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tab</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PostForm</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PostForm</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HomePosts</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">HydrationBoundary</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uC704 \uCF54\uB4DC\uB294 QueryClient\uB97C \uC0DD\uC131\uD558\uB294 \uC804\uCCB4 \uCF54\uB4DC\uC785\uB2C8\uB2E4. \uC8FC\uC11D\uC5D0 tanstack query\uC5D0 \uD544\uC694\uD55C \uB0B4\uC6A9\uB4E4\uC744 \uC801\uC5B4\uB450\uC5C8\uB294\uB370 \uC544\uB798\uC5D0 \uB2E4\uC2DC \uD55C\uBC88 \uC815\uB9AC\uD574\uB450\uACA0\uC2B5\uB2C8\uB2E4.</p><h2 id="_1-\u1111\u1175\u11AF\u110B\u116D\u1112\u1161\u11AB-\u1106\u1169\u1103\u1172\u11AF-import" tabindex="-1"><a class="header-anchor" href="#_1-\u1111\u1175\u11AF\u110B\u116D\u1112\u1161\u11AB-\u1106\u1169\u1103\u1172\u11AF-import" aria-hidden="true">#</a> 1. \uD544\uC694\uD55C \uBAA8\uB4C8 import</h2><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> HydrationBoundary<span class="token punctuation">,</span> QueryClient<span class="token punctuation">,</span> dehydrate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 1. \uD544\uC694\uD55C \uBAA8\uB4C8 import</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>@tanstack/react-query\uC5D0\uC11C\uB294 \uB370\uC774\uD130\uB97C fetch\uD574\uC624\uB294 \uACF3\uACFC \uC0AC\uC6A9\uD558\uB294 \uACF3 \uC774\uB807\uAC8C \uB450\uAC00\uC9C0\uB85C \uB098\uB25C\uB2E4\uACE0 \uBCF4\uC2DC\uBA74 \uB429\uB2C8\uB2E4. \uC11C\uBC84 \uCEF4\uD3EC\uB10C\uD2B8\uC5D0\uC11C\uB294 \uB370\uC774\uD130\uB97C fetch\uD574\uC624\uB294\uB370, \uC774 \uB54C \uD544\uC694\uD55C \uBAA8\uB4C8\uC740 \uC138\uAC1C\uAC00 \uC788\uC2B5\uB2C8\uB2E4.</p><ul><li>QueryClient : QueryClient\uB97C \uC0DD\uC131\uD558\uB294 \uD568\uC218</li><li>dehydrate: QueryClient\uC5D0\uC11C prefetch \uD55C state\uB97C dehydrate\uD574\uC8FC\uB294 \uD568\uC218</li><li>HydrationBoundary: QueryClient\uC5D0\uC11C prefetch \uD55C state\uB4E4\uC744 \uC5B4\uB514\uC11C \uC0AC\uC6A9\uD560\uC9C0 \uBC14\uC6B4\uB354\uB9AC\uB97C \uC815\uD574\uC8FC\uB294 \uD568\uC218</li></ul><h2 id="_2-\u1103\u1166\u110B\u1175\u1110\u1165-prefetch" tabindex="-1"><a class="header-anchor" href="#_2-\u1103\u1166\u110B\u1175\u1110\u1165-prefetch" aria-hidden="true">#</a> 2. \uB370\uC774\uD130 prefetch</h2><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> queryClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2. queryClient \uC0DD\uC131</span>

<span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span> queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;posts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;recommends&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> queryFn<span class="token operator">:</span> getPostRecommends <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3. \uB370\uC774\uD130 prefetch</span>
<span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span> queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;posts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;following&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> queryFn<span class="token operator">:</span> getFollowingPosts <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> dehydratedState <span class="token operator">=</span> <span class="token function">dehydrate</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4. queryClient dehydrated</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uADF8 \uB2E4\uC74C\uC5D0\uB294 <code>new QueryClient()</code> \uB97C \uD1B5\uD574\uC11C queryClient\uB97C \uC0DD\uC131\uD574\uC90D\uB2C8\uB2E4. \uC0DD\uC131\uD55C queryClient\uC758 prefetchQuery\uD568\uC218\uB97C \uD1B5\uD574 \uB370\uC774\uD130\uB97C \uBBF8\uB9AC \uBD88\uB7EC\uC62C \uC218 \uC788\uB294\uB370\uC694.</p><p>prefetchQuery\uC5D0\uC11C\uB294 <code>queryKey</code> \uAC1D\uCCB4\uC640 <code>queryFn</code>\uB97C \uD544\uC694\uB85C \uD569\uB2C8\uB2E4. <code>queryKey</code>\uB294 \uB370\uC774\uD130\uB97C \uD398\uCE6D\uD558\uB294\uB370 \uD544\uC694\uD55C \uD0A4\uAC12\uC774\uB77C\uACE0 \uBCF4\uC2DC\uBA74 \uB429\uB2C8\uB2E4. \uC774 \uCF54\uB4DC\uB85C \uC608\uB97C \uB4E4\uC790\uBA74, queryKey\uAC00 [&quot;posts&quot;, &quot;recommends&quot;]\uC774\uBBC0\uB85C \uD3EC\uC2A4\uD2B8, \uCD94\uCC9C \uC989 \uCD94\uCC9C\uD3EC\uC2A4\uD2B8\uB4E4\uC744 \uBD88\uB7EC\uC624\uB294 \uD0A4\uB77C\uACE0 \uBCF4\uC2DC\uBA74 \uB429\uB2C8\uB2E4. \uC774 \uD0A4\uB97C \uC124\uC815\uD558\uB294 \uAC83\uC740 \uAC1C\uBC1C\uC790\uAC00 \uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uADF8\uB807\uB2E4\uBA74 <code>[&quot;posts&quot;, &quot;following&quot;]</code>\uB294 \uD314\uB85C\uC789\uD55C \uC0AC\uB78C\uB4E4\uC758 \uD3EC\uC2A4\uD2B8\uB97C \uBD88\uB7EC\uC624\uB294 \uAC83\uC774\uACA0\uC8E0?</p><p>\uADF8 \uB2E4\uC74C queryFn\uB294 \uC774 \uB54C \uB370\uC774\uD130\uB97C fetch\uD558\uB294 \uD568\uC218\uB97C \uB123\uC5B4\uC8FC\uB294 \uAC83\uC785\uB2C8\uB2E4. <code>getPostRecommends</code> \uD568\uC218\uB294 \uC544\uB798\uC640 \uAC19\uC774 \uCD94\uCC9C \uD3EC\uC2A4\uD2B8\uB97C \uAC00\uC838\uC624\uB294 \uD568\uC218\uC785\uB2C8\uB2E4. \uC5EC\uAE30\uC11C\uB294 \uC2E4\uC81C \uBC31\uC5D4\uB4DC\uAC00 \uC5C6\uAE30 \uB54C\uBB38\uC5D0 msw\uB97C \uC774\uC6A9\uD574 \uBAA9\uC5C5 \uB370\uC774\uD130\uB97C \uB9AC\uD134\uD574\uC8FC\uACE0 \uC788\uB294\uB370\uC694.</p><p><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-4877378276818686" data-ad-slot="9743150776" data-ad-format="auto" data-full-width-responsive="true"></ins></p>`,24),r=s(`<div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getPostRecommends</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">http://localhost:9090/api/postRecommends</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    next<span class="token operator">:</span> <span class="token punctuation">{</span>
      tags<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;posts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;recommends&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    cache<span class="token operator">:</span> <span class="token string">&quot;no-cache&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>msw handler</code></p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code>  http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/api/postRecommends&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> request <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cursor <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;cursor&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        postId<span class="token operator">:</span> cursor <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
        User<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>cursor <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> Z.com is so marvelous. I&#39;m gonna buy that.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        Images<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> imageId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> link<span class="token operator">:</span> faker<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">urlLoremFlickr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        createdAt<span class="token operator">:</span> <span class="token function">generateDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        postId<span class="token operator">:</span> cursor <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span>
        User<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>cursor <span class="token operator">+</span> <span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> Z.com is so marvelous. I&#39;m gonna buy that.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        Images<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> imageId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> link<span class="token operator">:</span> faker<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">urlLoremFlickr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> imageId<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> link<span class="token operator">:</span> faker<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">urlLoremFlickr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        createdAt<span class="token operator">:</span> <span class="token function">generateDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        postId<span class="token operator">:</span> cursor <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span>
        User<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>cursor <span class="token operator">+</span> <span class="token number">3</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> Z.com is so marvelous. I&#39;m gonna buy that.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        Images<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        createdAt<span class="token operator">:</span> <span class="token function">generateDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        postId<span class="token operator">:</span> cursor <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">,</span>
        User<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>cursor <span class="token operator">+</span> <span class="token number">4</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> Z.com is so marvelous. I&#39;m gonna buy that.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        Images<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> imageId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> link<span class="token operator">:</span> faker<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">urlLoremFlickr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> imageId<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> link<span class="token operator">:</span> faker<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">urlLoremFlickr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> imageId<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> link<span class="token operator">:</span> faker<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">urlLoremFlickr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> imageId<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> link<span class="token operator">:</span> faker<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">urlLoremFlickr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        createdAt<span class="token operator">:</span> <span class="token function">generateDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        postId<span class="token operator">:</span> cursor <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span>
        User<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>cursor <span class="token operator">+</span> <span class="token number">5</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> Z.com is so marvelous. I&#39;m gonna buy that.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        Images<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> imageId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> link<span class="token operator">:</span> faker<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">urlLoremFlickr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> imageId<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> link<span class="token operator">:</span> faker<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">urlLoremFlickr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> imageId<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> link<span class="token operator">:</span> faker<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">urlLoremFlickr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        createdAt<span class="token operator">:</span> <span class="token function">generateDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-hydration-boundary-\u110C\u1175\u110C\u1165\u11BC\u1112\u1161\u1100\u1175" tabindex="-1"><a class="header-anchor" href="#_3-hydration-boundary-\u110C\u1175\u110C\u1165\u11BC\u1112\u1161\u1100\u1175" aria-hidden="true">#</a> 3. hydration boundary \uC9C0\uC815\uD558\uAE30</h2><p>tanstack query\uB97C \uD1B5\uD574\uC11C \uAC00\uC838\uC628 \uB370\uC774\uD130\uB294 \uBAA8\uB4E0 \uCEF4\uD3EC\uB10C\uD2B8\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC218 \uC788\uB294 \uAC83\uC774 \uC544\uB2CC\uB370\uC694. \uADF8 \uBC94\uC704\uB97C \uC9C0\uC815\uD574\uC918\uC57C \uD569\uB2C8\uB2E4.</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code>	<span class="token punctuation">{</span><span class="token operator">...</span>\uC911\uB7B5<span class="token punctuation">}</span>
  <span class="token keyword">const</span> dehydratedState <span class="token operator">=</span> <span class="token function">dehydrate</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4. queryClient dehydrated</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HydrationBoundary</span></span> <span class="token attr-name">state</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>dehydratedState<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span><span class="token comment">/* 5. \uD558\uC774\uB4DC\uB808\uC774\uC158 \uBC14\uC6B4\uB354\uB9AC \uC124\uC815 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">cx</span><span class="token punctuation">(</span><span class="token string">&quot;tab_wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">cx</span><span class="token punctuation">(</span><span class="token string">&quot;tab_inner&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">cx</span><span class="token punctuation">(</span><span class="token string">&quot;page_title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\uD648</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tab</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PostForm</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PostForm</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HomePosts</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">HydrationBoundary</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uC704 \uCF54\uB4DC\uC5D0\uC11C\uB294 \uD648 \uCEF4\uD3EC\uB10C\uD2B8\uC5D0\uC11C <code>&lt;HomePosts/&gt;</code> \uD558\uC704\uC5D0\uC11C \uCD94\uCC9C \uD3EC\uC2A4\uD2B8\uC640 \uD314\uB85C\uC789 \uD3EC\uC2A4\uD2B8 \uCEF4\uD3EC\uB10C\uD2B8\uB97C \uC0AC\uC6A9\uD558\uAE30 \uB54C\uBB38\uC5D0 \uBC14\uC6B4\uB354\uB9AC\uB97C \uB113\uAC8C \uC9C0\uC815\uD588\uB294\uB370\uC694. \uC774 \uBC14\uC6B4\uB354\uB9AC\uB294 \uAC1C\uBC1C\uC790\uAC00 \uC6D0\uD558\uB294 \uBC94\uC704\uB97C \uC9C0\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><p>\uC5EC\uAE30\uAE4C\uC9C0 \uC791\uC131\uD558\uBA74 \uC11C\uBC84 \uCEF4\uD3EC\uB10C\uD2B8\uC5D0\uC11C \uB370\uC774\uD130\uB97C \uBBF8\uB9AC \uD398\uCE6D\uD558\uB294 \uACFC\uC815\uAE4C\uC9C0\uB294 \uC644\uB8CC\uAC00 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.</p><p><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-4877378276818686" data-ad-slot="9743150776" data-ad-format="auto" data-full-width-responsive="true"></ins></p>`,9),d=s(`<h2 id="_4-fetch\u1112\u1161\u11AB-\u1103\u1166\u110B\u1175\u1110\u1165-\u1109\u1161\u110B\u116D\u11BC\u1112\u1161\u1100\u1175" tabindex="-1"><a class="header-anchor" href="#_4-fetch\u1112\u1161\u11AB-\u1103\u1166\u110B\u1175\u1110\u1165-\u1109\u1161\u110B\u116D\u11BC\u1112\u1161\u1100\u1175" aria-hidden="true">#</a> 4. fetch\uD55C \uB370\uC774\uD130 \uC0AC\uC6A9\uD558\uAE30</h2><p>react-query\uB97C \uD1B5\uD574 fetch\uD55C \uB370\uC774\uD130\uB97C \uC0AC\uC6A9\uD560 \uCC28\uB840\uC778\uB370\uC694.</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token string">&quot;use client&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> getPostRecommends <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/app/_lib/getPostRecommends&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query&quot;</span><span class="token punctuation">;</span> <span class="token comment">// use Query import</span>
<span class="token keyword">import</span> Post <span class="token keyword">from</span> <span class="token string">&quot;../Post&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> IPost <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../PostArticle&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">PostRecommends</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useQuery</span><span class="token generic class-name"><span class="token operator">&lt;</span>IPost<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;posts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;recommends&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> queryFn<span class="token operator">:</span> getPostRecommends<span class="token punctuation">,</span> staleTime<span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">,</span> gcTime<span class="token operator">:</span> <span class="token number">100000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>data<span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Post</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>v<span class="token punctuation">.</span>postId<span class="token punctuation">}</span></span> <span class="token attr-name">post</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>v<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uC704 \uCEF4\uD3EC\uB10C\uD2B8\uC5D0\uC11C query\uC5D0 \uC788\uB294 \uB370\uC774\uD130\uB97C \uC0AC\uC6A9\uD558\uB294 \uACF3\uC778\uB370\uC694. useQuery\uC5D0\uC11C\uB3C4 \uB3D9\uC77C\uD558\uAC8C queryKey\uC640 queryFn\uC744 \uD544\uC694\uB85C \uD558\uB294\uB370\uC694. \uC704\uC5D0\uC11C \uC11C\uBC84 \uCEF4\uD3EC\uB10C\uD2B8\uC5D0\uC11C \uC791\uC131\uD588\uB358 queryKey\uC640 queryFn\uACFC \uB3D9\uC77C \uD55C \uAC12\uC744 \uB123\uC5B4\uC8FC\uC2DC\uBA74 \uB429\uB2C8\uB2E4.</p><p>\uC774\uB807\uAC8C \uD55C \uB4A4\uC5D0 \uB9AC\uD134 \uAC12\uC5D0\uC11C data\uB97C \uAEBC\uB0B4 \uC0AC\uC6A9\uD558\uBA74 tanstack query\uB97C \uC0AC\uC6A9\uD574\uC11C \uB370\uC774\uD130\uB97C \uAC00\uC838\uC624\uB294 \uC791\uC5C5\uC774 \uC644\uB8CC\uB429\uB2C8\uB2E4.</p><p>\uC704 \uCF54\uB4DC\uC5D0 \uC788\uB294 \uAC83\uCC98\uB7FC staleTime\uACFC gcTime, \uADF8\uB9AC\uACE0 isLoading, isFetching\uACFC \uAC19\uC774 \uC5EC\uB7EC state\uB97C \uC9C0\uC815\uD558\uACE0 \uAC00\uC838\uC62C \uC218 \uC788\uB294\uB370\uC694. \uC774 \uB0B4\uC6A9\uC5D0 \uB300\uD574\uC11C\uB294 \uB2E4\uC74C\uC5D0 \uB530\uB85C \uC791\uC131\uD558\uB3C4\uB85D \uD558\uACA0\uC2B5\uB2C8\uB2E4.</p>`,6);function m(v,g){return n(),c("div",null,[k,(n(),a(e("script"),null,{default:t(()=>[p(" (adsbygoogle = window.adsbygoogle || []).push({}); ")]),_:1})),r,(n(),a(e("script"),null,{default:t(()=>[p(" (adsbygoogle = window.adsbygoogle || []).push({}); ")]),_:1})),d])}var y=o(i,[["render",m],["__file","index.html.vue"]]);export{y as default};
