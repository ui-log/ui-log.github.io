import{_ as o}from"./app.3052dcfb.js";import{l as n,m as c,E as a,G as t,p as e,Y as p,K as s}from"./@vue.46e0ff50.js";import"./ts-debounce.471e9b22.js";import"./vue-router.66b7519d.js";import"./medium-zoom.0cdb07e4.js";import"./@vueuse.f471c5d7.js";const i={},l=s('<h1 id="nextjs\u110B\u1166\u1109\u1165-\u1109\u1165\u1107\u1165-\u110F\u1173\u11AF\u1105\u1161\u110B\u1175\u110B\u1165\u11AB\u1110\u1173-\u110F\u1165\u11B7\u1111\u1169\u1102\u1165\u11AB\u1110\u1173-redirect-\u110E\u1165\u1105\u1175\u1112\u1161\u1102\u1173\u11AB-\u1107\u1161\u11BC\u1107\u1165\u11B8" tabindex="-1"><a class="header-anchor" href="#nextjs\u110B\u1166\u1109\u1165-\u1109\u1165\u1107\u1165-\u110F\u1173\u11AF\u1105\u1161\u110B\u1175\u110B\u1165\u11AB\u1110\u1173-\u110F\u1165\u11B7\u1111\u1169\u1102\u1165\u11AB\u1110\u1173-redirect-\u110E\u1165\u1105\u1175\u1112\u1161\u1102\u1173\u11AB-\u1107\u1161\u11BC\u1107\u1165\u11B8" aria-hidden="true">#</a> Nextjs\uC5D0\uC11C \uC11C\uBC84, \uD074\uB77C\uC774\uC5B8\uD2B8 \uCEF4\uD3EC\uB10C\uD2B8 redirect \uCC98\uB9AC\uD558\uB294 \uBC29\uBC95</h1><p>\uC774 \uBB38\uC11C\uC5D0\uC11C\uB294 Nextjs \uC5D0\uC11C \uC11C\uBC84 \uCEF4\uD3EC\uB10C\uD2B8\uC640 \uD074\uB77C\uC774\uC5B8\uD2B8 \uCEF4\uD3EC\uB10C\uD2B8\uC5D0\uC11C Redirect\uB97C \uD558\uB294 \uBC29\uBC95\uC5D0 \uB300\uD574\uC11C \uC815\uB9AC\uD588\uC2B5\uB2C8\uB2E4.</p><h1 id="\u1105\u1175\u1103\u1161\u110B\u1175\u1105\u1166\u11A8\u1110\u1175\u11BC" tabindex="-1"><a class="header-anchor" href="#\u1105\u1175\u1103\u1161\u110B\u1175\u1105\u1166\u11A8\u1110\u1175\u11BC" aria-hidden="true">#</a> \uB9AC\uB2E4\uC774\uB809\uD305</h1><p>Next.js\uC5D0\uC11C \uB9AC\uB2E4\uC774\uB809\uD2B8\uB97C \uCC98\uB9AC\uD558\uB294 \uBA87 \uAC00\uC9C0 \uBC29\uBC95\uC774 \uC788\uC2B5\uB2C8\uB2E4. \uC774 \uD398\uC774\uC9C0\uC5D0\uC11C\uB294 \uAC01 \uC635\uC158\uACFC \uC0AC\uC6A9 \uC0AC\uB840, \uADF8\uB9AC\uACE0 \uB300\uADDC\uBAA8 \uB9AC\uB2E4\uC774\uB809\uD2B8 \uAD00\uB9AC \uBC29\uBC95\uC744 \uC0B4\uD3B4\uBCF4\uACA0\uC2B5\uB2C8\uB2E4.</p><table><thead><tr><th>API</th><th>Purpose</th><th>Where</th><th>Status Code</th></tr></thead><tbody><tr><td>redirect</td><td>Redirect user after a mutation or event</td><td>Server Components, Server Actions, Route Handlers</td><td>307 (Temporary) or 303 (Server Action)</td></tr><tr><td>permanentRedirect</td><td>Redirect user after a mutation or event</td><td>Server Components, Server Actions, Route Handlers</td><td>308 (Permanent)</td></tr><tr><td>useRouter</td><td>Perform a client-side navigation</td><td>Event Handlers in Client Components</td><td>N/A</td></tr><tr><td>redirects in next.config.js</td><td>Redirect an incoming request based on a path</td><td>next.config.js file</td><td>307 (Temporary) or 308 (Permanent)</td></tr><tr><td>NextResponse.redirect</td><td>Redirect an incoming request based on a condition</td><td>Middleware</td><td>Any</td></tr></tbody></table><p><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-4877378276818686" data-ad-slot="9743150776" data-ad-format="auto" data-full-width-responsive="true"></ins></p>',6),u=s(`<h2 id="redirect-\u1112\u1161\u11B7\u1109\u116E" tabindex="-1"><a class="header-anchor" href="#redirect-\u1112\u1161\u11B7\u1109\u116E" aria-hidden="true">#</a> redirect \uD568\uC218</h2><p>redirect \uD568\uC218\uB97C \uC0AC\uC6A9\uD558\uBA74 \uC0AC\uC6A9\uC790\uB97C \uB2E4\uB978 URL\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. redirect\uB97C Server Components, Route Handlers \uBC0F Server Actions\uC5D0\uC11C \uD638\uCD9C\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><p>redirect\uB294 mutation, \uC774\uBCA4\uD2B8 \uC774\uD6C4\uC5D0 \uC790\uC8FC \uC0AC\uC6A9\uB429\uB2C8\uB2E4. \uC608\uB97C \uB4E4\uC5B4, \uAC8C\uC2DC\uBB3C \uC0DD\uC131 \uD6C4:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token string">&quot;use server&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/navigation&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> revalidatePath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/cache&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">createPost</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// \uB370\uC774\uD130\uBCA0\uC774\uC2A4 \uD638\uCD9C</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \uC624\uB958 \uCC98\uB9AC</span>
  <span class="token punctuation">}</span>

  <span class="token function">revalidatePath</span><span class="token punctuation">(</span><span class="token string">&quot;/posts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \uCE90\uC2DC\uB41C \uAC8C\uC2DC\uBB3C \uC5C5\uB370\uC774\uD2B8</span>
  <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/post/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \uC0C8 \uAC8C\uC2DC\uBB3C \uD398\uC774\uC9C0\uB85C \uC774\uB3D9</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>redirect\uB294 \uAE30\uBCF8\uC801\uC73C\uB85C 307 (\uC784\uC2DC \uB9AC\uB2E4\uC774\uB809\uD2B8) \uC0C1\uD0DC \uCF54\uB4DC\uB97C \uBC18\uD658\uD569\uB2C8\uB2E4. Server Action\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uB54C\uB294 \uC77C\uBC18\uC801\uC73C\uB85C POST \uC694\uCCAD \uACB0\uACFC\uB85C \uC131\uACF5 \uD398\uC774\uC9C0\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD560 \uB54C \uC0AC\uC6A9\uB418\uB294 303 (\uB2E4\uB978 \uACF3 \uBCF4\uAE30) \uC0C1\uD0DC \uCF54\uB4DC\uB97C \uBC18\uD658\uD569\uB2C8\uB2E4.</li><li>redirect\uB294 \uB0B4\uBD80\uC801\uC73C\uB85C \uC624\uB958\uB97C throw\uD558\uBBC0\uB85C try/catch \uBE14\uB85D \uC678\uBD80\uC5D0\uC11C \uD638\uCD9C\uD574\uC57C \uD569\uB2C8\uB2E4.</li><li>redirect\uB294 \uB80C\uB354\uB9C1 \uD504\uB85C\uC138\uC2A4 \uC911\uC5D0 Client Components\uC5D0\uC11C \uD638\uCD9C\uD560 \uC218 \uC788\uC9C0\uB9CC \uC774\uBCA4\uD2B8 \uD578\uB4E4\uB7EC\uC5D0\uC11C\uB294 \uD638\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC774 \uACBD\uC6B0 useRouter \uD6C5\uC744 \uC0AC\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</li><li>redirect\uB294 \uC808\uB300 URL\uB3C4 \uD5C8\uC6A9\uD558\uBA70 \uC678\uBD80 \uB9C1\uD06C\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD558\uB294 \uB370 \uC0AC\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</li><li>\uB80C\uB354\uB9C1 \uD504\uB85C\uC138\uC2A4 \uC804\uC5D0 \uB9AC\uB2E4\uC774\uB809\uD2B8\uB97C \uD558\uB824\uBA74 next.config.js \uB610\uB294 Middleware\uB97C \uC0AC\uC6A9\uD558\uC138\uC694.</li></ul></div><p>\uB354 \uB9CE\uC740 \uC815\uBCF4\uB294 redirect API \uCC38\uC870\uB97C \uCC38\uACE0\uD558\uC138\uC694.</p><h2 id="permanentredirect-\u1112\u1161\u11B7\u1109\u116E" tabindex="-1"><a class="header-anchor" href="#permanentredirect-\u1112\u1161\u11B7\u1109\u116E" aria-hidden="true">#</a> permanentRedirect \uD568\uC218</h2><p>permanentRedirect \uD568\uC218\uB97C \uC0AC\uC6A9\uD558\uBA74 \uC0AC\uC6A9\uC790\uB97C \uC601\uAD6C\uC801\uC73C\uB85C \uB2E4\uB978 URL\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. permanentRedirect\uB97C Server Components, Route Handlers \uBC0F Server Actions\uC5D0\uC11C \uD638\uCD9C\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><p>permanentRedirect\uB294 \uC5D4\uD130\uD2F0\uC758 \uADFC\uBCF8\uC801\uC778 URL\uC744 \uBCC0\uACBD\uD558\uB294 mutation, \uC774\uBCA4\uD2B8 \uD6C4\uC5D0 \uC790\uC8FC \uC0AC\uC6A9\uB429\uB2C8\uB2E4. \uC608\uB97C \uB4E4\uC5B4, \uC0AC\uC6A9\uC790 \uC774\uB984\uC744 \uBCC0\uACBD\uD55C \uD6C4\uC5D0 \uC0AC\uC6A9\uC790\uC758 \uD504\uB85C\uD544 URL\uC744 \uC5C5\uB370\uC774\uD2B8\uD558\uB294 \uACBD\uC6B0:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token string">&quot;use server&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> permanentRedirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/navigation&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> revalidateTag <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/cache&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">updateUsername</span><span class="token punctuation">(</span>username<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> formData<span class="token operator">:</span> FormData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// \uB370\uC774\uD130\uBCA0\uC774\uC2A4 \uD638\uCD9C</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \uC624\uB958 \uCC98\uB9AC</span>
  <span class="token punctuation">}</span>

  <span class="token function">revalidateTag</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \uC0AC\uC6A9\uC790 \uC774\uB984\uC5D0 \uB300\uD55C \uBAA8\uB4E0 \uCC38\uC870 \uC5C5\uB370\uC774\uD2B8</span>
  <span class="token function">permanentRedirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/profile/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \uC0C8 \uC0AC\uC6A9\uC790 \uD504\uB85C\uD544\uB85C \uC774\uB3D9</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>permanentRedirect\uB294 \uAE30\uBCF8\uC801\uC73C\uB85C 308 (\uC601\uAD6C\uC801 \uB9AC\uB2E4\uC774\uB809\uD2B8) \uC0C1\uD0DC \uCF54\uB4DC\uB97C \uBC18\uD658\uD569\uB2C8\uB2E4.</li><li>permanentRedirect\uB294 \uC808\uB300 URL\uB3C4 \uD5C8\uC6A9\uD558\uBA70 \uC678\uBD80 \uB9C1\uD06C\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD558\uB294 \uB370 \uC0AC\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</li><li>\uB80C\uB354\uB9C1 \uD504\uB85C\uC138\uC2A4 \uC804\uC5D0 \uB9AC\uB2E4\uC774\uB809\uD2B8\uB97C \uD558\uB824\uBA74 next.config.js \uB610\uB294 Middleware\uB97C \uC0AC\uC6A9\uD558\uC138\uC694.</li></ul></div><p>\uB354 \uB9CE\uC740 \uC815\uBCF4\uB294 permanentRedirect API \uCC38\uC870\uB97C \uCC38\uACE0\uD558\uC138\uC694.</p><p><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-4877378276818686" data-ad-slot="9743150776" data-ad-format="auto" data-full-width-responsive="true"></ins></p>`,13),r=s(`<h2 id="userouter-\u1112\u116E\u11A8" tabindex="-1"><a class="header-anchor" href="#userouter-\u1112\u116E\u11A8" aria-hidden="true">#</a> useRouter() \uD6C5</h2><p>Client Components\uC758 \uC774\uBCA4\uD2B8 \uD578\uB4E4\uB7EC \uB0B4\uC5D0\uC11C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD574\uC57C \uD558\uB294 \uACBD\uC6B0 useRouter \uD6C5\uC758 push \uBA54\uC11C\uB4DC\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC608\uB97C \uB4E4\uC5B4:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token string">&quot;use client&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/navigation&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/dashboard&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      \uB300\uC2DC\uBCF4\uB4DC
    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>\uC0AC\uC6A9\uC790\uB97C \uD504\uB85C\uADF8\uB798\uBC0D \uBC29\uC2DD\uC73C\uB85C \uC774\uB3D9\uC2DC\uD0A4\uC9C0 \uC54A\uC544\uB3C4 \uB41C\uB2E4\uBA74 <code>&lt;Link&gt;</code> \uCEF4\uD3EC\uB10C\uD2B8\uB97C \uC0AC\uC6A9\uD574\uC57C \uD569\uB2C8\uB2E4.</li></ul></div><p>\uB354 \uB9CE\uC740 \uC815\uBCF4\uB294 useRouter API \uCC38\uC870\uB97C \uCC38\uACE0\uD558\uC138\uC694.</p><h2 id="next-config-js\u110B\u1174-\u1105\u1175\u1103\u1161\u110B\u1175\u1105\u1166\u11A8\u1110\u1173" tabindex="-1"><a class="header-anchor" href="#next-config-js\u110B\u1174-\u1105\u1175\u1103\u1161\u110B\u1175\u1105\u1166\u11A8\u1110\u1173" aria-hidden="true">#</a> next.config.js\uC758 \uB9AC\uB2E4\uC774\uB809\uD2B8</h2><p>next.config.js \uD30C\uC77C\uC758 redirects \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uBA74 \uB4E4\uC5B4\uC624\uB294 \uC694\uCCAD \uACBD\uB85C\uB97C \uB2E4\uB978 \uB300\uC0C1 \uACBD\uB85C\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC774\uAC83\uC740 \uD398\uC774\uC9C0\uC758 URL \uAD6C\uC870\uB97C \uBCC0\uACBD\uD558\uAC70\uB098 \uC54C\uB824\uC9C4 \uB9AC\uB2E4\uC774\uB809\uD2B8 \uBAA9\uB85D\uC774 \uC788\uB294 \uACBD\uC6B0 \uC720\uC6A9\uD569\uB2C8\uB2E4.</p><p>redirects\uB294 \uACBD\uB85C, \uD5E4\uB354, \uCFE0\uD0A4 \uBC0F \uCFFC\uB9AC \uB9E4\uCE6D\uC744 \uC9C0\uC6D0\uD558\uC5EC \uB4E4\uC5B4\uC624\uB294 \uC694\uCCAD\uC744 \uAE30\uBC18\uC73C\uB85C \uC0AC\uC6A9\uC790\uB97C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD560 \uC218 \uC788\uB3C4\uB85D \uD569\uB2C8\uB2E4.</p><p>\uB9AC\uB2E4\uC774\uB809\uD2B8\uB97C \uC0AC\uC6A9\uD558\uB824\uBA74 next.config.js \uD30C\uC77C\uC5D0 \uC635\uC158\uC744 \uCD94\uAC00\uD558\uC138\uC694:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">redirects</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
      <span class="token comment">// \uAE30\uBCF8 \uB9AC\uB2E4\uC774\uB809\uD2B8</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token string">&quot;/about&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">destination</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">permanent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// \uC640\uC77C\uB4DC\uCE74\uB4DC \uACBD\uB85C \uB9E4\uCE6D</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token string">&quot;/blog/:slug&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">destination</span><span class="token operator">:</span> <span class="token string">&quot;/news/:slug&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">permanent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uB354 \uB9CE\uC740 \uC815\uBCF4\uB294 redirects API \uCC38\uC870\uB97C \uCC38\uACE0\uD558\uC138\uC694.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>redirects\uB294 permanent \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uC5EC 307 (\uC784\uC2DC \uB9AC\uB2E4\uC774\uB809\uD2B8) \uB610\uB294 308 (\uC601\uAD6C\uC801 \uB9AC\uB2E4\uC774\uB809\uD2B8) \uC0C1\uD0DC \uCF54\uB4DC\uB97C \uBC18\uD658\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</li><li>\uD50C\uB7AB\uD3FC\uC5D0 \uB530\uB77C redirects\uC5D0 \uC81C\uD55C\uC774 \uC788\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC608\uB97C \uB4E4\uC5B4 Vercel\uC5D0\uC11C\uB294 1,024\uAC1C\uC758 \uB9AC\uB2E4\uC774\uB809\uD2B8 \uC81C\uD55C\uC774 \uC788\uC2B5\uB2C8\uB2E4. \uB300\uADDC\uBAA8 \uB9AC\uB2E4\uC774\uB809\uD2B8(1000\uAC1C \uC774\uC0C1)\uB97C \uAD00\uB9AC\uD558\uB824\uBA74 Middleware\uB97C \uC0AC\uC6A9\uD558\uC5EC \uC0AC\uC6A9\uC790 \uC9C0\uC815 \uC194\uB8E8\uC158\uC744 \uB9CC\uB4DC\uB294 \uAC83\uC774 \uC88B\uC2B5\uB2C8\uB2E4.</li></ul></div><h2 id="\u1106\u1175\u1103\u1173\u11AF\u110B\u1170\u110B\u1165\u110B\u1174-nextresponse-redirect" tabindex="-1"><a class="header-anchor" href="#\u1106\u1175\u1103\u1173\u11AF\u110B\u1170\u110B\u1165\u110B\u1174-nextresponse-redirect" aria-hidden="true">#</a> \uBBF8\uB4E4\uC6E8\uC5B4\uC758 NextResponse.redirect</h2><p>\uBBF8\uB4E4\uC6E8\uC5B4\uB97C \uC0AC\uC6A9\uD558\uBA74 \uC694\uCCAD\uC774 \uC644\uB8CC\uB418\uAE30 \uC804\uC5D0 \uCF54\uB4DC\uB97C \uC2E4\uD589\uD55C \uB2E4\uC74C NextResponse.redirect\uB97C \uC0AC\uC6A9\uD558\uC5EC \uB2E4\uB978 URL\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC774\uB294 \uC870\uAC74(\uC608: \uC778\uC99D, \uC138\uC158 \uAD00\uB9AC \uB4F1)\uC5D0 \uB530\uB77C \uC0AC\uC6A9\uC790\uB97C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD558\uAC70\uB098 \uB300\uADDC\uBAA8 \uB9AC\uB2E4\uC774\uB809\uD2B8\uB97C \uAC00\uC9C0\uACE0 \uC788\uB294 \uACBD\uC6B0 \uC720\uC6A9\uD569\uB2C8\uB2E4.</p><p>\uC608\uB97C \uB4E4\uC5B4, \uC0AC\uC6A9\uC790\uAC00 \uC778\uC99D\uB418\uC9C0 \uC54A\uC740 \uACBD\uC6B0 /login \uD398\uC774\uC9C0\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD558\uB824\uBA74 \uB2E4\uC74C\uACFC \uAC19\uC774 \uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4:</p><p><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-4877378276818686" data-ad-slot="9743150776" data-ad-format="auto" data-full-width-responsive="true"></ins></p>`,16),d=s(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NextResponse<span class="token punctuation">,</span> NextRequest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/server&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> authenticate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;auth-provider&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">middleware</span><span class="token punctuation">(</span>request<span class="token operator">:</span> NextRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isAuthenticated <span class="token operator">=</span> <span class="token function">authenticate</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// \uC0AC\uC6A9\uC790\uAC00 \uC778\uC99D\uB41C \uACBD\uC6B0 \uACC4\uC18D \uC9C4\uD589</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isAuthenticated<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \uC778\uC99D\uB418\uC9C0 \uC54A\uC740 \uACBD\uC6B0 \uB85C\uADF8\uC778 \uD398\uC774\uC9C0\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8</span>
  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  matcher<span class="token operator">:</span> <span class="token string">&quot;/dashboard/:path*&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>\uBBF8\uB4E4\uC6E8\uC5B4\uB294 next.config.js\uC758 \uB9AC\uB2E4\uC774\uB809\uD2B8 \uC774\uD6C4\uC5D0 \uC2E4\uD589\uB418\uACE0 \uB80C\uB354\uB9C1 \uC804\uC5D0 \uC2E4\uD589\uB429\uB2C8\uB2E4.</li></ul></div><p>\uB354 \uB9CE\uC740 \uC815\uBCF4\uB294 \uBBF8\uB4E4\uC6E8\uC5B4 \uBB38\uC11C\uB97C \uCC38\uACE0\uD558\uC138\uC694.</p><h2 id="\u1103\u1162\u1100\u1172\u1106\u1169-\u1105\u1175\u1103\u1161\u110B\u1175\u1105\u1166\u11A8\u1110\u1173-\u1100\u116A\u11AB\u1105\u1175-\u1100\u1169\u1100\u1173\u11B8" tabindex="-1"><a class="header-anchor" href="#\u1103\u1162\u1100\u1172\u1106\u1169-\u1105\u1175\u1103\u1161\u110B\u1175\u1105\u1166\u11A8\u1110\u1173-\u1100\u116A\u11AB\u1105\u1175-\u1100\u1169\u1100\u1173\u11B8" aria-hidden="true">#</a> \uB300\uADDC\uBAA8 \uB9AC\uB2E4\uC774\uB809\uD2B8 \uAD00\uB9AC (\uACE0\uAE09)</h2><p>\uB300\uADDC\uBAA8 \uB9AC\uB2E4\uC774\uB809\uD2B8(1000\uAC1C \uC774\uC0C1)\uB97C \uAD00\uB9AC\uD558\uB824\uBA74 \uBBF8\uB4E4\uC6E8\uC5B4\uB97C \uC0AC\uC6A9\uD558\uC5EC \uC0AC\uC6A9\uC790 \uC9C0\uC815 \uC194\uB8E8\uC158\uC744 \uB9CC\uB4E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC774\uB97C \uD1B5\uD574 \uC751\uC6A9 \uD504\uB85C\uADF8\uB7A8\uC744 \uB2E4\uC2DC \uBC30\uD3EC\uD558\uC9C0 \uC54A\uACE0\uB3C4 \uD504\uB85C\uADF8\uB798\uBC0D \uBC29\uC2DD\uC73C\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8\uB97C \uCC98\uB9AC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><p>\uC774\uB97C \uC704\uD574 \uACE0\uB824\uD574\uC57C \uD560 \uC0AC\uD56D\uC740 \uB2E4\uC74C\uACFC \uAC19\uC2B5\uB2C8\uB2E4:</p><ul><li>\uB9AC\uB2E4\uC774\uB809\uD2B8 \uB9F5 \uC0DD\uC131 \uBC0F \uC800\uC7A5.</li><li>\uB370\uC774\uD130 \uC870\uD68C \uC131\uB2A5 \uCD5C\uC801\uD654.</li></ul><blockquote><p>Next.js \uC608\uC81C: \uC544\uB798 \uCD94\uCC9C \uC0AC\uD56D\uC758 \uAD6C\uD604 \uC608\uC81C\uB294 \uBE14\uB8F8 \uD544\uD130\uB97C \uC0AC\uC6A9\uD55C \uBBF8\uB4E4\uC6E8\uC5B4\uB97C \uD3EC\uD568\uD569\uB2C8\uB2E4.</p></blockquote><h3 id="_1-\u1105\u1175\u1103\u1161\u110B\u1175\u1105\u1166\u11A8\u1110\u1173-\u1106\u1162\u11B8-\u1109\u1162\u11BC\u1109\u1165\u11BC-\u1106\u1175\u11BE-\u110C\u1165\u110C\u1161\u11BC" tabindex="-1"><a class="header-anchor" href="#_1-\u1105\u1175\u1103\u1161\u110B\u1175\u1105\u1166\u11A8\u1110\u1173-\u1106\u1162\u11B8-\u1109\u1162\u11BC\u1109\u1165\u11BC-\u1106\u1175\u11BE-\u110C\u1165\u110C\u1161\u11BC" aria-hidden="true">#</a> 1. \uB9AC\uB2E4\uC774\uB809\uD2B8 \uB9F5 \uC0DD\uC131 \uBC0F \uC800\uC7A5</h3><p>\uB9AC\uB2E4\uC774\uB809\uD2B8 \uB9F5\uC740 \uB370\uC774\uD130\uBCA0\uC774\uC2A4(\uC77C\uBC18\uC801\uC73C\uB85C \uD0A4-\uAC12 \uC800\uC7A5\uC18C) \uB610\uB294 JSON \uD30C\uC77C\uC5D0 \uC800\uC7A5\uD560 \uC218 \uC788\uB294 \uB9AC\uB2E4\uC774\uB809\uD2B8 \uBAA9\uB85D\uC785\uB2C8\uB2E4.</p><p>\uB2E4\uC74C\uACFC \uAC19\uC740 \uB370\uC774\uD130 \uAD6C\uC870\uB97C \uACE0\uB824\uD574\uBCF4\uC138\uC694:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;/old&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;destination&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/new&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;permanent&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;/blog/post-old&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;destination&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/blog/post-new&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;permanent&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uBBF8\uB4E4\uC6E8\uC5B4\uC5D0\uC11C\uB294 Vercel\uC758 Edge Config\uB098 Redis\uC640 \uAC19\uC740 \uB370\uC774\uD130\uBCA0\uC774\uC2A4\uC5D0\uC11C \uC77D\uC5B4 \uB4E4\uC5EC \uB4E4\uC5B4\uC624\uB294 \uC694\uCCAD\uC744 \uAE30\uBC18\uC73C\uB85C \uC0AC\uC6A9\uC790\uB97C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NextResponse<span class="token punctuation">,</span> NextRequest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/server&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> get <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vercel/edge-config&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">RedirectEntry</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  destination<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  permanent<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">middleware</span><span class="token punctuation">(</span>request<span class="token operator">:</span> NextRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> pathname <span class="token operator">=</span> request<span class="token punctuation">.</span>nextUrl<span class="token punctuation">.</span>pathname<span class="token punctuation">;</span>
  <span class="token keyword">const</span> redirectData <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">get</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>redirectData <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> redirectData <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> redirectEntry<span class="token operator">:</span> RedirectEntry <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>redirectData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> statusCode <span class="token operator">=</span> redirectEntry<span class="token punctuation">.</span>permanent <span class="token operator">?</span> <span class="token number">308</span> <span class="token operator">:</span> <span class="token number">307</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span>redirectEntry<span class="token punctuation">.</span>destination<span class="token punctuation">,</span> statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \uB9AC\uB2E4\uC774\uB809\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC73C\uBA74 \uB9AC\uB2E4\uC774\uB809\uD2B8\uD558\uC9C0 \uC54A\uACE0 \uACC4\uC18D \uC9C4\uD589</span>
  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-4877378276818686" data-ad-slot="9743150776" data-ad-format="auto" data-full-width-responsive="true"></ins></p>`,15),k=s(`<h3 id="_2-\u1103\u1166\u110B\u1175\u1110\u1165-\u110C\u1169\u1112\u116C-\u1109\u1165\u11BC\u1102\u1173\u11BC-\u110E\u116C\u110C\u1165\u11A8\u1112\u116A" tabindex="-1"><a class="header-anchor" href="#_2-\u1103\u1166\u110B\u1175\u1110\u1165-\u110C\u1169\u1112\u116C-\u1109\u1165\u11BC\u1102\u1173\u11BC-\u110E\u116C\u110C\u1165\u11A8\u1112\u116A" aria-hidden="true">#</a> 2. \uB370\uC774\uD130 \uC870\uD68C \uC131\uB2A5 \uCD5C\uC801\uD654</h3><p>\uB4E4\uC5B4\uC624\uB294 \uBAA8\uB4E0 \uC694\uCCAD\uC5D0 \uB300\uD55C \uB300\uADDC\uBAA8 \uB370\uC774\uD130 \uC138\uD2B8\uB97C \uC77D\uB294 \uAC83\uC740 \uB290\uB9AC\uACE0 \uBE44\uC6A9\uC774 \uB9CE\uC774 \uB4E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uB370\uC774\uD130 \uC870\uD68C \uC131\uB2A5\uC744 \uCD5C\uC801\uD654\uD558\uB294 \uB450 \uAC00\uC9C0 \uBC29\uBC95\uC774 \uC788\uC2B5\uB2C8\uB2E4:</p><ul><li>Vercel Edge Config\uB098 Redis\uC640 \uAC19\uC740 \uBE60\uB978 \uC77D\uAE30\uC5D0 \uCD5C\uC801\uD654\uB41C \uB370\uC774\uD130\uBCA0\uC774\uC2A4 \uC0AC\uC6A9.</li><li>\uD6A8\uC728\uC801\uC778 \uB370\uC774\uD130 \uC870\uD68C \uC804\uB7B5 \uC0AC\uC6A9, \uC608\uB97C \uB4E4\uC5B4 \uBE14\uB8F8 \uD544\uD130\uB97C \uC0AC\uC6A9\uD558\uC5EC \uB300\uADDC\uBAA8 \uB9AC\uB2E4\uC774\uB809\uD2B8 \uD30C\uC77C\uC774\uB098 \uB370\uC774\uD130\uBCA0\uC774\uC2A4\uB97C \uC77D\uAE30 \uC804\uC5D0 \uC694\uCCAD\uC774 \uC788\uB294\uC9C0 \uD6A8\uC728\uC801\uC73C\uB85C \uD655\uC778\uD569\uB2C8\uB2E4.</li></ul><p>\uC774\uC804 \uC608\uC81C\uB97C \uACE0\uB824\uD558\uBA74 Middleware\uC5D0\uC11C \uC0DD\uC131\uB41C \uBE14\uB8F8 \uD544\uD130 \uD30C\uC77C\uC744 \uAC00\uC838\uC640\uC11C \uB4E4\uC5B4\uC624\uB294 \uC694\uCCAD \uACBD\uB85C\uAC00 \uBE14\uB8F8 \uD544\uD130\uC5D0 \uC788\uB294\uC9C0 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><p>\uC774 \uACBD\uC6B0 \uD574\uB2F9 \uACBD\uB85C\uB97C \uD655\uC778\uD558\uACE0 \uC801\uC808\uD55C URL\uB85C \uC0AC\uC6A9\uC790\uB97C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD558\uAE30 \uC704\uD574 Route Handler\uB85C \uC694\uCCAD\uC744 \uC804\uB2EC\uD569\uB2C8\uB2E4. \uC774\uB807\uAC8C \uD558\uBA74 \uBAA8\uB4E0 \uB4E4\uC5B4\uC624\uB294 \uC694\uCCAD\uC5D0 \uB300\uD574 \uB300\uADDC\uBAA8 \uB9AC\uB2E4\uC774\uB809\uD2B8 \uD30C\uC77C\uC744 \uBBF8\uB4E4\uC6E8\uC5B4\uC5D0 \uAC00\uC838\uC624\uB294 \uAC83\uC744 \uD53C\uD560 \uC218 \uC788\uC5B4\uC694.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NextResponse<span class="token punctuation">,</span> NextRequest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/server&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ScalableBloomFilter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;bloom-filters&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> GeneratedBloomFilter <span class="token keyword">from</span> <span class="token string">&quot;./redirects/bloom-filter.json&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">RedirectEntry</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  destination<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  permanent<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// \uC0DD\uC131\uB41C JSON \uD30C\uC77C\uC5D0\uC11C \uBE14\uB8F8 \uD544\uD130 \uCD08\uAE30\uD654</span>
<span class="token keyword">const</span> bloomFilter <span class="token operator">=</span> ScalableBloomFilter<span class="token punctuation">.</span><span class="token function">fromJSON</span><span class="token punctuation">(</span>GeneratedBloomFilter <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">middleware</span><span class="token punctuation">(</span>request<span class="token operator">:</span> NextRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \uB4E4\uC5B4\uC624\uB294 \uC694\uCCAD\uC758 \uACBD\uB85C \uAC00\uC838\uC624\uAE30</span>
  <span class="token keyword">const</span> pathname <span class="token operator">=</span> request<span class="token punctuation">.</span>nextUrl<span class="token punctuation">.</span>pathname<span class="token punctuation">;</span>

  <span class="token comment">// \uACBD\uB85C\uAC00 \uBE14\uB8F8 \uD544\uD130\uC5D0 \uC788\uB294\uC9C0 \uD655\uC778</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bloomFilter<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \uACBD\uB85C\uB97C Route Handler\uB85C \uC804\uB2EC</span>
    <span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/redirects?pathname=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>nextUrl<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>nextUrl<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// Route Handler\uC5D0\uC11C \uB9AC\uB2E4\uC774\uB809\uD2B8 \uB370\uC774\uD130 \uAC00\uC838\uC624\uAE30</span>
      <span class="token keyword">const</span> redirectData <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>api<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>redirectData<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> redirectEntry<span class="token operator">:</span> RedirectEntry <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">await</span> redirectData<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>redirectEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// \uC0C1\uD0DC \uCF54\uB4DC \uACB0\uC815</span>

          <span class="token keyword">const</span> statusCode <span class="token operator">=</span> redirectEntry<span class="token punctuation">.</span>permanent <span class="token operator">?</span> <span class="token number">308</span> <span class="token operator">:</span> <span class="token number">307</span><span class="token punctuation">;</span>

          <span class="token comment">// \uB300\uC0C1\uC73C\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8</span>
          <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span>redirectEntry<span class="token punctuation">.</span>destination<span class="token punctuation">,</span> statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \uB9AC\uB2E4\uC774\uB809\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC73C\uBA74 \uB9AC\uB2E4\uC774\uB809\uD2B8\uD558\uC9C0 \uC54A\uACE0 \uACC4\uC18D \uC9C4\uD589</span>
  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uADF8\uB7F0 \uB2E4\uC74C Route Handler\uC5D0\uC11C:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NextRequest<span class="token punctuation">,</span> NextResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/server&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> redirects <span class="token keyword">from</span> <span class="token string">&quot;@/app/redirects/redirects.json&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">RedirectEntry</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  destination<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  permanent<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token constant">GET</span><span class="token punctuation">(</span>request<span class="token operator">:</span> NextRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> pathname <span class="token operator">=</span> request<span class="token punctuation">.</span>nextUrl<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;pathname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pathname<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&quot;\uC798\uBABB\uB41C \uC694\uCCAD&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">400</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// redirects.json \uD30C\uC77C\uC5D0\uC11C \uB9AC\uB2E4\uC774\uB809\uD2B8 \uC5D4\uD2B8\uB9AC \uAC00\uC838\uC624\uAE30</span>
  <span class="token keyword">const</span> redirect <span class="token operator">=</span> <span class="token punctuation">(</span>redirects <span class="token keyword">as</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> RedirectEntry<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>pathname<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// \uBE14\uB8F8 \uD544\uD130 false positive \uACE0\uB824</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>redirect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&quot;\uB9AC\uB2E4\uC774\uB809\uD2B8 \uC5C6\uC74C&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">400</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \uB9AC\uB2E4\uC774\uB809\uD2B8 \uC5D4\uD2B8\uB9AC \uBC18\uD658</span>
  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>redirect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>\uBE14\uB8F8 \uD544\uD130\uB97C \uC0DD\uC131\uD558\uB824\uBA74 bloom-filters\uC640 \uAC19\uC740 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</li><li>\uC545\uC758\uC801\uC778 \uC694\uCCAD\uC744 \uBC29\uC9C0\uD558\uAE30 \uC704\uD574 Route Handler\uB85C\uC758 \uC694\uCCAD\uC744 \uC720\uD6A8\uC131 \uAC80\uC0AC\uD574\uC57C \uD569\uB2C8\uB2E4.</li></ul></div>`,9);function v(m,b){return n(),c("div",null,[l,(n(),a(p("script"),null,{default:t(()=>[e(" (adsbygoogle = window.adsbygoogle || []).push({}); ")]),_:1})),u,(n(),a(p("script"),null,{default:t(()=>[e(" (adsbygoogle = window.adsbygoogle || []).push({}); ")]),_:1})),r,(n(),a(p("script"),null,{default:t(()=>[e(" (adsbygoogle = window.adsbygoogle || []).push({}); ")]),_:1})),d,(n(),a(p("script"),null,{default:t(()=>[e(" (adsbygoogle = window.adsbygoogle || []).push({}); ")]),_:1})),k])}var x=o(i,[["render",v],["__file","index.html.vue"]]);export{x as default};
