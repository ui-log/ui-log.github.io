function x(c,o,t){var v,l,r;o===void 0&&(o=50),t===void 0&&(t={});var f=(v=t.isImmediate)!=null&&v,i=(l=t.callback)!=null&&l,u=t.maxWait,s=Date.now(),n=[];function w(){if(u!==void 0){var e=Date.now()-s;if(e+o>=u)return u-e}return o}var d=function(){var e=[].slice.call(arguments),a=this;return new Promise(function(m,D){var T=f&&r===void 0;if(r!==void 0&&clearTimeout(r),r=setTimeout(function(){if(r=void 0,s=Date.now(),!f){var h=c.apply(a,e);i&&i(h),n.forEach(function(j){return(0,j.resolve)(h)}),n=[]}},w()),T){var p=c.apply(a,e);return i&&i(p),m(p)}n.push({resolve:m,reject:D})})};return d.cancel=function(e){r!==void 0&&clearTimeout(r),n.forEach(function(a){return(0,a.reject)(e)}),n=[]},d}export{x as r};
