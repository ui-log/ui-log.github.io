---
title: "Storybook 6.x에서 8.0으로의 마이그레이션 가이드"
description: ""
date: 2024-04-07 04:20
sidebarDepth: 0
tag: Tech
thumbnail: 
originalTitle: "Migration guide from Storybook 6.x to 8.0"
link: "https://storybook.js.org/docs/migration-guide/from-older-version"
---


Storybook 8는 성능, 호환성 및 안정성을 향상시키는 데 초점을 맞추고 있어요. 주요 기능은 다음과 같아요:

- 🩻 새로운 비주얼 테스트 워크플로우인 Visual Tests 애드온을 통한 비주얼 테스팅
- 💨 2배에서 4배 더 빠른 테스트 빌드, 25-50% 더 빠른 React 독젠, 웹팩 프로젝트에 대한 SWC 지원
- 🧩 향상된 프레임워크 지원: 논-리액트 렌더러를 사용할 때 더 이상 리액트를 피어 의존성으로 설치할 필요가 없음
- 🎛️ React 및 Vue 프로젝트에서 컨트롤 생성 강화
- ⚡️ 개선된 Vite 아키텍처, Vitest 테스팅 및 Vite 5 지원
- 🌐 React 서버 컴포넌트 (RSC) 지원: 우리의 실험적인 솔루션은 브라우저에서 비동기 RSC를 렌더링하고 노드 코드를 모의하는 기능을 제공함
- ✨ 새롭게 갱신된 데스크톱 UI 및 모바일 UX
- ➕ 그 밖에도 많은 기능들이 있어요

이 안내서는 Storybook 6.x에서 8.0으로 성공적으로 업그레이드하기 위한 도움을 제공하는 것을 목적으로 합니다!

## 주요 변경 사항



이 안내의 나머지 부분은 성공적으로 업그레이드하는 데 도움이 될 것입니다. 자동으로 하거나 수동으로 하던 선택, 두 가지 방법 중에서 선택하실 수 있습니다. 하지만 먼저, Storybook 7과 Storybook 8에서 많은 중요한 변경 사항을 누적했습니다. 더 나아가기 전에 알아두어야 할 가장 중요한 변경 사항들은 다음과 같습니다:

- framework field는 이제 필수 사항입니다.
- Start 및 build CLI 바이너리가 제거되었습니다.
- storiesOf API가 제거되었습니다.
- *.stories.mdx 형식이 제거되었습니다.
- 렌더링 중에 더 이상 암묵적 액션(예: play 함수 내에서 argTypesRegex의 암시적 액션)을 사용할 수 없습니다.
- 컴포넌트 분석을 위한 기본 도구는 이제 react-docgen(react-docgen-typescript 대신)입니다.
- Storyshots가 제거되었습니다.
- Storybook 7에서 도입된 Addons API가 이제 필수 요건으로 요구됩니다.
- 생태계 업데이트
Webpack4 지원이 중단되었습니다.
IE11 지원이 중단되었습니다.
Node 18+가 이제 필요로 됩니다.
Next.js 13.5+가 이제 필요로 됩니다.
Vue 3+가 이제 필요로 됩니다.
Angular 15+가 이제 필요로 됩니다.
Svelte 4+가 이제 필요로 됩니다.
Yarn 1은 더 이상 지원되지 않습니다.

프로젝트에 이러한 변경 사항 중 어느 것이 해당되는 경우, 계속하기 전에 연결된 이주 공지 사항을 읽어보시기 바랍니다.

이러한 새로운 요구 사항이나 변경 사항 중 어떤 것이 프로젝트에 장애물이 될 경우, Storybook 7로 마이그레이션하는 요구 사항을 참조하시기를 권장드립니다.



Storybook 6에서 7, 그리고 Storybook 7에서 8로 이주하기 전에 전체 마이그레이션 노트를 읽어보시기를 권장드립니다. 또는 아래 지시 사항을 따를 수도 있습니다. 우리가 모든 것을 해결해 드릴게요!

## 자동 업그레이드

Storybook을 업그레이드하려면:

```npm
npx storybook@latest upgrade
```



다음을 수행할 것입니다:

- 현재 프로젝트에 해당하는 패치가 없음을 확인합니다.
만약 문제가 발생한다면 계속하기 전에 이를 해결하는 방법에 대한 지침을 받게 될 것입니다.
- Storybook 의존성을 최신 버전으로 업그레이드합니다.
- 자동 마이그레이션 모음을 실행하여 다음을 수행합니다:
일반적인 업그레이드 작업을 확인합니다.
더 많은 정보가 포함된 링크로 필요한 변경 사항을 설명합니다.
승인을 요청한 후 귀하를 대신하여 작업을 수행합니다.
- 일반적인 업그레이드 작업을 확인합니다.
- 더 많은 정보가 포함된 링크로 필요한 변경 사항을 설명합니다.
- 승인을 요청한 후 귀하를 대신하여 작업을 수행합니다.

### 일반적인 업그레이드 문제

자동으로 프로젝트를 업그레이드하기 위해 최선을 다하겠지만, 업그레이드 과정에서 마주칠 수 있는 두 가지 문제가 있습니다:



#### storyStoreV7: false와 storiesOf

.storybook/main.js에서 storyStoreV7: false라는 설정이 있다면 Storybook 8로 업그레이드하기 전에 이 설정을 제거해야 합니다.

StoriesOf API를 사용하는 경우(Storybook 7에서 storyStoreV7: false가 필요합니다), 스토리를 CSF로 이전하거나 새 인덱서 API를 사용하여 스토리를 동적으로 계속 생성해야 합니다.

#### MDX 1에서 MDX 3으로



Storybook 8에서는 MDX 3을 사용합니다. 만약 MDX 1(Storybook 6에서 사용)에서 온 것이라면, MDX 2에서 중대하게 변경 사항이 있었습니다. 업그레이드하는 데 성공적으로 도움이 될 수 있는 안내를 참조해주세요.

### vite.config.js 파일이 누락되었습니다

만약 Vite를 사용하고 있다면, Storybook과 함께 최신 버전의 Vite를 사용하려면 프로젝트 루트에 vite.config.js 파일을 만들어야 할 수도 있습니다. 또한, 프레임워크용 Vite 플러그인을 설치하고 구성해야 할 수도 있습니다. 자세한 정보는 전체 마이그레이션 노트에서 확인할 수 있습니다.

## 문제 해결



자동 업그레이드를 통해 Storybook을 작동 가능한 상태로 만들 수 있을 거예요. 업그레이드 후에 Storybook을 실행하는 중에 에러가 발생하면 다음과 같이 해보세요:

- 일반적인 문제(중복 의존성, 호환되지 않는 애드온, 불일치하는 버전 등)를 확인하고 해결 방법에 대한 제안을 보기 위해 doctor 명령을 실행해보세요.
- 개발 명령어로 storybook을 실행 중이라면, 대신 build 명령어를 사용해보세요. 때로는 개발 에러보다 빌드 에러가 더 명확할 수 있어요!
- Storybook 8의 주요 변경 사항을 포함하는 전체 마이그레이션 노트를 확인해보세요. 업그레이드할 때 이미 대부분의 변경 사항이 자동으로 처리되지만, 그렇지 않은 몇 가지도 있어요. 저희가 인지하지 못하고 있는 코너 케이스를 경험중일 수도 있어요.
- GitHub의 Storybook 이슈를 검색해보세요. 문제를 겪고 있다면, 다른 사람들도 그럴 확률이 높아요. 그럴 경우 이슈에 추천을 표시하고, 댓글에 기술된 해결책을 시도해보고 유용한 정보가 있다면 다시 댓글로 달아주세요.
- 기존 이슈가 없다면, 재현 사례를 첨부하여 이슈를 제기해주세요. 업그레이드를 진행함에 따라 Storybook 8 이슈에 우리가 집중할 것이니 안심하세요.

만약 스스로 디버깅을 선호한다면, 문제를 좁히는 데 도움이 되는 몇 가지 유용한 작업이 있어요:

- @storybook npm 네임스페이스에 속하지 않는 모든 애드온을 제거해보세요 (storybook 패키지는 제거하지 않았는지 확인해주세요). 7.x와 잘 작동했던 커뮤니티 애드온이 8.0과 호환되지 않을 수 있기 때문에 해당 여부를 확인하는 가장 빠른 방법이에요. Storybook 8와 호환되도록 업그레이드해야 하는 애드온을 발견하면 해당 애드온 리포지토리에 이슈를 올리거나, 더 좋은 방법으로 업그레이드를 위한 풀 리퀘스트를 올려주세요!
- 다른 디버깅 기술로는 Storybook의 이전 프리릴리스 버전으로 이전 버전으로 나눠가며 문제가 발생한 버전을 찾아내는 것이 있어요. 예를 들어, 현재 Storybook의 프리릴리스 버전이 8.0.0-beta.56라고 가정한다면, package.json에서 버전을 8.0.0-alpha.0으로 설정하고 다시 설치하여 작동하는지 확인할 수 있어요(이때 alpha.0은 거의 7.6.x와 동일할 거에요). 작동한다면, 8.0.0-beta.0, 그 다음 8.0.0-beta.28 등으로 시도해볼 수 있어요. 문제가 발생한 버전을 찾았다면, 해당 변경 사항을 살펴보고 문제가 된 부분을 찾았다면, Storybook 모노레포지토리에 이슈나 풀 리퀘스트를 제출해주세요. 빠르게 처리하도록 최선을 다할게요.



## 선택적인 마이그레이션

자동 마이그레이션 및 수동 마이그레이션 외에도 고려해야 할 선택적인 마이그레이션이 있습니다.  Storybook 7 및 8에서는 사전 경고를 표시한 기능 또는 미래에 더 생산적일 수 있는 최선의 사례들이 있습니다.

### CSF 2에서 CSF 3으로

CSF 2에서 CSF 3으로 이야기를 변환하는 것에는 많은 이유가 있습니다. 대부분의 경우 코드 변경을 자동으로 수행해주는 코드모드를 제공하므로(파일에 맞게 glob을 업데이트해야 합니다):



```npm
# CSF 2에서 CSF 3로 변환하기
npx storybook@latest migrate csf-2-to-3 --glob="**/*.stories.tsx" --parser=tsx
```